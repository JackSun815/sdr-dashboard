const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-DdvoZJSt.js","assets/vendor-CVhfncNt.js"])))=>i.map(i=>d[i]);
var Eu=Object.defineProperty;var Tu=(r,e,t)=>e in r?Eu(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ku=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var W=(r,e,t)=>Tu(r,typeof e!="symbol"?e+"":e,t);import{r as E,a as $u,g as Du,c as we,b as Je,R as k,d as Hl,u as Ou,e as Mu,L as Cn,f as Wl,h as vt,B as Cu,N as Pn,H as Pu}from"./vendor-CVhfncNt.js";var vC=ku((DC,bn)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var Bl={exports:{}},ps={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Au=E,Ru=Symbol.for("react.element"),Iu=Symbol.for("react.fragment"),Lu=Object.prototype.hasOwnProperty,Fu=Au.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uu={key:!0,ref:!0,__self:!0,__source:!0};function ql(r,e,t){var n,s={},a=null,i=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)Lu.call(e,n)&&!Uu.hasOwnProperty(n)&&(s[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Ru,type:r,key:a,ref:i,props:s,_owner:Fu.current}}ps.Fragment=Iu;ps.jsx=ql;ps.jsxs=ql;Bl.exports=ps;var o=Bl.exports,zl,Bi=$u;zl=Bi.createRoot,Bi.hydrateRoot;function Gl(){const[r,e]=E.useState(null),[t,n]=E.useState(null),[s,a]=E.useState(!0),[i,l]=E.useState(null);return E.useEffect(()=>{const c=localStorage.getItem("currentUser");if(!c){a(!1);return}try{const d=JSON.parse(c),u=new Date().toISOString(),h={id:d.email,role:"manager",full_name:d.fullName||"Manager",email:d.email,created_at:u,updated_at:u,active:!0,super_admin:d.super_admin||!1};e({id:h.id}),n(h),l(null)}catch(d){console.error("Auth error:",d),l("Authentication failed"),e(null),n(null),localStorage.removeItem("currentUser")}a(!1)},[]),{user:r,profile:t,loading:s,error:i}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hu={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(r,e)=>{const t=E.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:l="",children:c,...d},u)=>E.createElement("svg",{ref:u,...Hu,width:s,height:s,stroke:n,strokeWidth:i?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Wu(r)}`,l].join(" "),...d},[...e.map(([h,f])=>E.createElement(h,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=ce("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ce("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=ce("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=ce("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ce("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=ce("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=ce("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=ce("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function eh(){const[r,e]=E.useState(""),[t,n]=E.useState(""),[s,a]=E.useState(!1),[i,l]=E.useState(null);async function c(d){d.preventDefault(),a(!0),l(null);try{if(r==="eric@parakeet.io"&&t==="asdfasdf"){localStorage.setItem("currentUser",JSON.stringify({email:r,role:"manager",super_admin:!0})),window.location.href="/dashboard/manager";return}const u=localStorage.getItem("managers"),f=(u?JSON.parse(u):[]).find(m=>m.email===r&&m.password===t);if(f){localStorage.setItem("currentUser",JSON.stringify({email:f.email,fullName:f.fullName,role:"manager"})),window.location.href="/dashboard/manager";return}throw new Error("Invalid email or password")}catch(u){console.error("Auth error:",u),l(u instanceof Error?u.message:"Authentication failed")}finally{a(!1)}}return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 text-center mb-8",children:"Management Dashboard"}),i&&o.jsxs("div",{className:"mb-4 p-4 text-sm text-red-700 bg-red-100 rounded-lg flex items-center gap-2",children:[o.jsx(et,{className:"w-5 h-5 flex-shrink-0"}),o.jsx("p",{children:i})]}),o.jsxs("form",{onSubmit:c,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),o.jsx("input",{id:"email",type:"email",required:!0,value:r,onChange:d=>e(d.target.value),pattern:"[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsx("input",{id:"password",type:"password",required:!0,minLength:6,value:t,onChange:d=>n(d.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center gap-2 rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:s?o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(Vu,{className:"w-4 h-4"}),"Sign in"]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-sm text-gray-600",children:"Need access? Contact your administrator"})})]})})}const th="modulepreload",rh=function(r){return"/sdr-dashboard/"+r},qi={},pr=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=rh(c),c in qi)return;qi[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":th,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},nh=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>pr(async()=>{const{default:n}=await Promise.resolve().then(()=>Nr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Va extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class sh extends Va{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ah extends Va{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ih extends Va{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ga;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ga||(ga={}));var oh=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};class lh{constructor(e,{headers:t={},customFetch:n,region:s=ga.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=nh(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return oh(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:i}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(v=>{throw new sh(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new ah(u);if(!u.ok)throw new ih(u);let f=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield u.json():f==="application/octet-stream"?m=yield u.blob():f==="text/event-stream"?m=u:f==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var He={},Ka={},vs={},pn={},ys={},bs={},ch=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vr=ch();const dh=vr.fetch,tc=vr.fetch.bind(vr),rc=vr.Headers,uh=vr.Request,hh=vr.Response,Nr=Object.freeze(Object.defineProperty({__proto__:null,Headers:rc,Request:uh,Response:hh,default:tc,fetch:dh},Symbol.toStringTag,{value:"Module"})),fh=Du(Nr);var ws={};Object.defineProperty(ws,"__esModule",{value:!0});let mh=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ws.default=mh;var nc=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bs,"__esModule",{value:!0});const gh=nc(fh),ph=nc(ws);let vh=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=gh.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c;let d=null,u=null,h=null,f=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),p=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&p&&p.length>1&&(h=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await a.text();try{d=JSON.parse(g),Array.isArray(d)&&a.status===404&&(u=[],d=null,f=200,m="OK")}catch{a.status===404&&g===""?(f=204,m="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new ph.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(s=s.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}};bs.default=vh;var yh=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0});const bh=yh(bs);let wh=class extends bh.default{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ys.default=wh;var xh=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pn,"__esModule",{value:!0});const _h=xh(ys);let jh=class extends _h.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};pn.default=jh;var Sh=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});const Fr=Sh(pn);let Nh=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Fr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Fr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Fr.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vs.default=Nh;var xs={},_s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.version=void 0;_s.version="0.0.0-automated";Object.defineProperty(xs,"__esModule",{value:!0});xs.DEFAULT_HEADERS=void 0;const Eh=_s;xs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Eh.version}`};var sc=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ka,"__esModule",{value:!0});const Th=sc(vs),kh=sc(pn),$h=xs;let Dh=class ac{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},$h.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Th.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ac(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:a}={}){let i;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(i=n?"HEAD":"GET",Object.entries(t).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(i="POST",c=t);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new kh.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Ka.default=Dh;var Er=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(He,"__esModule",{value:!0});He.PostgrestError=He.PostgrestBuilder=He.PostgrestTransformBuilder=He.PostgrestFilterBuilder=He.PostgrestQueryBuilder=He.PostgrestClient=void 0;const ic=Er(Ka);He.PostgrestClient=ic.default;const oc=Er(vs);He.PostgrestQueryBuilder=oc.default;const lc=Er(pn);He.PostgrestFilterBuilder=lc.default;const cc=Er(ys);He.PostgrestTransformBuilder=cc.default;const dc=Er(bs);He.PostgrestBuilder=dc.default;const uc=Er(ws);He.PostgrestError=uc.default;var Oh=He.default={PostgrestClient:ic.default,PostgrestQueryBuilder:oc.default,PostgrestFilterBuilder:lc.default,PostgrestTransformBuilder:cc.default,PostgrestBuilder:dc.default,PostgrestError:uc.default};const{PostgrestClient:Mh,PostgrestQueryBuilder:NC,PostgrestFilterBuilder:EC,PostgrestTransformBuilder:TC,PostgrestBuilder:kC,PostgrestError:$C}=Oh,Ch="2.11.2",Ph={"X-Client-Info":`realtime-js/${Ch}`},Ah="1.0.0",hc=1e4,Rh=1e3;var gr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(gr||(gr={}));var ze;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ze||(ze={}));var Ze;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Ze||(Ze={}));var pa;(function(r){r.websocket="websocket"})(pa||(pa={}));var zt;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(zt||(zt={}));class Ih{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+a));i=i+a;const d=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class fc{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(me||(me={}));const zi=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,i)=>(a[i]=Lh(i,r,e,s),a),{})},Lh=(r,e,t,n)=>{const s=e.find(l=>l.name===r),a=s==null?void 0:s.type,i=t[r];return a&&!n.includes(a)?mc(a,i):va(i)},mc=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Wh(e,t)}switch(r){case me.bool:return Fh(e);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return Uh(e);case me.json:case me.jsonb:return Hh(e);case me.timestamp:return Bh(e);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return va(e);default:return va(e)}},va=r=>r,Fh=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Uh=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Hh=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Wh=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let a;const i=r.slice(1,t);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>mc(e,l))}return r},Bh=r=>typeof r=="string"?r.replace(" ","T"):r,gc=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Xs{constructor(e,t,n={},s=hc){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gi;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Gi||(Gi={}));class Vr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vr.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Vr.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Vr.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const a=this.cloneDeep(e),i=this.transformState(t),l={},c={};return this.map(a,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const h=a[d];if(h){const f=u.map(p=>p.presence_ref),m=h.map(p=>p.presence_ref),v=u.filter(p=>m.indexOf(p.presence_ref)<0),g=h.filter(p=>f.indexOf(p.presence_ref)<0);v.length>0&&(l[d]=v),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,t,n,s){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(i,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yi;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Yi||(Yi={}));var Vi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Vi||(Vi={}));var pt;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(pt||(pt={}));class Xa{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Xs(this,Ze.join,this.params,this.timeout),this.rejoinTimer=new fc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ze.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Vr(this),this.broadcastEndpointURL=gc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:i,private:l}}=this.params;this._onError(u=>e==null?void 0:e(pt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(pt.CLOSED));const c={},d={broadcast:a,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(pt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let g=0;g<m;g++){const p=f[g],{filter:{event:y,schema:b,table:x,filter:w}}=p,j=u&&u[g];if(j&&j.event===y&&j.schema===b&&j.table===x&&j.filter===w)v.push(Object.assign(Object.assign({},p),{id:j.id}));else{this.unsubscribe(),e==null||e(pt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(pt.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(pt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ze.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ze.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new Xs(this,Ze.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(a),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Xs(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Ze;if(n&&[l,c,d,u].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,g,p;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((p=(g=m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===i}).map(m=>m.callback(f,n)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var v,g,p,y,b,x;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const w=m.id,j=(v=m.filter)===null||v===void 0?void 0:v.event;return w&&((g=t.ids)===null||g===void 0?void 0:g.includes(w))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const w=(b=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return w==="*"||w===((x=t==null?void 0:t.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:g,table:p,commit_timestamp:y,type:b,errors:x}=v;f=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:y,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),a={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Xa.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ze.close,{},e)}_onError(e){this._on(Ze.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=zi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=zi(e.columns,e.old_record)),t}}const qh=()=>{},zh=typeof WebSocket<"u",Gh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Yh{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Ph,this.params={},this.timeout=hc,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=qh,this.conn=null,this.sendBuffer=[],this.serializer=new Ih,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>pr(async()=>{const{default:c}=await Promise.resolve().then(()=>Nr);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${e}/${pa.websocket}`,this.httpEndpoint=gc(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,i)=>i(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new fc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(zh){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Vh(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),pr(async()=>{const{default:e}=await import("./browser-DdvoZJSt.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ah}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case gr.connecting:return zt.Connecting;case gr.open:return zt.Open;case gr.closing:return zt.Closing;default:return zt.Closed}}isConnected(){return this.connectionState()===zt.Open}channel(e,t={config:{}}){const n=new Xa(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${n} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(Ze.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Rh,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:a,ref:i}=t;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,a),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,a,i)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ze.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([Gh],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class Vh{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=gr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Ja extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Oe(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Kh extends Ja{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ya extends Ja{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Xh=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};const pc=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>pr(async()=>{const{default:n}=await Promise.resolve().then(()=>Nr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Jh=()=>Xh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pr(()=>Promise.resolve().then(()=>Nr),void 0)).Response:Response}),ba=r=>{if(Array.isArray(r))return r.map(t=>ba(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=ba(n)}),e};var sr=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};const Js=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Qh=(r,e,t)=>sr(void 0,void 0,void 0,function*(){const n=yield Jh();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{e(new Kh(Js(s),r.status||500))}).catch(s=>{e(new ya(Js(s),s))}):e(new ya(Js(r),r))}),Zh=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),t))};function vn(r,e,t,n,s,a){return sr(this,void 0,void 0,function*(){return new Promise((i,l)=>{r(t,Zh(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Qh(c,l,n))})})}function ts(r,e,t,n){return sr(this,void 0,void 0,function*(){return vn(r,"GET",e,t,n)})}function $t(r,e,t,n,s){return sr(this,void 0,void 0,function*(){return vn(r,"POST",e,n,s,t)})}function ef(r,e,t,n,s){return sr(this,void 0,void 0,function*(){return vn(r,"PUT",e,n,s,t)})}function tf(r,e,t,n){return sr(this,void 0,void 0,function*(){return vn(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function vc(r,e,t,n,s){return sr(this,void 0,void 0,function*(){return vn(r,"DELETE",e,n,s,t)})}var Ue=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};const rf={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ki={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nf{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=pc(s)}uploadOrUpdate(e,t,n,s){return Ue(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Ki),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}upload(e,t,n){return Ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return Ue(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:Ki.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(Oe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Ue(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=yield $t(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Ja("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ue(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}copy(e,t,n){return Ue(this,void 0,void 0,function*(){try{return{data:{path:(yield $t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return Ue(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield $t(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return Ue(this,void 0,void 0,function*(){try{const s=yield $t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}download(e,t){return Ue(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ts(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Oe(l))return{data:null,error:l};throw l}})}info(e){return Ue(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield ts(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ba(n),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}exists(e){return Ue(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield tf(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Oe(n)&&n instanceof ya){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return Ue(this,void 0,void 0,function*(){try{return{data:yield vc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ue(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},rf),t),{prefix:e||""});return{data:yield $t(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const sf="2.7.1",af={"X-Client-Info":`storage-js/${sf}`};var dr=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};class of{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},af),t),this.fetch=pc(n)}listBuckets(){return dr(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Oe(e))return{data:null,error:e};throw e}})}getBucket(e){return dr(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return dr(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return dr(this,void 0,void 0,function*(){try{return{data:yield ef(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return dr(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return dr(this,void 0,void 0,function*(){try{return{data:yield vc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}}class lf extends of{constructor(e,t={},n){super(e,t,n)}from(e){return new nf(this.url,this.headers,e,this.fetch)}}const cf="2.48.1";let Gr="";typeof Deno<"u"?Gr="deno":typeof document<"u"?Gr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gr="react-native":Gr="node";const df={"X-Client-Info":`supabase-js-${Gr}/${cf}`},uf={headers:df},hf={schema:"public"},ff={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mf={};var gf=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};const pf=r=>{let e;return r?e=r:typeof fetch>"u"?e=tc:e=fetch,(...t)=>e(...t)},vf=()=>typeof Headers>"u"?rc:Headers,yf=(r,e,t)=>{const n=pf(t),s=vf();return(a,i)=>gf(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let d=new s(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},i),{headers:d}))})};var bf=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};function wf(r){return r.replace(/\/$/,"")}function xf(r,e){const{db:t,auth:n,realtime:s,global:a}=r,{db:i,auth:l,realtime:c,global:d}=e,u={db:Object.assign(Object.assign({},i),t),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},d),a),accessToken:()=>bf(this,void 0,void 0,function*(){return""})};return r.accessToken?u.accessToken=r.accessToken:delete u.accessToken,u}const yc="2.67.3",_f="http://localhost:9999",jf="supabase.auth.token",Sf={"X-Client-Info":`gotrue-js/${yc}`},Xi=10,wa="X-Supabase-Api-Version",bc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Nf(r){return Math.round(Date.now()/1e3)+r}function Ef(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const st=()=>typeof window<"u"&&typeof document<"u",Ht={tested:!1,writable:!1},Kr=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ht.tested)return Ht.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Ht.tested=!0,Ht.writable=!0}catch{Ht.tested=!0,Ht.writable=!1}return Ht.writable};function Tf(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const wc=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>pr(async()=>{const{default:n}=await Promise.resolve().then(()=>Nr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},kf=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",xc=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Rn=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},In=async(r,e)=>{await r.removeItem(e)};function $f(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,s,a,i,l,c,d,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)i=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),d=e.indexOf(r.charAt(u++)),n=i<<2|l>>4,s=(l&15)<<4|c>>2,a=(c&3)<<6|d,t=t+String.fromCharCode(n),c!=64&&s!=0&&(t=t+String.fromCharCode(s)),d!=64&&a!=0&&(t=t+String.fromCharCode(a));return t}class js{constructor(){this.promise=new js.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}js.promiseConstructor=Promise;function Ji(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse($f(n))}async function Df(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Of(r,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await r(a);if(!e(a,null,i)){n(i);return}}catch(i){if(!e(a,i)){s(i);return}}})()})}function Mf(r){return("0"+r.toString(16)).substr(-2)}function Cf(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let a=0;a<56;a++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Mf).join("")}async function Pf(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}function Af(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rf(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Pf(r);return Af(t)}async function ur(r,e,t=!1){const n=Cf();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await xc(r,`${e}-code-verifier`,s);const a=await Rf(n);return[a,n===a?"plain":"s256"]}const If=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Lf(r){const e=r.headers.get(wa);if(!e||!e.match(If))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Qa extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ae(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Ff extends Qa{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Uf(r){return ae(r)&&r.name==="AuthApiError"}class _c extends Qa{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ar extends Qa{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Tt extends ar{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hf(r){return ae(r)&&r.name==="AuthSessionMissingError"}class Qs extends ar{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ln extends ar{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fn extends ar{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wf(r){return ae(r)&&r.name==="AuthImplicitGrantRedirectError"}class Qi extends ar{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xa extends ar{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Zs(r){return ae(r)&&r.name==="AuthRetryableFetchError"}class Zi extends ar{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var Bf=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const Wt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),qf=[502,503,504];async function eo(r){var e;if(!kf(r))throw new xa(Wt(r),0);if(qf.includes(r.status))throw new xa(Wt(r),r.status);let t;try{t=await r.json()}catch(a){throw new _c(Wt(a),a)}let n;const s=Lf(r);if(s&&s.getTime()>=bc["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Zi(Wt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Tt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Zi(Wt(t),r.status,t.weak_password.reasons);throw new Ff(Wt(t),r.status||500,n)}const zf=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function ie(r,e,t,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[wa]||(a[wa]=bc["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Gf(r,e,t+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Gf(r,e,t,n,s,a){const i=zf(e,n,s,a);let l;try{l=await r(t,Object.assign({},i))}catch(c){throw console.error(c),new xa(Wt(c),0)}if(l.ok||await eo(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await eo(c)}}function kt(r){var e;let t=null;Xf(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Nf(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function to(r){const e=kt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Dt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Yf(r){return{data:r,error:null}}function Vf(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:a}=r,i=Bf(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Kf(r){return r}function Xf(r){return r.access_token&&r.refresh_token&&r.expires_in}var Jf=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class Qf{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=wc(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Dt})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Jf(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Vf,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ae(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Dt})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Kf});if(u.error)throw u.error;const h=await u.json(),f=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(v.split(";")[1].split("=")[1]);d[`${p}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ae(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Dt})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Dt})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Dt})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ae(t))return{data:null,error:t};throw t}}}const Zf={getItem:r=>Kr()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Kr()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Kr()&&globalThis.localStorage.removeItem(r)}};function ro(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function em(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const hr={debug:!!(globalThis&&Kr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tm extends jc{}async function rm(r,e,t){hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),hr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new tm(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(hr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}em();const nm={url:_f,storageKey:jf,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Ur=30*1e3,no=3;async function so(r,e,t){return await t()}class en{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=en.nextInstanceID,en.nextInstanceID+=1,this.instanceID>0&&st()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},nm),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Qf({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=wc(s.fetch),this.lock=s.lock||so,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:st()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=rm:this.lock=so,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Kr()?this.storage=Zf:(this.memoryStorage={},this.storage=ro(this.memoryStorage)):(this.memoryStorage={},this.storage=ro(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yc}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Tf(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),st()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Wf(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ae(t)?{error:t}:{error:new _c("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:kt}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ae(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,s;try{let a;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await ur(this.storage,this.storageKey)),a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:kt})}else if("phone"in e){const{phone:u,password:h,options:f}=e;a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:kt})}else throw new Ln("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ae(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:i,options:l}=e;t=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:to})}else if("phone"in e){const{phone:a,password:i,options:l}=e;t=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:to})}else throw new Ln("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Qs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Rn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:a,error:i}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:kt});if(await In(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Qs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(ae(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:a,nonce:i}=e,l=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:kt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Qs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,a,i;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ur(this.storage,this.storageKey));const{error:h}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ln("You must provide either an email or phone number.")}catch(l){if(ae(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,n;try{let s,a;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:kt});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await ur(this.storage,this.storageKey)),await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:Yf})}catch(a){if(ae(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Tt;const{error:s}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ae(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:i}=await ie(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:i,error:l}=await ie(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Ln("You must provide either an email or phone number and a type")}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Rn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Dt}):await this._useSession(async t=>{var n,s,a;const{data:i,error:l}=t;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tt}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Dt})})}catch(t){if(ae(t))return Hf(t)&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Tt;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ur(this.storage,this.storageKey));const{data:d,error:u}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Dt});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Ji(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tt;const t=Date.now()/1e3;let n=t,s=!0,a=null;const i=Ji(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(ae(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:i,error:l}=t;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Tt;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!st())throw new Fn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Qi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fn("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qi("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=e;if(!a||!l||!i||!d)throw new Fn("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=Ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:g,error:p}=await this._getUser(a);if(p)throw p;const y={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:f,refresh_token:i,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(ae(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Rn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return{error:a};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Uf(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Ef(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:a},error:i}=t;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ur(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(ae(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async a=>{var i,l,c,d,u;const{data:h,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return st()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ae(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:a,error:i}=t;if(i)throw i;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await Of(async s=>(s>0&&await Df(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kt})),(s,a)=>{const i=200*Math.pow(2,s);return a&&Zs(a)&&Date.now()+i-n<Ur})}catch(n){if(this._debug(t,"error",n),ae(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),st()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Rn(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),a=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<s+Xi;if(this._debug(t,`session has${a?"":" not"} expired with margin of ${Xi}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Zs(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new js;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new Tt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),ae(a)){const i={session:null,error:a};return Zs(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await xc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await In(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ur);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ur}ms, refresh threshold is ${no} ticks`),s<=no&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await ur(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;return a?{data:null,error:a}:await ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:a,error:i}=t;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return{data:null,error:a};const{data:i,error:l}=await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(t){if(ae(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;return a?{data:null,error:a}:await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ae(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}en.nextInstanceID=0;const sm=en;class am extends sm{constructor(e){super(e)}}var im=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};class om{constructor(e,t,n){var s,a,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=wf(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:hf,realtime:mf,auth:Object.assign(Object.assign({},ff),{storageKey:c}),global:uf},u=xf(n??{},d);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=yf(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Mh(`${l}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new lh(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new lf(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return im(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:a,flowType:i,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new am({url:this.authUrl,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:i,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Yh(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lm=(r,e,t)=>new om(r,e,t),cm="https://jadpfguancqrtkyzziei.supabase.co/",ao="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImphZHBmZ3VhbmNxcnRreXp6aWVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk5OTM2MjUsImV4cCI6MjA1NTU2OTYyNX0.GMTZ80KGcR7B1Cr9UPHbmUFsSLqgcbAWBS_s6i7GMv4";async function _a(r,e=3,t=1e3,n){let s=null;for(let a=0;a<e;a++)try{return await r()}catch(i){if(s=i instanceof Error?i:new Error(String(i)),a===e-1)throw s;n&&n(a+1,s);const l=t*Math.pow(2,a);await new Promise(c=>setTimeout(c,l))}throw s}const dm=async(r,e={})=>{const t=new AbortController,n=setTimeout(()=>t.abort(),3e4);try{const s=await fetch(r,{...e,signal:t.signal,headers:{...e.headers,"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s}catch(s){if(s instanceof Error){if(s.name==="AbortError")throw new Error("Request timeout");if(!navigator.onLine)throw new Error("No internet connection")}throw s}finally{clearTimeout(n)}},re=lm(cm,ao,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"supabase.auth.token",storage:window.localStorage},global:{headers:{apikey:ao}},fetch:(r,e)=>_a(()=>dm(r,e),3,1e3,(t,n)=>{console.warn(`Retrying failed request (attempt ${t}/3):`,n.message)})});if(typeof window<"u"){let r;window.addEventListener("online",()=>{console.log("Connection restored"),re.removeAllChannels(),clearTimeout(r),r=window.setTimeout(()=>{re.channel("system").subscribe()},1e3)}),window.addEventListener("offline",()=>{console.warn("Connection lost"),clearTimeout(r)})}function Sc(r){const[e,t]=E.useState([]),[n,s]=E.useState(!0),[a,i]=E.useState(null),[l,c]=E.useState(0),[d,u]=E.useState(0),[h,f]=E.useState(0);async function m(){try{if(!r){t([]),s(!1);return}const v=new Date,g=new Date(v.getFullYear(),v.getMonth(),1),p=new Date(v.getFullYear(),v.getMonth()+1,0),{data:y,error:b}=await _a(()=>re.from("assignments").select(`
            monthly_set_target,
            monthly_hold_target,
            clients (
              id,
              name,
              monthly_set_target,
              monthly_hold_target
            )
          `).eq("sdr_id",r).eq("month",g.toISOString().split("T")[0]));if(b)throw b;const x=(y==null?void 0:y.reduce((A,I)=>A+(I.monthly_set_target||0),0))||0;c(x);const{data:w,error:j}=await _a(()=>re.from("meetings").select("*, clients(name)").eq("sdr_id",r).gte("scheduled_date",g.toISOString()).lte("scheduled_date",p.toISOString()));if(j)throw j;const T=(y||[]).map(A=>{const I=(w==null?void 0:w.filter(J=>J.client_id===A.clients.id))||[],Y=I.filter(J=>J.status==="pending"&&!J.no_show&&!J.held_at).length,Z=I.filter(J=>J.status==="confirmed"&&!J.no_show&&!J.held_at).length,X=I.filter(J=>J.held_at!==null&&J.status==="confirmed").length,te=I.filter(J=>!J.no_show).length;return{id:A.clients.id,name:A.clients.name,monthly_set_target:A.monthly_set_target||0,monthly_hold_target:A.monthly_hold_target||0,confirmedMeetings:Z,pendingMeetings:Y,heldMeetings:X,todaysMeetings:I.filter(J=>new Date(J.scheduled_date).toDateString()===new Date().toDateString()),totalMeetingsSet:te}}),_=w||[],N=_.filter(A=>A.status==="confirmed"&&!A.no_show).length,O=_.filter(A=>A.status==="pending"&&!A.no_show).length,P=_.filter(A=>A.held_at!==null&&A.status==="confirmed").length,C=_.filter(A=>A.no_show).length;u(N),f(O),t(T),u(N),f(O),t(T)}catch(v){console.error("Client data fetch error:",v),i(v instanceof Error?v.message:"Failed to fetch client data"),t([]),c(0),u(0),f(0)}finally{s(!1)}}return E.useEffect(()=>{m();const v=re.channel("client-changes").on("postgres_changes",{event:"*",schema:"public",table:"assignments"},()=>m()).on("postgres_changes",{event:"*",schema:"public",table:"meetings"},()=>m()).subscribe();return()=>{re.removeChannel(v)}},[r]),{clients:e,loading:n,error:a,fetchClients:m,totalMeetingGoal:l,totalBookedMeetings:d,totalPendingMeetings:h}}function Ss(r){const[e,t]=E.useState([]),[n,s]=E.useState(!0),[a,i]=E.useState(null);async function l(){try{let v=re.from("meetings").select(`
          id,
          client_id,
          sdr_id,
          scheduled_date,
          status,
          no_show,
          held_at,
          contact_full_name,
          contact_email,
          contact_phone
        `).order("scheduled_date",{ascending:!0});r&&(v=v.eq("sdr_id",r));const{data:g,error:p}=await v;if(p)throw p;const b=new Date().toISOString().split("T")[0],x=await Promise.all((g||[]).map(async w=>{if(w.scheduled_date.split("T")[0]<b&&w.status==="pending"&&!w.no_show){const{error:T}=await re.from("meetings").update({no_show:!0,updated_at:new Date().toISOString()}).eq("id",w.id);return T?(console.error("Failed to update past meeting:",T),w):{...w,no_show:!0,updated_at:new Date().toISOString()}}return w}));t(x),i(null)}catch(v){console.error("Meetings fetch error:",v),i(v instanceof Error?v.message:"Failed to fetch meetings"),t([])}finally{s(!1)}}E.useEffect(()=>{l();const v=re.channel("meetings-changes").on("postgres_changes",{event:"*",schema:"public",table:"meetings"},()=>{console.log("Meeting change detected"),l()}).subscribe();return()=>{re.removeChannel(v)}},[r]);async function c(v,g,p,y){try{delete y.status;const{data:b,error:x}=await re.from("meetings").insert([{client_id:v,sdr_id:p,scheduled_date:g,status:"pending",no_show:!1,held_at:null,...y}]).select("*");if(x)throw x;return await l(),b==null?void 0:b[0]}catch(b){throw console.error("Error adding meeting:",b),b}}async function d(v){try{console.log("Updating meeting:",v);const{error:g}=await re.from("meetings").update({contact_full_name:v.contact_full_name,contact_email:v.contact_email,contact_phone:v.contact_phone,scheduled_date:v.scheduled_date,status:v.status,no_show:v.no_show,updated_at:new Date().toISOString()}).eq("id",v.id);if(g)throw g;await l()}catch(g){throw console.error("Update meeting error:",g),new Error(g instanceof Error?g.message:"Failed to update meeting")}}async function u(v,g){try{const p={updated_at:new Date().toISOString()};if(g)p.held_at=g;else{p.held_at=null;const{data:b}=await re.from("meetings").select("scheduled_date").eq("id",v).single();if(b){const x=b.scheduled_date.split("T")[0],w=new Date().toISOString().split("T")[0];x<w&&(p.no_show=!0)}}const{error:y}=await re.from("meetings").update(p).eq("id",v);if(y)throw y;await l()}catch(p){throw console.error("Update meeting held date error:",p),new Error(p instanceof Error?p.message:"Failed to update meeting held date")}}async function h(v,g){try{const p={updated_at:new Date().toISOString()};g?(p.confirmed_at=g,p.status="confirmed"):(p.confirmed_at=null,p.status="pending");const{error:y}=await re.from("meetings").update(p).eq("id",v);if(y)throw y;await l()}catch(p){throw console.error("Update meeting confirmed date error:",p),new Error(p instanceof Error?p.message:"Failed to update meeting confirmed date")}}async function f(v){try{const{error:g}=await re.from("meetings").delete().eq("id",v);if(g)throw g;await l()}catch(g){throw console.error("Delete meeting error:",g),new Error(g instanceof Error?g.message:"Failed to delete meeting")}}const m=e.filter(v=>v.status==="pending"&&!v.no_show).length;return{meetings:e,loading:n,error:a,addMeeting:c,updateMeeting:d,updateMeetingHeldDate:u,updateMeetingConfirmedDate:h,deleteMeeting:f,fetchMeetings:l,pendingMeetings:m}}function um(r){if(!r||!r.includes(":"))return"12:00 AM";try{const[e,t]=r.split(":").map(Number),n=e>=12?"PM":"AM";let s=e%12;return s===0&&(s=12),`${s}:${t.toString().padStart(2,"0")} ${n}`}catch(e){return console.error("Error formatting time:",e),"12:00 AM"}}function hm(r){if(!r||!r.includes("T"))return"00:00";try{return r.split("T")[1].substring(0,5)}catch(e){return console.error("Error extracting time:",e),"00:00"}}function Nc(r){const e=hm(r);return um(e)}function fm({name:r,monthly_set_target:e,monthly_hold_target:t,confirmedMeetings:n,pendingMeetings:s,todaysMeetings:a,onAddMeeting:i,onConfirmMeeting:l,onEditMeeting:c,goalTiers:d=[]}){const u=t>0?n/t*100:0,h=new Date,f=new Date(h.getFullYear(),h.getMonth()+1,0).getDate(),v=h.getDate()/f*100,g=()=>u>=v?"text-green-600":u>=v-10?"text-yellow-600":"text-red-600",p=y=>{const b=Math.ceil(y/100*t),x=Math.max(0,b-n),w=n/b*100;return{targetMeetings:b,meetingsNeeded:x,tierProgress:w}};return o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),o.jsxs("button",{onClick:()=>{console.log("Add Meeting button clicked"),i()},className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[o.jsx(Ga,{className:"w-4 h-4"}),"Add Meeting"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"w-5 h-5 text-gray-400"}),o.jsxs("span",{className:"text-sm text-gray-600",children:["Set: ",n+s,"/",e," | Held: ",n,"/",t]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Mt,{className:"w-5 h-5 text-gray-400"}),o.jsxs("span",{className:"text-sm text-gray-600",children:["Pending: ",s," meetings"]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"font-medium",children:"Held Progress"}),o.jsxs("span",{className:`font-semibold ${g()}`,children:[u.toFixed(1),"%"]})]}),o.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-600 rounded-full transition-all duration-300",style:{width:`${u}%`}})}),o.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[o.jsx("span",{children:"0%"}),o.jsxs("span",{children:["Month Progress: ",v.toFixed(1),"%"]}),o.jsx("span",{children:"100%"})]})]}),d.length>0&&o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Goal Tiers Progress"}),d.sort((y,b)=>b.percentage-y.percentage).map((y,b)=>{const{targetMeetings:x,meetingsNeeded:w,tierProgress:j}=p(y.percentage),T=n>=x;return o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-xs",children:[o.jsxs("span",{className:`font-medium ${T?"text-green-600":"text-gray-600"}`,children:[y.percentage,"% (",x," meetings)"]}),o.jsx("span",{className:`${T?"text-green-600":"text-gray-600"}`,children:T?"Achieved!":`${w} more needed`})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all duration-300 ${T?"bg-green-500":"bg-indigo-600"}`,style:{width:`${Math.min(100,j)}%`}})})]},b)})]}),a.length>0&&o.jsxs("div",{className:"mt-4 border-t pt-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Today's Meetings"}),o.jsx("div",{className:"space-y-3",children:a.map(y=>{const b=Nc(y.scheduled_date);return o.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[b," EST"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[y.status==="pending"?o.jsxs("button",{onClick:()=>l(y.id),className:"inline-flex items-center gap-1 px-2 py-1 text-sm text-green-700 hover:text-green-800 focus:outline-none",children:[o.jsx(yt,{className:"w-4 h-4"}),"Confirm"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-green-600",children:[o.jsx(yt,{className:"w-4 h-4"}),"Confirmed"]}),c&&o.jsxs("button",{onClick:()=>c(y.id),className:"inline-flex items-center gap-1 px-2 py-1 text-sm text-indigo-700 hover:text-indigo-800 focus:outline-none",title:"Edit meeting details",children:[o.jsx(Ql,{className:"w-4 h-4"}),"Edit"]})]})]}),y.contact_full_name&&o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ec,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:y.contact_full_name})]}),y.contact_email&&o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o.jsx(za,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"text-xs",children:y.contact_email})]}),y.contact_phone&&o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o.jsx(Jl,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"text-xs",children:y.contact_phone})]})]})]},y.id)})})]})]})]})}function mm({value:r,onChange:e,className:t=""}){const[n,s]=E.useState(0),[a,i]=E.useState(0),[l,c]=E.useState("AM");E.useEffect(()=>{if(r)try{const[m,v]=r.split(":");let g=parseInt(m,10);const p=parseInt(v,10);let y="AM";g>=12&&(y="PM",g>12&&(g-=12)),g===0&&(g=12),s(g),i(p),c(y)}catch{s(9),i(0),c("AM")}},[r]);const d=(m,v,g)=>{let p=m;g==="AM"&&m===12?p=0:g==="PM"&&m<12&&(p=m+12);const y=`${p.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`;e(y)},u=m=>{const v=parseInt(m.target.value,10);s(v),d(v,a,l)},h=m=>{const v=parseInt(m.target.value,10);i(v),d(n,v,l)},f=m=>{const v=m.target.value;c(v),d(n,a,v)};return o.jsxs("div",{className:`flex items-center space-x-2 ${t}`,children:[o.jsx("select",{value:n,onChange:u,className:"rounded-md border border-gray-300 px-2 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(m=>o.jsx("option",{value:m,children:m},m))}),o.jsx("span",{className:"text-gray-500",children:":"}),o.jsx("select",{value:a,onChange:h,className:"rounded-md border border-gray-300 px-2 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:Array.from({length:12},(m,v)=>v*5).map(m=>o.jsx("option",{value:m,children:m.toString().padStart(2,"0")},m))}),o.jsxs("select",{value:l,onChange:f,className:"rounded-md border border-gray-300 px-2 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:[o.jsx("option",{value:"AM",children:"AM"}),o.jsx("option",{value:"PM",children:"PM"})]})]})}function yn({meeting:r,onDelete:e,onSave:t,onEdit:n,onCancel:s,editable:a=!1,editingMeetingId:i=null,onUpdateHeldDate:l,onUpdateConfirmedDate:c,showDateControls:d=!1}){var O,P;const u=i===r.id,[h,f]=E.useState({contact_full_name:r.contact_full_name||"",contact_email:r.contact_email||"",contact_phone:r.contact_phone||"",scheduled_date:r.scheduled_date.split("T")[0],scheduled_time:((O=r.scheduled_date.split("T")[1])==null?void 0:O.substring(0,5))||"09:00",status:r.status,no_show:r.no_show}),[m,v]=E.useState(!1),g=Nc(r.scheduled_date),p=new Date(r.scheduled_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),y=new Date().toISOString().split("T")[0],b=new Date;b.setDate(b.getDate()+1);const x=b.toISOString().split("T")[0],w=r.scheduled_date.split("T")[0],j=new Date(w)>new Date(new Date().setDate(new Date().getDate()+3)),T=w===x,_=r.status==="pending"&&T,N=()=>{if(console.log("Attempting to save meeting with data:",h),!t){console.error("No onSave handler provided");return}const C=`${h.scheduled_date}T${h.scheduled_time}:00`,A={...r,contact_full_name:h.contact_full_name,contact_email:h.contact_email,contact_phone:h.contact_phone,scheduled_date:C,status:h.status||"pending",no_show:h.no_show};console.log("Calling onSave with:",A),t(A)};return o.jsx("div",{className:"max-h-[80vh] overflow-y-auto",children:o.jsx("div",{className:`rounded-lg p-4 ${_?"bg-amber-50 border-2 border-amber-300 animate-pulse":"bg-gray-50"}`,children:o.jsx("div",{className:"flex justify-between items-start",children:o.jsxs("div",{className:"space-y-1 w-full",children:[_&&o.jsxs("div",{className:"flex items-center gap-2 text-amber-600 mb-2",children:[o.jsx(et,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium",children:"Needs confirmation for tomorrow!"})]}),o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:r.client_name||((P=r.clients)==null?void 0:P.name)||r.contact_full_name||"Untitled Meeting"}),r.sdr_name&&o.jsxs("p",{className:"text-sm text-gray-500",children:["Booked by ",r.sdr_name]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[u?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:N,className:"p-1 text-green-600 hover:text-green-700 focus:outline-none",title:"Save changes",children:o.jsx(Qu,{className:"w-4 h-4"})}),o.jsx("button",{onClick:s,className:"p-1 text-gray-600 hover:text-gray-700 focus:outline-none",title:"Cancel",children:o.jsx(ma,{className:"w-4 h-4"})})]}):o.jsx("button",{onClick:()=>{console.log("Edit button clicked for meeting:",r.id),n==null||n(r)},className:"p-1 text-gray-600 hover:text-gray-700 focus:outline-none",title:"Edit meeting",children:o.jsx(Xu,{className:"w-4 h-4"})}),a&&e&&o.jsx("button",{onClick:()=>e(r.id),className:"p-1 text-red-600 hover:text-red-700 focus:outline-none",title:"Delete meeting",children:o.jsx(Zr,{className:"w-4 h-4"})})]})]}),u?o.jsxs("div",{className:"space-y-3 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),o.jsx("input",{type:"text",value:h.contact_full_name,onChange:C=>f(A=>({...A,contact_full_name:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),o.jsx("input",{type:"email",value:h.contact_email,onChange:C=>f(A=>({...A,contact_email:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),o.jsx("input",{type:"tel",value:h.contact_phone,onChange:C=>f(A=>({...A,contact_phone:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Date"}),o.jsx("input",{type:"date",value:h.scheduled_date,onChange:C=>f(A=>({...A,scheduled_date:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Time"}),o.jsx(mm,{value:h.scheduled_time,onChange:C=>f(A=>({...A,scheduled_time:C}))})]})]}),o.jsxs("div",{className:"space-y-3 pt-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:`confirmed-${r.id}`,checked:h.status==="confirmed",onChange:C=>f(A=>({...A,status:C.target.checked?"confirmed":"pending"})),className:"rounded border-gray-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),o.jsx("label",{htmlFor:`confirmed-${r.id}`,className:"text-sm text-gray-700",children:"Meeting Confirmed"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:`no-show-${r.id}`,checked:h.no_show,onChange:C=>f(A=>({...A,no_show:C.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),o.jsx("label",{htmlFor:`no-show-${r.id}`,className:"text-sm text-gray-700",children:"No Show"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx(Mt,{className:"w-4 h-4"}),o.jsxs("span",{children:[p," ",g," EST"]})]}),r.contact_full_name&&o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[o.jsx(ec,{className:"w-4 h-4"}),o.jsx("span",{children:r.contact_full_name})]}),r.contact_email&&o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[o.jsx(za,{className:"w-4 h-4"}),o.jsx("span",{children:r.contact_email})]}),r.contact_phone&&o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[o.jsx(Jl,{className:"w-4 h-4"}),o.jsx("span",{children:r.contact_phone})]}),d&&o.jsxs("div",{className:"space-y-2 mt-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm text-gray-700 w-28",children:"Meeting Held:"}),o.jsx("input",{type:"date",value:r.held_at?r.held_at.split("T")[0]:"",onChange:C=>{const A=C.target.value;l==null||l(r.id,A||null)},max:y,className:"form-input px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 cursor-pointer"})]}),j&&r.status==="pending"&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm text-gray-700 w-28",children:"Meeting Confirmed:"}),o.jsx("input",{type:"date",value:r.confirmed_at?r.confirmed_at.split("T")[0]:"",onChange:C=>{const A=C.target.value;c==null||c(r.id,A||null)},min:y,max:w,className:"form-input px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 cursor-pointer"})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.no_show&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700",children:[o.jsx(ma,{className:"w-3 h-3"}),"No Show"]}),r.held_at&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:[o.jsx(yt,{className:"w-3 h-3"}),"Meeting Held"]}),!r.held_at&&r.status==="confirmed"&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700",children:[o.jsx(yt,{className:"w-3 h-3"}),"Confirmed"]})]}),o.jsxs("button",{onClick:()=>v(!m),className:"mt-2 text-sm text-indigo-600 hover:underline flex items-center gap-1",children:[m?"Hide Details":"Show Details",m?o.jsx(qu,{className:"w-4 h-4"}):o.jsx(Vl,{className:"w-4 h-4"})]}),m&&o.jsxs("div",{className:"mt-2 space-y-2 text-sm text-gray-600",children:[r.title&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Title:"})," ",r.title]}),r.company&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Company:"})," ",r.company]}),r.linkedin_url&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"LinkedIn:"})," ",o.jsx("a",{href:r.linkedin_url,className:"text-indigo-600 underline",target:"_blank",rel:"noopener noreferrer",children:r.linkedin_url})]}),r.notes&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Notes:"})," ",r.notes]})]})]})]})})})})}function gm({meetings:r,title:e,onDelete:t,onUpdateHeldDate:n,onUpdateConfirmedDate:s,showMeetingStatus:a=!1,editable:i=!1,editingMeetingId:l=null,onEdit:c,onSave:d,onCancel:u}){return o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),r.length===0?o.jsx("p",{className:"text-gray-500 text-sm",children:"No meetings to display"}):o.jsx("div",{className:"space-y-4",children:r.map(h=>o.jsx(yn,{meeting:h,onDelete:t,onUpdateHeldDate:n,onUpdateConfirmedDate:s,showDateControls:a,editable:i,editingMeetingId:l,onEdit:c,onSave:d,onCancel:u},h.id))})]})}function pm({clients:r,monthProgress:e,totalMeetingGoal:t,totalHeldMeetings:n,totalSetTarget:s,totalHeldTarget:a,totalMeetingsSet:i,totalPendingMeetings:l,totalNoShowMeetings:c}){const d=s>0?i/s*100:0,u=d>=e;return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:"Monthly Set Target"})}),o.jsxs("div",{className:"space-y-1 bg-indigo-50 p-3 rounded-md",children:[o.jsxs("div",{className:"flex items-baseline space-x-2",children:[o.jsx("span",{className:"text-3xl font-bold text-indigo-700",children:s.toLocaleString()}),o.jsx("span",{className:"text-sm text-gray-600",children:"set goal"})]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[(e??0).toFixed(1),"% of month completed"]}),o.jsx("br",{})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:["Monthly Held Target ",o.jsx(Ct,{className:"w-5 h-5 text-indigo-500"})]})}),o.jsxs("div",{className:"space-y-1 bg-indigo-50 p-3 rounded-md",children:[o.jsxs("div",{className:"flex items-baseline space-x-2",children:[o.jsx("span",{className:"text-3xl font-bold text-indigo-700",children:a.toLocaleString()}),o.jsx("span",{className:"text-sm text-gray-600",children:"held goal"})]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[(e??0).toFixed(1),"% of month completed"]}),o.jsx("br",{})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center gap-2 group relative",children:o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-1",children:["Meetings Set ",o.jsx(An,{className:"w-4 h-4 text-gray-400"}),o.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-gray-900 text-white text-sm rounded-lg p-3 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:[o.jsx("p",{className:"mb-2",children:"Meetings successfully scheduled this month:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Includes both confirmed and upcoming meetings"}),o.jsx("li",{children:"Tracked against your monthly set target"})]})]})]})}),o.jsx(Mt,{className:"w-6 h-6 text-green-500"})]}),o.jsxs("div",{className:"space-y-1 bg-green-50 p-3 rounded-md",children:[o.jsxs("div",{className:"flex items-baseline space-x-2",children:[o.jsx("span",{className:"text-3xl font-bold text-green-700",children:i.toLocaleString()}),o.jsx("span",{className:"text-sm text-gray-600",children:"meetings set"})]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Set this month"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${u?"bg-green-600":"bg-yellow-600"}`,style:{width:`${d}%`}})}),o.jsxs("span",{className:`text-sm font-medium ${u?"text-green-600":"text-yellow-600"}`,children:[(d??0).toFixed(1),"%"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center gap-2 group relative",children:o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-1",children:["Meetings Held ",o.jsx(An,{className:"w-4 h-4 text-gray-400"}),o.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-gray-900 text-white text-sm rounded-lg p-3 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:[o.jsx("p",{className:"mb-2",children:"Successfully completed meetings this month:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Meetings marked as held"}),o.jsx("li",{children:"Excludes no-shows"})]})]})]})}),o.jsx(yt,{className:"w-6 h-6 text-green-500"})]}),o.jsxs("div",{className:"space-y-1 bg-green-50 p-3 rounded-md",children:[o.jsxs("div",{className:"flex items-baseline space-x-2",children:[o.jsx("span",{className:"text-3xl font-bold text-green-700",children:n.toLocaleString()}),o.jsx("span",{className:"text-sm text-gray-600",children:"meetings held"})]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Held this month"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${a>0&&n/a>=1?"bg-green-600":"bg-yellow-600"}`,style:{width:`${a>0?n/a*100:0}%`}})}),o.jsxs("span",{className:`text-sm font-medium ${a>0&&n/a>=1?"text-green-600":"text-yellow-600"}`,children:[a>0?(n/a*100).toFixed(1):"0.0","%"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center gap-2 group relative",children:o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-1",children:["Pending ",o.jsx(An,{className:"w-4 h-4 text-gray-400"}),o.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-gray-900 text-white text-sm rounded-lg p-3 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:[o.jsx("p",{className:"mb-2",children:"Meetings that need confirmation:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Scheduled more than 3 days in advance"}),o.jsx("li",{children:"Need to be confirmed as the date approaches"})]})]})]})}),o.jsx(es,{className:"w-6 h-6 text-yellow-500"})]}),o.jsxs("div",{className:"space-y-1 bg-yellow-50 p-3 rounded-md",children:[o.jsxs("div",{className:"flex items-baseline space-x-2",children:[o.jsx("span",{className:"text-3xl font-bold text-yellow-700",children:l.toLocaleString()}),o.jsx("span",{className:"text-sm text-gray-600",children:"pending meetings"})]}),o.jsx("p",{className:"text-sm text-gray-500 pb-1",children:"Pending confirmation"})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center gap-2 group relative",children:o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-1",children:["No Shows ",o.jsx(An,{className:"w-4 h-4 text-gray-400"}),o.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-gray-900 text-white text-sm rounded-lg p-3 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:[o.jsx("p",{className:"mb-2",children:"Meetings that were scheduled but not attended by the contact:"}),o.jsx("ul",{className:"list-disc list-inside space-y-1",children:o.jsx("li",{children:"Marked as no-show manually or automatically"})})]})]})}),o.jsx(es,{className:"w-6 h-6 text-red-500"})]}),o.jsxs("div",{className:"space-y-1 bg-red-50 p-3 rounded-md",children:[o.jsxs("div",{className:"flex items-baseline space-x-2",children:[o.jsx("span",{className:"text-3xl font-bold text-red-700",children:(c??0).toLocaleString()}),o.jsx("span",{className:"text-sm text-gray-600",children:"no-show meetings"})]}),o.jsx("p",{className:"text-sm text-gray-500 pb-1",children:"Marked as no-shows"})]})]})]})}function Te(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function be(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function Ec(r,e){const t=Te(r);return isNaN(e)?be(r,NaN):(e&&t.setDate(t.getDate()+e),t)}function vm(r,e){const t=Te(r);if(isNaN(e))return be(r,NaN);if(!e)return t;const n=t.getDate(),s=be(r,t.getTime());s.setMonth(t.getMonth()+e+1,0);const a=s.getDate();return n>=a?s:(t.setFullYear(s.getFullYear(),s.getMonth(),n),t)}const Tc=6048e5,ym=864e5,bm=6e4,wm=36e5,xm=1e3;let _m={};function Tr(){return _m}function bt(r,e){var l,c,d,u;const t=Tr(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=Te(r),a=s.getDay(),i=(a<n?7:0)+a-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function yr(r){return bt(r,{weekStartsOn:1})}function kc(r){const e=Te(r),t=e.getFullYear(),n=be(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const s=yr(n),a=be(r,0);a.setFullYear(t,0,4),a.setHours(0,0,0,0);const i=yr(a);return e.getTime()>=s.getTime()?t+1:e.getTime()>=i.getTime()?t:t-1}function io(r){const e=Te(r);return e.setHours(0,0,0,0),e}function rs(r){const e=Te(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function jm(r,e){const t=io(r),n=io(e),s=+t-rs(t),a=+n-rs(n);return Math.round((s-a)/ym)}function Sm(r){const e=kc(r),t=be(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),yr(t)}function Nm(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Em(r){if(!Nm(r)&&typeof r!="number")return!1;const e=Te(r);return!isNaN(Number(e))}function Tm(r){const e=Te(r),t=be(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const km={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$m=(r,e,t)=>{let n;const s=km[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function ea(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Dm={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Om={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mm={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cm={date:ea({formats:Dm,defaultWidth:"full"}),time:ea({formats:Om,defaultWidth:"full"}),dateTime:ea({formats:Mm,defaultWidth:"full"})},Pm={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Am=(r,e,t,n)=>Pm[r];function Hr(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const i=r.defaultFormattingWidth||r.defaultWidth,l=t!=null&&t.width?String(t.width):i;s=r.formattingValues[l]||r.formattingValues[i]}else{const i=r.defaultWidth,l=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[l]||r.values[i]}const a=r.argumentCallback?r.argumentCallback(e):e;return s[a]}}const Rm={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Im={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lm={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fm={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Um={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Hm={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wm=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Bm={ordinalNumber:Wm,era:Hr({values:Rm,defaultWidth:"wide"}),quarter:Hr({values:Im,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Hr({values:Lm,defaultWidth:"wide"}),day:Hr({values:Fm,defaultWidth:"wide"}),dayPeriod:Hr({values:Um,defaultWidth:"wide",formattingValues:Hm,defaultFormattingWidth:"wide"})};function Wr(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],a=e.match(s);if(!a)return null;const i=a[0],l=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(l)?zm(l,h=>h.test(i)):qm(l,h=>h.test(i));let d;d=r.valueCallback?r.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const u=e.slice(i.length);return{value:d,rest:u}}}function qm(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function zm(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Gm(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],a=e.match(r.parsePattern);if(!a)return null;let i=r.valueCallback?r.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;const l=e.slice(s.length);return{value:i,rest:l}}}const Ym=/^(\d+)(th|st|nd|rd)?/i,Vm=/\d+/i,Km={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xm={any:[/^b/i,/^(a|c)/i]},Jm={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qm={any:[/1/i,/2/i,/3/i,/4/i]},Zm={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eg={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tg={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rg={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ng={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sg={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ag={ordinalNumber:Gm({matchPattern:Ym,parsePattern:Vm,valueCallback:r=>parseInt(r,10)}),era:Wr({matchPatterns:Km,defaultMatchWidth:"wide",parsePatterns:Xm,defaultParseWidth:"any"}),quarter:Wr({matchPatterns:Jm,defaultMatchWidth:"wide",parsePatterns:Qm,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Wr({matchPatterns:Zm,defaultMatchWidth:"wide",parsePatterns:eg,defaultParseWidth:"any"}),day:Wr({matchPatterns:tg,defaultMatchWidth:"wide",parsePatterns:rg,defaultParseWidth:"any"}),dayPeriod:Wr({matchPatterns:ng,defaultMatchWidth:"any",parsePatterns:sg,defaultParseWidth:"any"})},Za={code:"en-US",formatDistance:$m,formatLong:Cm,formatRelative:Am,localize:Bm,match:ag,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ig(r){const e=Te(r);return jm(e,Tm(e))+1}function $c(r){const e=Te(r),t=+yr(e)-+Sm(e);return Math.round(t/Tc)+1}function ei(r,e){var u,h,f,m;const t=Te(r),n=t.getFullYear(),s=Tr(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,i=be(r,0);i.setFullYear(n+1,0,a),i.setHours(0,0,0,0);const l=bt(i,e),c=be(r,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const d=bt(c,e);return t.getTime()>=l.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function og(r,e){var l,c,d,u;const t=Tr(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,s=ei(r,e),a=be(r,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),bt(a,e)}function Dc(r,e){const t=Te(r),n=+bt(t,e)-+og(t,e);return Math.round(n/Tc)+1}function he(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const Et={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return he(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):he(t+1,2)},d(r,e){return he(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return he(r.getHours()%12||12,e.length)},H(r,e){return he(r.getHours(),e.length)},m(r,e){return he(r.getMinutes(),e.length)},s(r,e){return he(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return he(s,e.length)}},fr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},oo={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return Et.y(r,e)},Y:function(r,e,t,n){const s=ei(r,n),a=s>0?s:1-s;if(e==="YY"){const i=a%100;return he(i,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):he(a,e.length)},R:function(r,e){const t=kc(r);return he(t,e.length)},u:function(r,e){const t=r.getFullYear();return he(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return he(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return he(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return Et.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return he(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=Dc(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):he(s,e.length)},I:function(r,e,t){const n=$c(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):he(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Et.d(r,e)},D:function(r,e,t){const n=ig(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):he(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return he(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return he(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return he(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=fr.noon:n===0?s=fr.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=fr.evening:n>=12?s=fr.afternoon:n>=4?s=fr.morning:s=fr.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Et.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Et.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):he(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):he(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Et.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Et.s(r,e)},S:function(r,e){return Et.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return co(n);case"XXXX":case"XX":return Bt(n);case"XXXXX":case"XXX":default:return Bt(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return co(n);case"xxxx":case"xx":return Bt(n);case"xxxxx":case"xxx":default:return Bt(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+lo(n,":");case"OOOO":default:return"GMT"+Bt(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+lo(n,":");case"zzzz":default:return"GMT"+Bt(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return he(n,e.length)},T:function(r,e,t){const n=r.getTime();return he(n,e.length)}};function lo(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),a=n%60;return a===0?t+String(s):t+String(s)+e+he(a,2)}function co(r,e){return r%60===0?(r>0?"-":"+")+he(Math.abs(r)/60,2):Bt(r,e)}function Bt(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=he(Math.trunc(n/60),2),a=he(n%60,2);return t+s+e+a}const uo=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Oc=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},lg=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return uo(r,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",uo(n,e)).replace("{{time}}",Oc(s,e))},ja={p:Oc,P:lg},cg=/^D+$/,dg=/^Y+$/,ug=["D","DD","YY","YYYY"];function Mc(r){return cg.test(r)}function Cc(r){return dg.test(r)}function Sa(r,e,t){const n=hg(r,e,t);if(console.warn(n),ug.includes(r))throw new RangeError(n)}function hg(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fg=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mg=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gg=/^'([^]*?)'?$/,pg=/''/g,vg=/[a-zA-Z]/;function Na(r,e,t){var u,h,f,m,v,g,p,y;const n=Tr(),s=(t==null?void 0:t.locale)??n.locale??Za,a=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,i=(t==null?void 0:t.weekStartsOn)??((g=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((y=(p=n.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??0,l=Te(r);if(!Em(l))throw new RangeError("Invalid time value");let c=e.match(mg).map(b=>{const x=b[0];if(x==="p"||x==="P"){const w=ja[x];return w(b,s.formatLong)}return b}).join("").match(fg).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const x=b[0];if(x==="'")return{isToken:!1,value:yg(b)};if(oo[x])return{isToken:!0,value:b};if(x.match(vg))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return c.map(b=>{if(!b.isToken)return b.value;const x=b.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&Cc(x)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&Mc(x))&&Sa(x,e,String(r));const w=oo[x[0]];return w(l,x,s.localize,d)}).join("")}function yg(r){const e=r.match(gg);return e?e[1].replace(pg,"'"):r}function bg(r){return Te(r).getDay()}function wg(){return Object.assign({},Tr())}function xg(r){let t=Te(r).getDay();return t===0&&(t=7),t}function _g(r,e){const t=e instanceof Date?be(e,0):new e(0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}const jg=10;class Pc{constructor(){W(this,"subPriority",0)}validate(e,t){return!0}}class Sg extends Pc{constructor(e,t,n,s,a){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=s,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Ng extends Pc{constructor(){super(...arguments);W(this,"priority",jg);W(this,"subPriority",-1)}set(t,n){return n.timestampIsSet?t:be(t,_g(t,Date))}}class ue{run(e,t,n,s){const a=this.parse(e,t,n,s);return a?{setter:new Sg(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,n){return!0}}class Eg extends ue{constructor(){super(...arguments);W(this,"priority",140);W(this,"incompatibleTokens",["R","u","t","T"])}parse(t,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});case"GGGG":default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,n,s){return n.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}const Ne={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},it={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ee(r,e){return r&&{value:e(r.value),rest:r.rest}}function xe(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function ot(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,i=t[5]?parseInt(t[5],10):0;return{value:n*(s*wm+a*bm+i*xm),rest:e.slice(t[0].length)}}function Ac(r){return xe(Ne.anyDigitsSigned,r)}function Se(r,e){switch(r){case 1:return xe(Ne.singleDigit,e);case 2:return xe(Ne.twoDigits,e);case 3:return xe(Ne.threeDigits,e);case 4:return xe(Ne.fourDigits,e);default:return xe(new RegExp("^\\d{1,"+r+"}"),e)}}function ns(r,e){switch(r){case 1:return xe(Ne.singleDigitSigned,e);case 2:return xe(Ne.twoDigitsSigned,e);case 3:return xe(Ne.threeDigitsSigned,e);case 4:return xe(Ne.fourDigitsSigned,e);default:return xe(new RegExp("^-?\\d{1,"+r+"}"),e)}}function ti(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Rc(r,e){const t=e>0,n=t?e:1-e;let s;if(n<=50)s=r||100;else{const a=n+50,i=Math.trunc(a/100)*100,l=r>=a%100;s=r+i-(l?100:0)}return t?s:1-s}function Ic(r){return r%400===0||r%4===0&&r%100!==0}class Tg extends ue{constructor(){super(...arguments);W(this,"priority",130);W(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,n,s){const a=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return Ee(Se(4,t),a);case"yo":return Ee(s.ordinalNumber(t,{unit:"year"}),a);default:return Ee(Se(n.length,t),a)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,s){const a=t.getFullYear();if(s.isTwoDigitYear){const l=Rc(s.year,a);return t.setFullYear(l,0,1),t.setHours(0,0,0,0),t}const i=!("era"in n)||n.era===1?s.year:1-s.year;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class kg extends ue{constructor(){super(...arguments);W(this,"priority",130);W(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,n,s){const a=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Ee(Se(4,t),a);case"Yo":return Ee(s.ordinalNumber(t,{unit:"year"}),a);default:return Ee(Se(n.length,t),a)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,s,a){const i=ei(t,a);if(s.isTwoDigitYear){const c=Rc(s.year,i);return t.setFullYear(c,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),bt(t,a)}const l=!("era"in n)||n.era===1?s.year:1-s.year;return t.setFullYear(l,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),bt(t,a)}}class $g extends ue{constructor(){super(...arguments);W(this,"priority",130);W(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,n){return ns(n==="R"?4:n.length,t)}set(t,n,s){const a=be(t,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),yr(a)}}class Dg extends ue{constructor(){super(...arguments);W(this,"priority",130);W(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,n){return ns(n==="u"?4:n.length,t)}set(t,n,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class Og extends ue{constructor(){super(...arguments);W(this,"priority",120);W(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"Q":case"QQ":return Se(n.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class Mg extends ue{constructor(){super(...arguments);W(this,"priority",120);W(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"q":case"qq":return Se(n.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class Cg extends ue{constructor(){super(...arguments);W(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);W(this,"priority",110)}parse(t,n,s){const a=i=>i-1;switch(n){case"M":return Ee(xe(Ne.month,t),a);case"MM":return Ee(Se(2,t),a);case"Mo":return Ee(s.ordinalNumber(t,{unit:"month"}),a);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class Pg extends ue{constructor(){super(...arguments);W(this,"priority",110);W(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,n,s){const a=i=>i-1;switch(n){case"L":return Ee(xe(Ne.month,t),a);case"LL":return Ee(Se(2,t),a);case"Lo":return Ee(s.ordinalNumber(t,{unit:"month"}),a);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}function Ag(r,e,t){const n=Te(r),s=Dc(n,t)-e;return n.setDate(n.getDate()-s*7),n}class Rg extends ue{constructor(){super(...arguments);W(this,"priority",100);W(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,n,s){switch(n){case"w":return xe(Ne.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return Se(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,s,a){return bt(Ag(t,s,a),a)}}function Ig(r,e){const t=Te(r),n=$c(t)-e;return t.setDate(t.getDate()-n*7),t}class Lg extends ue{constructor(){super(...arguments);W(this,"priority",100);W(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,n,s){switch(n){case"I":return xe(Ne.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return Se(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,s){return yr(Ig(t,s))}}const Fg=[31,28,31,30,31,30,31,31,30,31,30,31],Ug=[31,29,31,30,31,30,31,31,30,31,30,31];class Hg extends ue{constructor(){super(...arguments);W(this,"priority",90);W(this,"subPriority",1);W(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"d":return xe(Ne.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return Se(n.length,t)}}validate(t,n){const s=t.getFullYear(),a=Ic(s),i=t.getMonth();return a?n>=1&&n<=Ug[i]:n>=1&&n<=Fg[i]}set(t,n,s){return t.setDate(s),t.setHours(0,0,0,0),t}}class Wg extends ue{constructor(){super(...arguments);W(this,"priority",90);W(this,"subpriority",1);W(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,n,s){switch(n){case"D":case"DD":return xe(Ne.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return Se(n.length,t)}}validate(t,n){const s=t.getFullYear();return Ic(s)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}}function ri(r,e,t){var h,f,m,v;const n=Tr(),s=(t==null?void 0:t.weekStartsOn)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((v=(m=n.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??0,a=Te(r),i=a.getDay(),c=(e%7+7)%7,d=7-s,u=e<0||e>6?e-(i+d)%7:(c+d)%7-(i+d)%7;return Ec(a,u)}class Bg extends ue{constructor(){super(...arguments);W(this,"priority",90);W(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,a){return t=ri(t,s,a),t.setHours(0,0,0,0),t}}class qg extends ue{constructor(){super(...arguments);W(this,"priority",90);W(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,n,s,a){const i=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return Ee(Se(n.length,t),i);case"eo":return Ee(s.ordinalNumber(t,{unit:"day"}),i);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,a){return t=ri(t,s,a),t.setHours(0,0,0,0),t}}class zg extends ue{constructor(){super(...arguments);W(this,"priority",90);W(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,n,s,a){const i=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return Ee(Se(n.length,t),i);case"co":return Ee(s.ordinalNumber(t,{unit:"day"}),i);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,a){return t=ri(t,s,a),t.setHours(0,0,0,0),t}}function Gg(r,e){const t=Te(r),n=xg(t),s=e-n;return Ec(t,s)}class Yg extends ue{constructor(){super(...arguments);W(this,"priority",90);W(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,n,s){const a=i=>i===0?7:i;switch(n){case"i":case"ii":return Se(n.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return Ee(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return Ee(s.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Ee(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return Ee(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,n){return n>=1&&n<=7}set(t,n,s){return t=Gg(t,s),t.setHours(0,0,0,0),t}}class Vg extends ue{constructor(){super(...arguments);W(this,"priority",80);W(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(ti(s),0,0,0),t}}class Kg extends ue{constructor(){super(...arguments);W(this,"priority",80);W(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(ti(s),0,0,0),t}}class Xg extends ue{constructor(){super(...arguments);W(this,"priority",80);W(this,"incompatibleTokens",["a","b","t","T"])}parse(t,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(ti(s),0,0,0),t}}class Jg extends ue{constructor(){super(...arguments);W(this,"priority",70);W(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,n,s){switch(n){case"h":return xe(Ne.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return Se(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,s){const a=t.getHours()>=12;return a&&s<12?t.setHours(s+12,0,0,0):!a&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}}class Qg extends ue{constructor(){super(...arguments);W(this,"priority",70);W(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,n,s){switch(n){case"H":return xe(Ne.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return Se(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,s){return t.setHours(s,0,0,0),t}}class Zg extends ue{constructor(){super(...arguments);W(this,"priority",70);W(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,n,s){switch(n){case"K":return xe(Ne.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return Se(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}}class ep extends ue{constructor(){super(...arguments);W(this,"priority",70);W(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,n,s){switch(n){case"k":return xe(Ne.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return Se(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,s){const a=s<=24?s%24:s;return t.setHours(a,0,0,0),t}}class tp extends ue{constructor(){super(...arguments);W(this,"priority",60);W(this,"incompatibleTokens",["t","T"])}parse(t,n,s){switch(n){case"m":return xe(Ne.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return Se(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,s){return t.setMinutes(s,0,0),t}}class rp extends ue{constructor(){super(...arguments);W(this,"priority",50);W(this,"incompatibleTokens",["t","T"])}parse(t,n,s){switch(n){case"s":return xe(Ne.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return Se(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,s){return t.setSeconds(s,0),t}}class np extends ue{constructor(){super(...arguments);W(this,"priority",30);W(this,"incompatibleTokens",["t","T"])}parse(t,n){const s=a=>Math.trunc(a*Math.pow(10,-n.length+3));return Ee(Se(n.length,t),s)}set(t,n,s){return t.setMilliseconds(s),t}}class sp extends ue{constructor(){super(...arguments);W(this,"priority",10);W(this,"incompatibleTokens",["t","T","x"])}parse(t,n){switch(n){case"X":return ot(it.basicOptionalMinutes,t);case"XX":return ot(it.basic,t);case"XXXX":return ot(it.basicOptionalSeconds,t);case"XXXXX":return ot(it.extendedOptionalSeconds,t);case"XXX":default:return ot(it.extended,t)}}set(t,n,s){return n.timestampIsSet?t:be(t,t.getTime()-rs(t)-s)}}class ap extends ue{constructor(){super(...arguments);W(this,"priority",10);W(this,"incompatibleTokens",["t","T","X"])}parse(t,n){switch(n){case"x":return ot(it.basicOptionalMinutes,t);case"xx":return ot(it.basic,t);case"xxxx":return ot(it.basicOptionalSeconds,t);case"xxxxx":return ot(it.extendedOptionalSeconds,t);case"xxx":default:return ot(it.extended,t)}}set(t,n,s){return n.timestampIsSet?t:be(t,t.getTime()-rs(t)-s)}}class ip extends ue{constructor(){super(...arguments);W(this,"priority",40);W(this,"incompatibleTokens","*")}parse(t){return Ac(t)}set(t,n,s){return[be(t,s*1e3),{timestampIsSet:!0}]}}class op extends ue{constructor(){super(...arguments);W(this,"priority",20);W(this,"incompatibleTokens","*")}parse(t){return Ac(t)}set(t,n,s){return[be(t,s),{timestampIsSet:!0}]}}const lp={G:new Eg,y:new Tg,Y:new kg,R:new $g,u:new Dg,Q:new Og,q:new Mg,M:new Cg,L:new Pg,w:new Rg,I:new Lg,d:new Hg,D:new Wg,E:new Bg,e:new qg,c:new zg,i:new Yg,a:new Vg,b:new Kg,B:new Xg,h:new Jg,H:new Qg,K:new Zg,k:new ep,m:new tp,s:new rp,S:new np,X:new sp,x:new ap,t:new ip,T:new op},cp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,up=/^'([^]*?)'?$/,hp=/''/g,fp=/\S/,mp=/[a-zA-Z]/;function gp(r,e,t,n){var g,p,y,b,x,w,j,T;const s=wg(),a=(n==null?void 0:n.locale)??s.locale??Za,i=(n==null?void 0:n.firstWeekContainsDate)??((p=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:p.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(y=s.locale)==null?void 0:y.options)==null?void 0:b.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((w=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??s.weekStartsOn??((T=(j=s.locale)==null?void 0:j.options)==null?void 0:T.weekStartsOn)??0;if(e==="")return r===""?Te(t):be(t,NaN);const c={firstWeekContainsDate:i,weekStartsOn:l,locale:a},d=[new Ng],u=e.match(dp).map(_=>{const N=_[0];if(N in ja){const O=ja[N];return O(_,a.formatLong)}return _}).join("").match(cp),h=[];for(let _ of u){!(n!=null&&n.useAdditionalWeekYearTokens)&&Cc(_)&&Sa(_,e,r),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Mc(_)&&Sa(_,e,r);const N=_[0],O=lp[N];if(O){const{incompatibleTokens:P}=O;if(Array.isArray(P)){const A=h.find(I=>P.includes(I.token)||I.token===N);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${_}\` at the same time`)}else if(O.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);h.push({token:N,fullToken:_});const C=O.run(r,_,a.match,c);if(!C)return be(t,NaN);d.push(C.setter),r=C.rest}else{if(N.match(mp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(_==="''"?_="'":N==="'"&&(_=pp(_)),r.indexOf(_)===0)r=r.slice(_.length);else return be(t,NaN)}}if(r.length>0&&fp.test(r))return be(t,NaN);const f=d.map(_=>_.priority).sort((_,N)=>N-_).filter((_,N,O)=>O.indexOf(_)===N).map(_=>d.filter(N=>N.priority===_).sort((N,O)=>O.subPriority-N.subPriority)).map(_=>_[0]);let m=Te(t);if(isNaN(m.getTime()))return be(t,NaN);const v={};for(const _ of f){if(!_.validate(m,c))return be(t,NaN);const N=_.set(m,v,c);Array.isArray(N)?(m=N[0],Object.assign(v,N[1])):m=N}return be(t,m)}function pp(r){return r.match(up)[1].replace(hp,"'")}function vp(r,e){return vm(r,-e)}function yp({meetings:r,loading:e,error:t,onUpdateHeldDate:n,onUpdateConfirmedDate:s}){var b;const a=new Date,[i,l]=E.useState(a.toISOString().slice(0,7)),[c,d]=E.useState("");if(e)return o.jsx("div",{className:"flex justify-center items-center p-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(t)return o.jsx("div",{className:"p-6 bg-white rounded-lg shadow-md",children:o.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[o.jsx(et,{className:"w-5 h-5"}),o.jsx("p",{children:t})]})});const u=()=>{const x=r.length,w=r.filter(P=>P.held_at!==null).length,j=r.filter(P=>P.no_show).length,T=x>0?w/x*100:0,O=x/12/50*100;return{totalBooked:x,totalHeld:w,totalNoShow:j,showRate:T,percentToGoal:O}},h=x=>{const w=x.length,j=x.filter(P=>P.held_at!==null).length,T=x.filter(P=>P.no_show).length,_=w>0?j/w*100:0,O=w/50*100;return{totalBooked:w,totalHeld:j,totalNoShow:T,showRate:_,percentToGoal:O}},f=Array.from({length:12},(x,w)=>{const j=vp(a,w);return{value:Na(j,"yyyy-MM"),label:Na(j,"MMMM yyyy")}}),m=r.filter(x=>x.scheduled_date.startsWith(i)||x.held_at&&x.held_at.startsWith(i)),v=m.filter(x=>{var j;return`${((j=x.clients)==null?void 0:j.name)||""} ${x.contact_full_name||""} ${x.contact_email||""} ${x.contact_phone||""}`.toLowerCase().includes(c.toLowerCase())}),g=u(),p=h(m),y=(b=f.find(x=>x.value===i))==null?void 0:b.label;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"All-time Performance"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Total Meetings Booked"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.totalBooked})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Total Meetings Held"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.totalHeld})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Total No Shows"}),o.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.totalNoShow})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Show Rate"}),o.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:[g.showRate.toFixed(1),"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Avg. % to Goal"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[g.percentToGoal.toFixed(1),"%"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:y}),o.jsx("select",{value:i,onChange:x=>l(x.target.value),className:"rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500",children:f.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Meetings Booked"}),o.jsx(Mt,{className:"w-5 h-5 text-indigo-600"})]}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.totalBooked})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Meetings Held"}),o.jsx(yt,{className:"w-5 h-5 text-green-600"})]}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:p.totalHeld})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"No Shows"}),o.jsx(es,{className:"w-5 h-5 text-red-600"})]}),o.jsx("p",{className:"text-2xl font-bold text-red-600",children:p.totalNoShow})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Show Rate"}),o.jsx(Ct,{className:"w-5 h-5 text-indigo-600"})]}),o.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:[p.showRate.toFixed(1),"%"]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"% to Goal"}),o.jsx(Zl,{className:"w-5 h-5 text-gray-600"})]}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[p.percentToGoal.toFixed(1),"%"]})]})]}),o.jsxs("div",{className:"relative mb-6",children:[o.jsx("input",{type:"text",placeholder:"Search meetings...",value:c,onChange:x=>d(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"}),o.jsx(Ya,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"})]}),o.jsxs("div",{className:"space-y-4",children:[v.map(x=>o.jsx(yn,{meeting:x,onUpdateHeldDate:n,onUpdateConfirmedDate:s,showDateControls:!0},x.id)),v.length===0&&o.jsx("p",{className:"text-center text-gray-500",children:c?"No meetings found matching your search":"No meetings for this month"})]})]})]})}function bp({sdrId:r}){const{meetings:e}=Ss(r),{totalMeetingGoal:t,totalBookedMeetings:n,totalPendingMeetings:s}=Sc(r),[a,i]=E.useState(null),[l,c]=E.useState(0),[d,u]=E.useState(!0),[h,f]=E.useState(null);if(E.useEffect(()=>{async function j(){if(!r){f("Invalid SDR ID"),u(!1);return}try{const{data:T,error:_}=await re.from("compensation_structures").select("*").eq("sdr_id",r).maybeSingle();if(_&&_.code!=="PGRST116")throw _;i(T||{commission_type:"per_meeting",meeting_rates:{booked:0,held:0},goal_tiers:[]}),f(null)}catch(T){console.error("Load compensation error:",T),f("Failed to load commission structure")}finally{u(!1)}}j()},[r]),d)return o.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})})});if(h)return o.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[o.jsx(et,{className:"w-5 h-5"}),o.jsx("p",{children:h})]})})})});if(!a)return o.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"No commission structure configured"})})})});const m=j=>{if(a.commission_type==="per_meeting"){const T=j*a.meeting_rates.booked,_=j*a.meeting_rates.held;return T+_}else{const T=n-s,_=t>0?T/t*100:0,N=[...a.goal_tiers].sort((O,P)=>P.percentage-O.percentage);for(const O of N)if(_>=O.percentage)return O.bonus;return 0}},v=e.filter(j=>j.status==="confirmed").length,g=m(v),p=m(l),y=n-s,b=t>0?y/t*100:0,w=(()=>{if(a.commission_type!=="goal_based"||!t)return null;const j=[...a.goal_tiers].sort((_,N)=>_.percentage-N.percentage),T=b;for(const _ of j)if(_.percentage>T){const N=Math.ceil(_.percentage/100*t),O=N-y;return{percentage:_.percentage,bonus:_.bonus,meetingsNeeded:O,targetMeetings:N}}return null})();return o.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Current Commission"}),o.jsx(Zl,{className:"w-5 h-5 text-green-600"})]}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",g.toLocaleString()]}),o.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Based on ",v," confirmed meetings"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Meeting Goal"}),o.jsx(Ct,{className:"w-5 h-5 text-indigo-600"})]}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t}),o.jsxs("div",{className:"mt-2",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-gray-500",children:"Progress"}),o.jsxs("span",{className:"font-medium text-gray-900",children:[y,"/",t," meetings"]})]}),o.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${b}%`}})})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Commission Type"}),o.jsx(Bu,{className:"w-5 h-5 text-indigo-600"})]}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:a.commission_type.replace("_"," ")})]})]}),a.commission_type==="per_meeting"?o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Commission Rates"})}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Per Booked Meeting"}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",a.meeting_rates.booked]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Additional per Held Meeting"}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",a.meeting_rates.held]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Total per Held Meeting"}),o.jsxs("span",{className:"text-sm font-medium text-indigo-600",children:["$",a.meeting_rates.booked+a.meeting_rates.held]})]})]})})]}):o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Goal Tiers"}),w&&o.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 rounded-md",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Kl,{className:"w-4 h-4 text-indigo-600"}),o.jsxs("p",{className:"text-sm text-indigo-900",children:[o.jsxs("span",{className:"font-medium",children:[w.meetingsNeeded," more meetings"]})," ","needed to reach ",w.percentage,"% tier ($",w.bonus.toLocaleString()," bonus)"]})]}),o.jsx("div",{className:"mt-2 h-1.5 bg-indigo-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${y/w.targetMeetings*100}%`}})})]})]}),o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"space-y-6",children:a.goal_tiers.sort((j,T)=>T.percentage-j.percentage).map((j,T)=>{const _=Math.ceil(j.percentage/100*t),N=y>=_,O=(w==null?void 0:w.percentage)===j.percentage;return o.jsxs("div",{className:`p-4 rounded-lg ${N?"bg-green-50":O?"bg-indigo-50":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:`w-5 h-5 ${N?"text-green-600":O?"text-indigo-600":"text-gray-400"}`}),o.jsxs("span",{className:"font-medium text-gray-900",children:[j.percentage,"% Goal"]})]}),o.jsxs("span",{className:`text-sm font-medium ${N?"text-green-600":O?"text-indigo-600":"text-gray-600"}`,children:["$",j.bonus.toLocaleString()," bonus"]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all duration-300 ${N?"bg-green-600":O?"bg-indigo-600":"bg-gray-300"}`,style:{width:`${y/_*100}%`}})}),o.jsxs("div",{className:"mt-1 flex justify-between text-xs",children:[o.jsxs("span",{className:"text-gray-500",children:[_," meetings needed"]}),o.jsxs("span",{className:`font-medium ${N?"text-green-600":O?"text-indigo-600":"text-gray-600"}`,children:[y,"/",_," booked"]})]})]})]},T)})})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Commission Calculator"})}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"max-w-md space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"mockMeetings",className:"block text-sm font-medium text-gray-700",children:"Number of Meetings"}),o.jsx("input",{type:"number",id:"mockMeetings",min:"0",value:l,onChange:j=>c(Math.max(0,parseInt(j.target.value)||0)),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Projected Commission"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["$",p.toLocaleString()]})]}),a.commission_type==="goal_based"&&o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Goal Progress"}),o.jsxs("span",{className:"font-medium text-gray-900",children:[l,"/",t," meetings"]})]})]})})]})})]})]})})}var bn={};(function r(e,t,n,s){var a=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),i=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!e.OffscreenCanvas)return!1;var $=new OffscreenCanvas(1,1),S=$.getContext("2d");S.fillRect(0,0,1,1);var D=$.transferToImageBitmap();try{S.createPattern(D,"no-repeat")}catch{return!1}return!0}();function c(){}function d($){var S=t.exports.Promise,D=S!==void 0?S:e.Promise;return typeof D=="function"?new D($):($(c,c),null)}var u=function($,S){return{transform:function(D){if($)return D;if(S.has(D))return S.get(D);var R=new OffscreenCanvas(D.width,D.height),G=R.getContext("2d");return G.drawImage(D,0,0),S.set(D,R),R},clear:function(){S.clear()}}}(l,new Map),h=function(){var $=Math.floor(16.666666666666668),S,D,R={},G=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(S=function(V){var M=Math.random();return R[M]=requestAnimationFrame(function L(z){G===z||G+$-1<z?(G=z,delete R[M],V()):R[M]=requestAnimationFrame(L)}),M},D=function(V){R[V]&&cancelAnimationFrame(R[V])}):(S=function(V){return setTimeout(V,$)},D=function(V){return clearTimeout(V)}),{frame:S,cancel:D}}(),f=function(){var $,S,D={};function R(G){function V(M,L){G.postMessage({options:M||{},callback:L})}G.init=function(L){var z=L.transferControlToOffscreen();G.postMessage({canvas:z},[z])},G.fire=function(L,z,K){if(S)return V(L,null),S;var H=Math.random().toString(36).slice(2);return S=d(function(F){function B(ne){ne.data.callback===H&&(delete D[H],G.removeEventListener("message",B),S=null,u.clear(),K(),F())}G.addEventListener("message",B),V(L,H),D[H]=B.bind(null,{data:{callback:H}})}),S},G.reset=function(){G.postMessage({reset:!0});for(var L in D)D[L](),delete D[L]}}return function(){if($)return $;if(!n&&a){var G=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{$=new Worker(URL.createObjectURL(new Blob([G])))}catch(V){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",V),null}R($)}return $}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v($,S){return S?S($):$}function g($){return $!=null}function p($,S,D){return v($&&g($[S])?$[S]:m[S],D)}function y($){return $<0?0:Math.floor($)}function b($,S){return Math.floor(Math.random()*(S-$))+$}function x($){return parseInt($,16)}function w($){return $.map(j)}function j($){var S=String($).replace(/[^0-9a-f]/gi,"");return S.length<6&&(S=S[0]+S[0]+S[1]+S[1]+S[2]+S[2]),{r:x(S.substring(0,2)),g:x(S.substring(2,4)),b:x(S.substring(4,6))}}function T($){var S=p($,"origin",Object);return S.x=p(S,"x",Number),S.y=p(S,"y",Number),S}function _($){$.width=document.documentElement.clientWidth,$.height=document.documentElement.clientHeight}function N($){var S=$.getBoundingClientRect();$.width=S.width,$.height=S.height}function O($){var S=document.createElement("canvas");return S.style.position="fixed",S.style.top="0px",S.style.left="0px",S.style.pointerEvents="none",S.style.zIndex=$,S}function P($,S,D,R,G,V,M,L,z){$.save(),$.translate(S,D),$.rotate(V),$.scale(R,G),$.arc(0,0,1,M,L,z),$.restore()}function C($){var S=$.angle*(Math.PI/180),D=$.spread*(Math.PI/180);return{x:$.x,y:$.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:$.startVelocity*.5+Math.random()*$.startVelocity,angle2D:-S+(.5*D-Math.random()*D),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:$.color,shape:$.shape,tick:0,totalTicks:$.ticks,decay:$.decay,drift:$.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:$.gravity*3,ovalScalar:.6,scalar:$.scalar,flat:$.flat}}function A($,S){S.x+=Math.cos(S.angle2D)*S.velocity+S.drift,S.y+=Math.sin(S.angle2D)*S.velocity+S.gravity,S.velocity*=S.decay,S.flat?(S.wobble=0,S.wobbleX=S.x+10*S.scalar,S.wobbleY=S.y+10*S.scalar,S.tiltSin=0,S.tiltCos=0,S.random=1):(S.wobble+=S.wobbleSpeed,S.wobbleX=S.x+10*S.scalar*Math.cos(S.wobble),S.wobbleY=S.y+10*S.scalar*Math.sin(S.wobble),S.tiltAngle+=.1,S.tiltSin=Math.sin(S.tiltAngle),S.tiltCos=Math.cos(S.tiltAngle),S.random=Math.random()+2);var D=S.tick++/S.totalTicks,R=S.x+S.random*S.tiltCos,G=S.y+S.random*S.tiltSin,V=S.wobbleX+S.random*S.tiltCos,M=S.wobbleY+S.random*S.tiltSin;if($.fillStyle="rgba("+S.color.r+", "+S.color.g+", "+S.color.b+", "+(1-D)+")",$.beginPath(),i&&S.shape.type==="path"&&typeof S.shape.path=="string"&&Array.isArray(S.shape.matrix))$.fill(te(S.shape.path,S.shape.matrix,S.x,S.y,Math.abs(V-R)*.1,Math.abs(M-G)*.1,Math.PI/10*S.wobble));else if(S.shape.type==="bitmap"){var L=Math.PI/10*S.wobble,z=Math.abs(V-R)*.1,K=Math.abs(M-G)*.1,H=S.shape.bitmap.width*S.scalar,F=S.shape.bitmap.height*S.scalar,B=new DOMMatrix([Math.cos(L)*z,Math.sin(L)*z,-Math.sin(L)*K,Math.cos(L)*K,S.x,S.y]);B.multiplySelf(new DOMMatrix(S.shape.matrix));var ne=$.createPattern(u.transform(S.shape.bitmap),"no-repeat");ne.setTransform(B),$.globalAlpha=1-D,$.fillStyle=ne,$.fillRect(S.x-H/2,S.y-F/2,H,F),$.globalAlpha=1}else if(S.shape==="circle")$.ellipse?$.ellipse(S.x,S.y,Math.abs(V-R)*S.ovalScalar,Math.abs(M-G)*S.ovalScalar,Math.PI/10*S.wobble,0,2*Math.PI):P($,S.x,S.y,Math.abs(V-R)*S.ovalScalar,Math.abs(M-G)*S.ovalScalar,Math.PI/10*S.wobble,0,2*Math.PI);else if(S.shape==="star")for(var Q=Math.PI/2*3,se=4*S.scalar,le=8*S.scalar,oe=S.x,Le=S.y,Pe=5,pe=Math.PI/Pe;Pe--;)oe=S.x+Math.cos(Q)*le,Le=S.y+Math.sin(Q)*le,$.lineTo(oe,Le),Q+=pe,oe=S.x+Math.cos(Q)*se,Le=S.y+Math.sin(Q)*se,$.lineTo(oe,Le),Q+=pe;else $.moveTo(Math.floor(S.x),Math.floor(S.y)),$.lineTo(Math.floor(S.wobbleX),Math.floor(G)),$.lineTo(Math.floor(V),Math.floor(M)),$.lineTo(Math.floor(R),Math.floor(S.wobbleY));return $.closePath(),$.fill(),S.tick<S.totalTicks}function I($,S,D,R,G){var V=S.slice(),M=$.getContext("2d"),L,z,K=d(function(H){function F(){L=z=null,M.clearRect(0,0,R.width,R.height),u.clear(),G(),H()}function B(){n&&!(R.width===s.width&&R.height===s.height)&&(R.width=$.width=s.width,R.height=$.height=s.height),!R.width&&!R.height&&(D($),R.width=$.width,R.height=$.height),M.clearRect(0,0,R.width,R.height),V=V.filter(function(ne){return A(M,ne)}),V.length?L=h.frame(B):F()}L=h.frame(B),z=F});return{addFettis:function(H){return V=V.concat(H),K},canvas:$,promise:K,reset:function(){L&&h.cancel(L),z&&z()}}}function Y($,S){var D=!$,R=!!p(S||{},"resize"),G=!1,V=p(S,"disableForReducedMotion",Boolean),M=a&&!!p(S||{},"useWorker"),L=M?f():null,z=D?_:N,K=$&&L?!!$.__confetti_initialized:!1,H=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,F;function B(Q,se,le){for(var oe=p(Q,"particleCount",y),Le=p(Q,"angle",Number),Pe=p(Q,"spread",Number),pe=p(Q,"startVelocity",Number),ht=p(Q,"decay",Number),lr=p(Q,"gravity",Number),Ut=p(Q,"drift",Number),St=p(Q,"colors",w),Nt=p(Q,"ticks",Number),rt=p(Q,"shapes"),q=p(Q,"scalar"),ee=!!p(Q,"flat"),De=T(Q),ft=oe,nt=[],Vs=$.width*De.x,Ks=$.height*De.y;ft--;)nt.push(C({x:Vs,y:Ks,angle:Le,spread:Pe,startVelocity:pe,color:St[ft%St.length],shape:rt[b(0,rt.length)],ticks:Nt,decay:ht,gravity:lr,drift:Ut,scalar:q,flat:ee}));return F?F.addFettis(nt):(F=I($,nt,z,se,le),F.promise)}function ne(Q){var se=V||p(Q,"disableForReducedMotion",Boolean),le=p(Q,"zIndex",Number);if(se&&H)return d(function(pe){pe()});D&&F?$=F.canvas:D&&!$&&($=O(le),document.body.appendChild($)),R&&!K&&z($);var oe={width:$.width,height:$.height};L&&!K&&L.init($),K=!0,L&&($.__confetti_initialized=!0);function Le(){if(L){var pe={getBoundingClientRect:function(){if(!D)return $.getBoundingClientRect()}};z(pe),L.postMessage({resize:{width:pe.width,height:pe.height}});return}oe.width=oe.height=null}function Pe(){F=null,R&&(G=!1,e.removeEventListener("resize",Le)),D&&$&&(document.body.contains($)&&document.body.removeChild($),$=null,K=!1)}return R&&!G&&(G=!0,e.addEventListener("resize",Le,!1)),L?L.fire(Q,oe,Pe):B(Q,oe,Pe)}return ne.reset=function(){L&&L.reset(),F&&F.reset()},ne}var Z;function X(){return Z||(Z=Y(null,{useWorker:!0,resize:!0})),Z}function te($,S,D,R,G,V,M){var L=new Path2D($),z=new Path2D;z.addPath(L,new DOMMatrix(S));var K=new Path2D;return K.addPath(z,new DOMMatrix([Math.cos(M)*G,Math.sin(M)*G,-Math.sin(M)*V,Math.cos(M)*V,D,R])),K}function J($){if(!i)throw new Error("path confetti are not supported in this browser");var S,D;typeof $=="string"?S=$:(S=$.path,D=$.matrix);var R=new Path2D(S),G=document.createElement("canvas"),V=G.getContext("2d");if(!D){for(var M=1e3,L=M,z=M,K=0,H=0,F,B,ne=0;ne<M;ne+=2)for(var Q=0;Q<M;Q+=2)V.isPointInPath(R,ne,Q,"nonzero")&&(L=Math.min(L,ne),z=Math.min(z,Q),K=Math.max(K,ne),H=Math.max(H,Q));F=K-L,B=H-z;var se=10,le=Math.min(se/F,se/B);D=[le,0,0,le,-Math.round(F/2+L)*le,-Math.round(B/2+z)*le]}return{type:"path",path:S,matrix:D}}function de($){var S,D=1,R="#000000",G='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof $=="string"?S=$:(S=$.text,D="scalar"in $?$.scalar:D,G="fontFamily"in $?$.fontFamily:G,R="color"in $?$.color:R);var V=10*D,M=""+V+"px "+G,L=new OffscreenCanvas(V,V),z=L.getContext("2d");z.font=M;var K=z.measureText(S),H=Math.ceil(K.actualBoundingBoxRight+K.actualBoundingBoxLeft),F=Math.ceil(K.actualBoundingBoxAscent+K.actualBoundingBoxDescent),B=2,ne=K.actualBoundingBoxLeft+B,Q=K.actualBoundingBoxAscent+B;H+=B+B,F+=B+B,L=new OffscreenCanvas(H,F),z=L.getContext("2d"),z.font=M,z.fillStyle=R,z.fillText(S,ne,Q);var se=1/D;return{type:"bitmap",bitmap:L.transferToImageBitmap(),matrix:[se,0,0,se,-H*se/2,-F*se/2]}}t.exports=function(){return X().apply(this,arguments)},t.exports.reset=function(){X().reset()},t.exports.create=Y,t.exports.shapeFromPath=J,t.exports.shapeFromText=de})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),bn,!1);const wp=bn.exports;bn.exports.create;function xp({pendingMeetings:r,confirmedMeetings:e,noShowMeetings:t,onDelete:n,onUpdateHeldDate:s,onUpdateConfirmedDate:a,editable:i=!1,editingMeetingId:l=null,onEdit:c,onSave:d,onCancel:u}){const[h,f]=E.useState(""),m=b=>b.filter(x=>{var j;return`${((j=x.clients)==null?void 0:j.name)||""} ${x.contact_full_name||""} ${x.contact_email||""} ${x.contact_phone||""}`.toLowerCase().includes(h.toLowerCase())}),v=m(r),g=m(e),p=m(t),y=({title:b,meetings:x})=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:b}),o.jsxs("span",{className:"text-sm text-gray-500",children:[x.length," meetings"]})]})}),o.jsx("div",{className:"p-4 max-h-[800px] overflow-y-auto",children:o.jsx("div",{className:"space-y-4",children:x.length>0?x.map(w=>o.jsx(yn,{meeting:w,onDelete:n,onUpdateHeldDate:s,onUpdateConfirmedDate:a,editable:i,editingMeetingId:l,onEdit:c,onSave:d,onCancel:u,showDateControls:!0},w.id)):o.jsx("p",{className:"text-gray-500 text-sm text-center",children:"No meetings to display"})})})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:o.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[o.jsx("input",{type:"text",placeholder:"Search all meetings...",value:h,onChange:b=>f(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),o.jsx(Ya,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-400"})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx(y,{title:"Pending Meetings",meetings:v}),o.jsx(y,{title:"Confirmed Meetings",meetings:g}),o.jsx(y,{title:"No Shows",meetings:p})]})]})}function wt(r){"@babel/helpers - typeof";return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(r)}function _p(r,e){if(wt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(wt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Lc(r){var e=_p(r,"string");return wt(e)=="symbol"?e:e+""}function Gt(r,e,t){return(e=Lc(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ho(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function fe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ho(Object(t),!0).forEach(function(n){Gt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ho(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ns(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function dt(r,e){if(r==null)return{};var t,n,s=Ns(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(s[t]=r[t])}return s}function ke(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function fo(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Lc(n.key),n)}}function $e(r,e,t){return e&&fo(r.prototype,e),t&&fo(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function ss(r){return ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ss(r)}function Fc(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fc=function(){return!!r})()}function jp(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Sp(r,e){if(e&&(wt(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jp(r)}function Re(r,e,t){return e=ss(e),Sp(r,Fc()?Reflect.construct(e,t||[],ss(r).constructor):e.apply(r,t))}function as(r,e){return as=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},as(r,e)}function Ie(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&as(r,e)}function Uc(r){if(Array.isArray(r))return r}function Np(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,s,a,i,l=[],c=!0,d=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(c=(n=a.call(t)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&t.return!=null&&(i=t.return(),Object(i)!==i))return}finally{if(d)throw s}}return l}}function Ea(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ni(r,e){if(r){if(typeof r=="string")return Ea(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ea(r,e):void 0}}function Hc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xt(r,e){return Uc(r)||Np(r,e)||ni(r,e)||Hc()}function Wc(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=Wc(r[e]))&&(n&&(n+=" "),n+=t);else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function je(){for(var r,e,t=0,n="";t<arguments.length;)(r=arguments[t++])&&(e=Wc(r))&&(n&&(n+=" "),n+=e);return n}function _e(){return _e=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_e.apply(null,arguments)}var Ep=function(r,e,t,n,s,a,i,l){if(!r){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[t,n,s,a,i,l],u=0;c=new Error(e.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Tp=Ep;const tn=Je(Tp);var kp=function(){};function $p(r,e){var t={};return Object.keys(r).forEach(function(n){t[Vn(n)]=kp}),t}function mo(r,e){return r[e]!==void 0}function Vn(r){return"default"+r.charAt(0).toUpperCase()+r.substr(1)}function Dp(r){return!!r&&(typeof r!="function"||r.prototype&&r.prototype.isReactComponent)}function Op(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,as(r,e)}function Bc(){var r=this.constructor.getDerivedStateFromProps(this.props,this.state);r!=null&&this.setState(r)}function qc(r){function e(t){var n=this.constructor.getDerivedStateFromProps(r,t);return n??null}this.setState(e.bind(this))}function zc(r,e){try{var t=this.props,n=this.state;this.props=r,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,n)}finally{this.props=t,this.state=n}}Bc.__suppressDeprecationWarning=!0;qc.__suppressDeprecationWarning=!0;zc.__suppressDeprecationWarning=!0;function Mp(r){var e=r.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof r.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return r;var t=null,n=null,s=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?s="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),t!==null||n!==null||s!==null){var a=r.displayName||r.name,i=typeof r.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+i+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(n!==null?`
  `+n:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof r.getDerivedStateFromProps=="function"&&(e.componentWillMount=Bc,e.componentWillReceiveProps=qc),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=zc;var l=e.componentDidUpdate;e.componentDidUpdate=function(d,u,h){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;l.call(this,d,u,f)}}return r}var Cp="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function Gc(r,e,t){t===void 0&&(t=[]);var n=r.displayName||r.name||"Component",s=Dp(r),a=Object.keys(e),i=a.map(Vn);s||!t.length||tn(!1);var l=function(d){Op(u,d);function u(){for(var f,m=arguments.length,v=new Array(m),g=0;g<m;g++)v[g]=arguments[g];f=d.call.apply(d,[this].concat(v))||this,f.handlers=Object.create(null),a.forEach(function(y){var b=e[y],x=function(j){if(f.props[b]){var T;f._notifying=!0;for(var _=arguments.length,N=new Array(_>1?_-1:0),O=1;O<_;O++)N[O-1]=arguments[O];(T=f.props)[b].apply(T,[j].concat(N)),f._notifying=!1}f.unmounted||f.setState(function(P){var C,A=P.values;return{values:_e(Object.create(null),A,(C={},C[y]=j,C))}})};f.handlers[b]=x}),t.length&&(f.attachRef=function(y){f.inner=y});var p=Object.create(null);return a.forEach(function(y){p[y]=f.props[Vn(y)]}),f.state={values:p,prevProps:{}},f}var h=u.prototype;return h.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(m,v){var g=v.values,p=v.prevProps,y={values:_e(Object.create(null),g),prevProps:{}};return a.forEach(function(b){y.prevProps[b]=m[b],!mo(m,b)&&mo(p,b)&&(y.values[b]=m[Vn(b)])}),y},h.componentWillUnmount=function(){this.unmounted=!0},h.render=function(){var m=this,v=this.props,g=v.innerRef,p=Ns(v,["innerRef"]);i.forEach(function(b){delete p[b]});var y={};return a.forEach(function(b){var x=m.props[b];y[b]=x!==void 0?x:m.state.values[b]}),k.createElement(r,_e({},p,y,this.handlers,{ref:g||this.attachRef}))},u}(k.Component);Mp(l),l.displayName="Uncontrolled("+n+")",l.propTypes=_e({innerRef:function(){}},$p(e)),t.forEach(function(d){l.prototype[d]=function(){var h;return(h=this.inner)[d].apply(h,arguments)}});var c=l;return k.forwardRef&&(c=k.forwardRef(function(d,u){return k.createElement(l,_e({},d,{innerRef:u,__source:{fileName:Cp,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=r,c.deferControlTo=function(d,u,h){return u===void 0&&(u={}),Gc(d,_e({},e,u),h)},c}var Yc={exports:{}},Pp="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ap=Pp,Rp=Ap;function Vc(){}function Kc(){}Kc.resetWarningCache=Vc;var Ip=function(){function r(n,s,a,i,l,c){if(c!==Rp){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Kc,resetWarningCache:Vc};return t.PropTypes=t,t};Yc.exports=Ip();var Lp=Yc.exports;const U=Je(Lp);var is="milliseconds",rn="seconds",nn="minutes",sn="hours",Jt="day",br="week",an="month",Qt="year",Zt="decade",er="century",Xc={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},Fp={month:1,year:12,decade:10*12,century:100*12};function Up(r){return[31,Hp(r),31,30,31,30,31,31,30,31,30,31]}function Hp(r){return r%4===0&&r%100!==0||r%400===0?29:28}function tt(r,e,t){switch(r=new Date(r),t){case is:case rn:case nn:case sn:case Jt:case br:return Wp(r,e*Xc[t]);case an:case Qt:case Zt:case er:return Bp(r,e*Fp[t])}throw new TypeError('Invalid units: "'+t+'"')}function Wp(r,e){var t=new Date(+r+e);return qp(r,t)}function Bp(r,e){var t=r.getFullYear(),n=r.getMonth(),s=r.getDate(),a=t*12+n+e,i=Math.trunc(a/12),l=a%12,c=Math.min(s,Up(i)[l]),d=new Date(r);return d.setFullYear(i),d.setDate(1),d.setMonth(l),d.setDate(c),d}function qp(r,e){var t=r.getTimezoneOffset(),n=e.getTimezoneOffset(),s=n-t;return new Date(+e+s*Xc.minutes)}function on(r,e,t){return tt(r,-e,t)}function Ce(r,e,t){switch(r=new Date(r),e){case er:case Zt:case Qt:r=ls(r,0);case an:r=td(r,1);case br:case Jt:r=dn(r,0);case sn:r=wr(r,0);case nn:r=cn(r,0);case rn:r=ln(r,0)}return e===Zt&&(r=on(r,tr(r)%10,"year")),e===er&&(r=on(r,tr(r)%100,"year")),e===br&&(r=rd(r,0,t)),r}function os(r,e,t){switch(r=new Date(r),r=Ce(r,e,t),e){case er:case Zt:case Qt:case an:case br:r=tt(r,1,e),r=on(r,1,Jt),r.setHours(23,59,59,999);break;case Jt:r.setHours(23,59,59,999);break;case sn:case nn:case rn:r=tt(r,1,e),r=on(r,1,is)}return r}var kr=Dr(function(r,e){return r===e}),si=Dr(function(r,e){return r!==e}),Es=Dr(function(r,e){return r>e}),wn=Dr(function(r,e){return r>=e}),ai=Dr(function(r,e){return r<e}),$r=Dr(function(r,e){return r<=e});function Jc(){return new Date(Math.min.apply(Math,arguments))}function Qc(){return new Date(Math.max.apply(Math,arguments))}function Zc(r,e,t,n){return n=n||"day",(!e||wn(r,e,n))&&(!t||$r(r,t,n))}var ln=Rt("Milliseconds"),cn=Rt("Seconds"),wr=Rt("Minutes"),dn=Rt("Hours"),ed=Rt("Day"),td=Rt("Date"),ls=Rt("Month"),tr=Rt("FullYear");function zp(r,e){return e===void 0?tr(Ce(r,Zt)):tt(r,e+10,Qt)}function Gp(r,e){return e===void 0?tr(Ce(r,er)):tt(r,e+100,Qt)}function rd(r,e,t){var n=(ed(r)+7-(t||0))%7;return e===void 0?n:tt(r,e-n,Jt)}function Yp(r,e,t,n){var s,a,i;switch(t){case is:case rn:case nn:case sn:case Jt:case br:s=e.getTime()-r.getTime();break;case an:case Qt:case Zt:case er:s=(tr(e)-tr(r))*12+ls(e)-ls(r);break;default:throw new TypeError('Invalid units: "'+t+'"')}switch(t){case is:a=1;break;case rn:a=1e3;break;case nn:a=1e3*60;break;case sn:a=1e3*60*60;break;case Jt:a=1e3*60*60*24;break;case br:a=1e3*60*60*24*7;break;case an:a=1;break;case Qt:a=12;break;case Zt:a=120;break;case er:a=1200;break;default:throw new TypeError('Invalid units: "'+t+'"')}return i=s/a,n?i:Math.round(i)}function Rt(r){var e=function(t){switch(t){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(r);return function(t,n){if(n===void 0)return t["get"+r]();var s=new Date(t);return s["set"+r](n),e&&s["get"+r]()!=n&&(r==="Hours"||n>=e&&s.getHours()-t.getHours()<Math.floor(n/e))&&s["set"+r](n+e),s}}function Dr(r){return function(e,t,n){return r(+Ce(e,n),+Ce(t,n))}}const go=Object.freeze(Object.defineProperty({__proto__:null,add:tt,century:Gp,date:td,day:ed,decade:zp,diff:Yp,endOf:os,eq:kr,gt:Es,gte:wn,hours:dn,inRange:Zc,lt:ai,lte:$r,max:Qc,milliseconds:ln,min:Jc,minutes:wr,month:ls,neq:si,seconds:cn,startOf:Ce,subtract:on,weekday:rd,year:tr},Symbol.toStringTag,{value:"Module"}));function Vp(r){if(Array.isArray(r))return Ea(r)}function nd(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Kp(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kn(r){return Vp(r)||nd(r)||ni(r)||Kp()}function Xp(r,e,t){var n=-1,s=r.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var a=Array(s);++n<s;)a[n]=r[n+e];return a}var sd=Xp;function Jp(r,e){return r===e||r!==r&&e!==e}var xn=Jp,Qp=typeof we=="object"&&we&&we.Object===Object&&we,ad=Qp,Zp=ad,ev=typeof self=="object"&&self&&self.Object===Object&&self,tv=Zp||ev||Function("return this")(),ut=tv,rv=ut,nv=rv.Symbol,Or=nv,po=Or,id=Object.prototype,sv=id.hasOwnProperty,av=id.toString,Br=po?po.toStringTag:void 0;function iv(r){var e=sv.call(r,Br),t=r[Br];try{r[Br]=void 0;var n=!0}catch{}var s=av.call(r);return n&&(e?r[Br]=t:delete r[Br]),s}var ov=iv,lv=Object.prototype,cv=lv.toString;function dv(r){return cv.call(r)}var uv=dv,vo=Or,hv=ov,fv=uv,mv="[object Null]",gv="[object Undefined]",yo=vo?vo.toStringTag:void 0;function pv(r){return r==null?r===void 0?gv:mv:yo&&yo in Object(r)?hv(r):fv(r)}var Mr=pv;function vv(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var jt=vv,yv=Mr,bv=jt,wv="[object AsyncFunction]",xv="[object Function]",_v="[object GeneratorFunction]",jv="[object Proxy]";function Sv(r){if(!bv(r))return!1;var e=yv(r);return e==xv||e==_v||e==wv||e==jv}var ii=Sv,Nv=9007199254740991;function Ev(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Nv}var oi=Ev,Tv=ii,kv=oi;function $v(r){return r!=null&&kv(r.length)&&!Tv(r)}var _n=$v,Dv=9007199254740991,Ov=/^(?:0|[1-9]\d*)$/;function Mv(r,e){var t=typeof r;return e=e??Dv,!!e&&(t=="number"||t!="symbol"&&Ov.test(r))&&r>-1&&r%1==0&&r<e}var li=Mv,Cv=xn,Pv=_n,Av=li,Rv=jt;function Iv(r,e,t){if(!Rv(t))return!1;var n=typeof e;return(n=="number"?Pv(t)&&Av(e,t.length):n=="string"&&e in t)?Cv(t[e],r):!1}var Ts=Iv,Lv=/\s/;function Fv(r){for(var e=r.length;e--&&Lv.test(r.charAt(e)););return e}var Uv=Fv,Hv=Uv,Wv=/^\s+/;function Bv(r){return r&&r.slice(0,Hv(r)+1).replace(Wv,"")}var qv=Bv;function zv(r){return r!=null&&typeof r=="object"}var It=zv,Gv=Mr,Yv=It,Vv="[object Symbol]";function Kv(r){return typeof r=="symbol"||Yv(r)&&Gv(r)==Vv}var jn=Kv,Xv=qv,bo=jt,Jv=jn,wo=NaN,Qv=/^[-+]0x[0-9a-f]+$/i,Zv=/^0b[01]+$/i,ey=/^0o[0-7]+$/i,ty=parseInt;function ry(r){if(typeof r=="number")return r;if(Jv(r))return wo;if(bo(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=bo(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=Xv(r);var t=Zv.test(r);return t||ey.test(r)?ty(r.slice(2),t?2:8):Qv.test(r)?wo:+r}var ny=ry,sy=ny,xo=1/0,ay=17976931348623157e292;function iy(r){if(!r)return r===0?r:0;if(r=sy(r),r===xo||r===-xo){var e=r<0?-1:1;return e*ay}return r===r?r:0}var od=iy,oy=od;function ly(r){var e=oy(r),t=e%1;return e===e?t?e-t:e:0}var ld=ly,cy=sd,dy=Ts,uy=ld,hy=Math.ceil,fy=Math.max;function my(r,e,t){(t?dy(r,e,t):e===void 0)?e=1:e=fy(uy(e),0);var n=r==null?0:r.length;if(!n||e<1)return[];for(var s=0,a=0,i=Array(hy(n/e));s<n;)i[a++]=cy(r,s,s+=e);return i}var gy=my;const py=Je(gy);function Sn(r){return r&&r.ownerDocument||document}function vy(r){var e=Sn(r);return e&&e.defaultView||window}function yy(r,e){return vy(r).getComputedStyle(r,e)}var by=/([A-Z])/g;function wy(r){return r.replace(by,"-$1").toLowerCase()}var xy=/^ms-/;function Un(r){return wy(r).replace(xy,"-ms-")}var _y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function jy(r){return!!(r&&_y.test(r))}function mr(r,e){var t="",n="";if(typeof e=="string")return r.style.getPropertyValue(Un(e))||yy(r).getPropertyValue(Un(e));Object.keys(e).forEach(function(s){var a=e[s];!a&&a!==0?r.style.removeProperty(Un(s)):jy(s)?n+=s+"("+a+") ":t+=Un(s)+": "+a+";"}),n&&(t+="transform: "+n+";"),r.style.cssText+=";"+t}function un(r,e){if(r.contains)return r.contains(e);if(r.compareDocumentPosition)return r===e||!!(r.compareDocumentPosition(e)&16)}function Sy(r){return"nodeType"in r&&r.nodeType===document.DOCUMENT_NODE}function ci(r){return"window"in r&&r.window===r?r:Sy(r)&&r.defaultView||!1}function cd(r){var e=r==="pageXOffset"?"scrollLeft":"scrollTop";function t(n,s){var a=ci(n);if(s===void 0)return a?a[r]:n[e];a?a.scrollTo(a[r],s):n[e]=s}return t}const dd=cd("pageXOffset"),ud=cd("pageYOffset");function Vt(r){var e=Sn(r),t={top:0,left:0,height:0,width:0},n=e&&e.documentElement;return!n||!un(n,r)||(r.getBoundingClientRect!==void 0&&(t=r.getBoundingClientRect()),t={top:t.top+ud(n)-(n.clientTop||0),left:t.left+dd(n)-(n.clientLeft||0),width:t.width,height:t.height}),t}var Ny=function(e){return!!e&&"offsetParent"in e};function Ey(r){for(var e=Sn(r),t=r&&r.offsetParent;Ny(t)&&t.nodeName!=="HTML"&&mr(t,"position")==="static";)t=t.offsetParent;return t||e.documentElement}var Ty=function(e){return e.nodeName&&e.nodeName.toLowerCase()};function hd(r,e){var t={top:0,left:0},n;if(mr(r,"position")==="fixed")n=r.getBoundingClientRect();else{var s=e||Ey(r);n=Vt(r),Ty(s)!=="html"&&(t=Vt(s));var a=String(mr(s,"borderTopWidth")||0);t.top+=parseInt(a,10)-ud(s)||0;var i=String(mr(s,"borderLeftWidth")||0);t.left+=parseInt(i,10)-dd(s)||0}var l=String(mr(r,"marginTop")||0),c=String(mr(r,"marginLeft")||0);return _e({},n,{top:n.top-t.top-(parseInt(l,10)||0),left:n.left-t.left-(parseInt(c,10)||0)})}const di=!!(typeof window<"u"&&window.document&&window.document.createElement);var _o=new Date().getTime();function ky(r){var e=new Date().getTime(),t=Math.max(0,16-(e-_o)),n=setTimeout(r,t);return _o=e,n}var $y=["","webkit","moz","o","ms"],Ta="clearTimeout",ka=ky,jo=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};di&&$y.some(function(r){var e=jo(r,"request");return e in window&&(Ta=jo(r,"cancel"),ka=function(n){return window[e](n)}),!!ka});var So=function(e){typeof window[Ta]=="function"&&window[Ta](e)},fd=ka,ta;function Dy(r,e){if(!ta){var t=document.body,n=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;ta=function(a,i){return n.call(a,i)}}return ta(r,e)}var Oy=Function.prototype.bind.call(Function.prototype.call,[].slice);function My(r,e){return Oy(r.querySelectorAll(e))}var $a=!1,Da=!1;try{var ra={get passive(){return $a=!0},get once(){return Da=$a=!0}};di&&(window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,!0))}catch{}function Cy(r,e,t,n){if(n&&typeof n!="boolean"&&!Da){var s=n.once,a=n.capture,i=t;!Da&&s&&(i=t.__once||function l(c){this.removeEventListener(e,l,a),t.call(this,c)},t.__once=i),r.addEventListener(e,i,$a?n:a)}r.addEventListener(e,t,n)}function Py(r){const e=E.useRef(r);return E.useEffect(()=>{e.current=r},[r]),e}function No(r){const e=Py(r);return E.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function Eo(){return E.useState(null)}function Ay(){const r=E.useRef(!0),e=E.useRef(()=>r.current);return E.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),e.current}function Ry(r){const e=Ay();return[r[0],E.useCallback(t=>{if(e())return r[1](t)},[e,r[1]])]}var We="top",Ke="bottom",Xe="right",Be="left",ui="auto",Nn=[We,Ke,Xe,Be],xr="start",hn="end",Iy="clippingParents",md="viewport",qr="popper",Ly="reference",To=Nn.reduce(function(r,e){return r.concat([e+"-"+xr,e+"-"+hn])},[]),hi=[].concat(Nn,[ui]).reduce(function(r,e){return r.concat([e,e+"-"+xr,e+"-"+hn])},[]),Fy="beforeRead",Uy="read",Hy="afterRead",Wy="beforeMain",By="main",qy="afterMain",zy="beforeWrite",Gy="write",Yy="afterWrite",Vy=[Fy,Uy,Hy,Wy,By,qy,zy,Gy,Yy];function lt(r){return r.split("-")[0]}function Ge(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function rr(r){var e=Ge(r).Element;return r instanceof e||r instanceof Element}function ct(r){var e=Ge(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function fi(r){if(typeof ShadowRoot>"u")return!1;var e=Ge(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}var Kt=Math.max,cs=Math.min,_r=Math.round;function Oa(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function gd(){return!/^((?!chrome|android).)*safari/i.test(Oa())}function jr(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=r.getBoundingClientRect(),s=1,a=1;e&&ct(r)&&(s=r.offsetWidth>0&&_r(n.width)/r.offsetWidth||1,a=r.offsetHeight>0&&_r(n.height)/r.offsetHeight||1);var i=rr(r)?Ge(r):window,l=i.visualViewport,c=!gd()&&t,d=(n.left+(c&&l?l.offsetLeft:0))/s,u=(n.top+(c&&l?l.offsetTop:0))/a,h=n.width/s,f=n.height/a;return{width:h,height:f,top:u,right:d+h,bottom:u+f,left:d,x:d,y:u}}function mi(r){var e=jr(r),t=r.offsetWidth,n=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:n}}function pd(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&fi(t)){var n=e;do{if(n&&r.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Pt(r){return r?(r.nodeName||"").toLowerCase():null}function xt(r){return Ge(r).getComputedStyle(r)}function Ky(r){return["table","td","th"].indexOf(Pt(r))>=0}function Lt(r){return((rr(r)?r.ownerDocument:r.document)||window.document).documentElement}function ks(r){return Pt(r)==="html"?r:r.assignedSlot||r.parentNode||(fi(r)?r.host:null)||Lt(r)}function ko(r){return!ct(r)||xt(r).position==="fixed"?null:r.offsetParent}function Xy(r){var e=/firefox/i.test(Oa()),t=/Trident/i.test(Oa());if(t&&ct(r)){var n=xt(r);if(n.position==="fixed")return null}var s=ks(r);for(fi(s)&&(s=s.host);ct(s)&&["html","body"].indexOf(Pt(s))<0;){var a=xt(s);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return s;s=s.parentNode}return null}function En(r){for(var e=Ge(r),t=ko(r);t&&Ky(t)&&xt(t).position==="static";)t=ko(t);return t&&(Pt(t)==="html"||Pt(t)==="body"&&xt(t).position==="static")?e:t||Xy(r)||e}function gi(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function Xr(r,e,t){return Kt(r,cs(e,t))}function Jy(r,e,t){var n=Xr(r,e,t);return n>t?t:n}function vd(){return{top:0,right:0,bottom:0,left:0}}function yd(r){return Object.assign({},vd(),r)}function bd(r,e){return e.reduce(function(t,n){return t[n]=r,t},{})}var Qy=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,yd(typeof e!="number"?e:bd(e,Nn))};function Zy(r){var e,t=r.state,n=r.name,s=r.options,a=t.elements.arrow,i=t.modifiersData.popperOffsets,l=lt(t.placement),c=gi(l),d=[Be,Xe].indexOf(l)>=0,u=d?"height":"width";if(!(!a||!i)){var h=Qy(s.padding,t),f=mi(a),m=c==="y"?We:Be,v=c==="y"?Ke:Xe,g=t.rects.reference[u]+t.rects.reference[c]-i[c]-t.rects.popper[u],p=i[c]-t.rects.reference[c],y=En(a),b=y?c==="y"?y.clientHeight||0:y.clientWidth||0:0,x=g/2-p/2,w=h[m],j=b-f[u]-h[v],T=b/2-f[u]/2+x,_=Xr(w,T,j),N=c;t.modifiersData[n]=(e={},e[N]=_,e.centerOffset=_-T,e)}}function e0(r){var e=r.state,t=r.options,n=t.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||pd(e.elements.popper,s)&&(e.elements.arrow=s))}const t0={name:"arrow",enabled:!0,phase:"main",fn:Zy,effect:e0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sr(r){return r.split("-")[1]}var r0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function n0(r,e){var t=r.x,n=r.y,s=e.devicePixelRatio||1;return{x:_r(t*s)/s||0,y:_r(n*s)/s||0}}function $o(r){var e,t=r.popper,n=r.popperRect,s=r.placement,a=r.variation,i=r.offsets,l=r.position,c=r.gpuAcceleration,d=r.adaptive,u=r.roundOffsets,h=r.isFixed,f=i.x,m=f===void 0?0:f,v=i.y,g=v===void 0?0:v,p=typeof u=="function"?u({x:m,y:g}):{x:m,y:g};m=p.x,g=p.y;var y=i.hasOwnProperty("x"),b=i.hasOwnProperty("y"),x=Be,w=We,j=window;if(d){var T=En(t),_="clientHeight",N="clientWidth";if(T===Ge(t)&&(T=Lt(t),xt(T).position!=="static"&&l==="absolute"&&(_="scrollHeight",N="scrollWidth")),T=T,s===We||(s===Be||s===Xe)&&a===hn){w=Ke;var O=h&&T===j&&j.visualViewport?j.visualViewport.height:T[_];g-=O-n.height,g*=c?1:-1}if(s===Be||(s===We||s===Ke)&&a===hn){x=Xe;var P=h&&T===j&&j.visualViewport?j.visualViewport.width:T[N];m-=P-n.width,m*=c?1:-1}}var C=Object.assign({position:l},d&&r0),A=u===!0?n0({x:m,y:g},Ge(t)):{x:m,y:g};if(m=A.x,g=A.y,c){var I;return Object.assign({},C,(I={},I[w]=b?"0":"",I[x]=y?"0":"",I.transform=(j.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",I))}return Object.assign({},C,(e={},e[w]=b?g+"px":"",e[x]=y?m+"px":"",e.transform="",e))}function s0(r){var e=r.state,t=r.options,n=t.gpuAcceleration,s=n===void 0?!0:n,a=t.adaptive,i=a===void 0?!0:a,l=t.roundOffsets,c=l===void 0?!0:l,d={placement:lt(e.placement),variation:Sr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,$o(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,$o(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const a0={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:s0,data:{}};var Hn={passive:!0};function i0(r){var e=r.state,t=r.instance,n=r.options,s=n.scroll,a=s===void 0?!0:s,i=n.resize,l=i===void 0?!0:i,c=Ge(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(u){u.addEventListener("scroll",t.update,Hn)}),l&&c.addEventListener("resize",t.update,Hn),function(){a&&d.forEach(function(u){u.removeEventListener("scroll",t.update,Hn)}),l&&c.removeEventListener("resize",t.update,Hn)}}const o0={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:i0,data:{}};var l0={left:"right",right:"left",bottom:"top",top:"bottom"};function Xn(r){return r.replace(/left|right|bottom|top/g,function(e){return l0[e]})}var c0={start:"end",end:"start"};function Do(r){return r.replace(/start|end/g,function(e){return c0[e]})}function pi(r){var e=Ge(r),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function vi(r){return jr(Lt(r)).left+pi(r).scrollLeft}function d0(r,e){var t=Ge(r),n=Lt(r),s=t.visualViewport,a=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;var d=gd();(d||!d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l+vi(r),y:c}}function u0(r){var e,t=Lt(r),n=pi(r),s=(e=r.ownerDocument)==null?void 0:e.body,a=Kt(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),i=Kt(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-n.scrollLeft+vi(r),c=-n.scrollTop;return xt(s||t).direction==="rtl"&&(l+=Kt(t.clientWidth,s?s.clientWidth:0)-a),{width:a,height:i,x:l,y:c}}function yi(r){var e=xt(r),t=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+n)}function wd(r){return["html","body","#document"].indexOf(Pt(r))>=0?r.ownerDocument.body:ct(r)&&yi(r)?r:wd(ks(r))}function Jr(r,e){var t;e===void 0&&(e=[]);var n=wd(r),s=n===((t=r.ownerDocument)==null?void 0:t.body),a=Ge(n),i=s?[a].concat(a.visualViewport||[],yi(n)?n:[]):n,l=e.concat(i);return s?l:l.concat(Jr(ks(i)))}function Ma(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function h0(r,e){var t=jr(r,!1,e==="fixed");return t.top=t.top+r.clientTop,t.left=t.left+r.clientLeft,t.bottom=t.top+r.clientHeight,t.right=t.left+r.clientWidth,t.width=r.clientWidth,t.height=r.clientHeight,t.x=t.left,t.y=t.top,t}function Oo(r,e,t){return e===md?Ma(d0(r,t)):rr(e)?h0(e,t):Ma(u0(Lt(r)))}function f0(r){var e=Jr(ks(r)),t=["absolute","fixed"].indexOf(xt(r).position)>=0,n=t&&ct(r)?En(r):r;return rr(n)?e.filter(function(s){return rr(s)&&pd(s,n)&&Pt(s)!=="body"}):[]}function m0(r,e,t,n){var s=e==="clippingParents"?f0(r):[].concat(e),a=[].concat(s,[t]),i=a[0],l=a.reduce(function(c,d){var u=Oo(r,d,n);return c.top=Kt(u.top,c.top),c.right=cs(u.right,c.right),c.bottom=cs(u.bottom,c.bottom),c.left=Kt(u.left,c.left),c},Oo(r,i,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function xd(r){var e=r.reference,t=r.element,n=r.placement,s=n?lt(n):null,a=n?Sr(n):null,i=e.x+e.width/2-t.width/2,l=e.y+e.height/2-t.height/2,c;switch(s){case We:c={x:i,y:e.y-t.height};break;case Ke:c={x:i,y:e.y+e.height};break;case Xe:c={x:e.x+e.width,y:l};break;case Be:c={x:e.x-t.width,y:l};break;default:c={x:e.x,y:e.y}}var d=s?gi(s):null;if(d!=null){var u=d==="y"?"height":"width";switch(a){case xr:c[d]=c[d]-(e[u]/2-t[u]/2);break;case hn:c[d]=c[d]+(e[u]/2-t[u]/2);break}}return c}function fn(r,e){e===void 0&&(e={});var t=e,n=t.placement,s=n===void 0?r.placement:n,a=t.strategy,i=a===void 0?r.strategy:a,l=t.boundary,c=l===void 0?Iy:l,d=t.rootBoundary,u=d===void 0?md:d,h=t.elementContext,f=h===void 0?qr:h,m=t.altBoundary,v=m===void 0?!1:m,g=t.padding,p=g===void 0?0:g,y=yd(typeof p!="number"?p:bd(p,Nn)),b=f===qr?Ly:qr,x=r.rects.popper,w=r.elements[v?b:f],j=m0(rr(w)?w:w.contextElement||Lt(r.elements.popper),c,u,i),T=jr(r.elements.reference),_=xd({reference:T,element:x,strategy:"absolute",placement:s}),N=Ma(Object.assign({},x,_)),O=f===qr?N:T,P={top:j.top-O.top+y.top,bottom:O.bottom-j.bottom+y.bottom,left:j.left-O.left+y.left,right:O.right-j.right+y.right},C=r.modifiersData.offset;if(f===qr&&C){var A=C[s];Object.keys(P).forEach(function(I){var Y=[Xe,Ke].indexOf(I)>=0?1:-1,Z=[We,Ke].indexOf(I)>=0?"y":"x";P[I]+=A[Z]*Y})}return P}function g0(r,e){e===void 0&&(e={});var t=e,n=t.placement,s=t.boundary,a=t.rootBoundary,i=t.padding,l=t.flipVariations,c=t.allowedAutoPlacements,d=c===void 0?hi:c,u=Sr(n),h=u?l?To:To.filter(function(v){return Sr(v)===u}):Nn,f=h.filter(function(v){return d.indexOf(v)>=0});f.length===0&&(f=h);var m=f.reduce(function(v,g){return v[g]=fn(r,{placement:g,boundary:s,rootBoundary:a,padding:i})[lt(g)],v},{});return Object.keys(m).sort(function(v,g){return m[v]-m[g]})}function p0(r){if(lt(r)===ui)return[];var e=Xn(r);return[Do(r),e,Do(e)]}function v0(r){var e=r.state,t=r.options,n=r.name;if(!e.modifiersData[n]._skip){for(var s=t.mainAxis,a=s===void 0?!0:s,i=t.altAxis,l=i===void 0?!0:i,c=t.fallbackPlacements,d=t.padding,u=t.boundary,h=t.rootBoundary,f=t.altBoundary,m=t.flipVariations,v=m===void 0?!0:m,g=t.allowedAutoPlacements,p=e.options.placement,y=lt(p),b=y===p,x=c||(b||!v?[Xn(p)]:p0(p)),w=[p].concat(x).reduce(function(G,V){return G.concat(lt(V)===ui?g0(e,{placement:V,boundary:u,rootBoundary:h,padding:d,flipVariations:v,allowedAutoPlacements:g}):V)},[]),j=e.rects.reference,T=e.rects.popper,_=new Map,N=!0,O=w[0],P=0;P<w.length;P++){var C=w[P],A=lt(C),I=Sr(C)===xr,Y=[We,Ke].indexOf(A)>=0,Z=Y?"width":"height",X=fn(e,{placement:C,boundary:u,rootBoundary:h,altBoundary:f,padding:d}),te=Y?I?Xe:Be:I?Ke:We;j[Z]>T[Z]&&(te=Xn(te));var J=Xn(te),de=[];if(a&&de.push(X[A]<=0),l&&de.push(X[te]<=0,X[J]<=0),de.every(function(G){return G})){O=C,N=!1;break}_.set(C,de)}if(N)for(var $=v?3:1,S=function(V){var M=w.find(function(L){var z=_.get(L);if(z)return z.slice(0,V).every(function(K){return K})});if(M)return O=M,"break"},D=$;D>0;D--){var R=S(D);if(R==="break")break}e.placement!==O&&(e.modifiersData[n]._skip=!0,e.placement=O,e.reset=!0)}}const y0={name:"flip",enabled:!0,phase:"main",fn:v0,requiresIfExists:["offset"],data:{_skip:!1}};function Mo(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function Co(r){return[We,Xe,Ke,Be].some(function(e){return r[e]>=0})}function b0(r){var e=r.state,t=r.name,n=e.rects.reference,s=e.rects.popper,a=e.modifiersData.preventOverflow,i=fn(e,{elementContext:"reference"}),l=fn(e,{altBoundary:!0}),c=Mo(i,n),d=Mo(l,s,a),u=Co(c),h=Co(d);e.modifiersData[t]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const w0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:b0};function x0(r,e,t){var n=lt(r),s=[Be,We].indexOf(n)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,i=a[0],l=a[1];return i=i||0,l=(l||0)*s,[Be,Xe].indexOf(n)>=0?{x:l,y:i}:{x:i,y:l}}function _0(r){var e=r.state,t=r.options,n=r.name,s=t.offset,a=s===void 0?[0,0]:s,i=hi.reduce(function(u,h){return u[h]=x0(h,e.rects,a),u},{}),l=i[e.placement],c=l.x,d=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=d),e.modifiersData[n]=i}const j0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_0};function S0(r){var e=r.state,t=r.name;e.modifiersData[t]=xd({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const N0={name:"popperOffsets",enabled:!0,phase:"read",fn:S0,data:{}};function E0(r){return r==="x"?"y":"x"}function T0(r){var e=r.state,t=r.options,n=r.name,s=t.mainAxis,a=s===void 0?!0:s,i=t.altAxis,l=i===void 0?!1:i,c=t.boundary,d=t.rootBoundary,u=t.altBoundary,h=t.padding,f=t.tether,m=f===void 0?!0:f,v=t.tetherOffset,g=v===void 0?0:v,p=fn(e,{boundary:c,rootBoundary:d,padding:h,altBoundary:u}),y=lt(e.placement),b=Sr(e.placement),x=!b,w=gi(y),j=E0(w),T=e.modifiersData.popperOffsets,_=e.rects.reference,N=e.rects.popper,O=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,P=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),C=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(T){if(a){var I,Y=w==="y"?We:Be,Z=w==="y"?Ke:Xe,X=w==="y"?"height":"width",te=T[w],J=te+p[Y],de=te-p[Z],$=m?-N[X]/2:0,S=b===xr?_[X]:N[X],D=b===xr?-N[X]:-_[X],R=e.elements.arrow,G=m&&R?mi(R):{width:0,height:0},V=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:vd(),M=V[Y],L=V[Z],z=Xr(0,_[X],G[X]),K=x?_[X]/2-$-z-M-P.mainAxis:S-z-M-P.mainAxis,H=x?-_[X]/2+$+z+L+P.mainAxis:D+z+L+P.mainAxis,F=e.elements.arrow&&En(e.elements.arrow),B=F?w==="y"?F.clientTop||0:F.clientLeft||0:0,ne=(I=C==null?void 0:C[w])!=null?I:0,Q=te+K-ne-B,se=te+H-ne,le=Xr(m?cs(J,Q):J,te,m?Kt(de,se):de);T[w]=le,A[w]=le-te}if(l){var oe,Le=w==="x"?We:Be,Pe=w==="x"?Ke:Xe,pe=T[j],ht=j==="y"?"height":"width",lr=pe+p[Le],Ut=pe-p[Pe],St=[We,Be].indexOf(y)!==-1,Nt=(oe=C==null?void 0:C[j])!=null?oe:0,rt=St?lr:pe-_[ht]-N[ht]-Nt+P.altAxis,q=St?pe+_[ht]+N[ht]-Nt-P.altAxis:Ut,ee=m&&St?Jy(rt,pe,q):Xr(m?rt:lr,pe,m?q:Ut);T[j]=ee,A[j]=ee-pe}e.modifiersData[n]=A}}const k0={name:"preventOverflow",enabled:!0,phase:"main",fn:T0,requiresIfExists:["offset"]};function $0(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function D0(r){return r===Ge(r)||!ct(r)?pi(r):$0(r)}function O0(r){var e=r.getBoundingClientRect(),t=_r(e.width)/r.offsetWidth||1,n=_r(e.height)/r.offsetHeight||1;return t!==1||n!==1}function M0(r,e,t){t===void 0&&(t=!1);var n=ct(e),s=ct(e)&&O0(e),a=Lt(e),i=jr(r,s,t),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!t)&&((Pt(e)!=="body"||yi(a))&&(l=D0(e)),ct(e)?(c=jr(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):a&&(c.x=vi(a))),{x:i.left+l.scrollLeft-c.x,y:i.top+l.scrollTop-c.y,width:i.width,height:i.height}}function C0(r){var e=new Map,t=new Set,n=[];r.forEach(function(a){e.set(a.name,a)});function s(a){t.add(a.name);var i=[].concat(a.requires||[],a.requiresIfExists||[]);i.forEach(function(l){if(!t.has(l)){var c=e.get(l);c&&s(c)}}),n.push(a)}return r.forEach(function(a){t.has(a.name)||s(a)}),n}function P0(r){var e=C0(r);return Vy.reduce(function(t,n){return t.concat(e.filter(function(s){return s.phase===n}))},[])}function A0(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function R0(r){var e=r.reduce(function(t,n){var s=t[n.name];return t[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var Po={placement:"bottom",modifiers:[],strategy:"absolute"};function Ao(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function I0(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,n=t===void 0?[]:t,s=e.defaultOptions,a=s===void 0?Po:s;return function(l,c,d){d===void 0&&(d=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Po,a),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],f=!1,m={state:u,setOptions:function(y){var b=typeof y=="function"?y(u.options):y;g(),u.options=Object.assign({},a,u.options,b),u.scrollParents={reference:rr(l)?Jr(l):l.contextElement?Jr(l.contextElement):[],popper:Jr(c)};var x=P0(R0([].concat(n,u.options.modifiers)));return u.orderedModifiers=x.filter(function(w){return w.enabled}),v(),m.update()},forceUpdate:function(){if(!f){var y=u.elements,b=y.reference,x=y.popper;if(Ao(b,x)){u.rects={reference:M0(b,En(x),u.options.strategy==="fixed"),popper:mi(x)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(P){return u.modifiersData[P.name]=Object.assign({},P.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var j=u.orderedModifiers[w],T=j.fn,_=j.options,N=_===void 0?{}:_,O=j.name;typeof T=="function"&&(u=T({state:u,options:N,name:O,instance:m})||u)}}}},update:A0(function(){return new Promise(function(p){m.forceUpdate(),p(u)})}),destroy:function(){g(),f=!0}};if(!Ao(l,c))return m;m.setOptions(d).then(function(p){!f&&d.onFirstUpdate&&d.onFirstUpdate(p)});function v(){u.orderedModifiers.forEach(function(p){var y=p.name,b=p.options,x=b===void 0?{}:b,w=p.effect;if(typeof w=="function"){var j=w({state:u,name:y,instance:m,options:x}),T=function(){};h.push(j||T)}})}function g(){h.forEach(function(p){return p()}),h=[]}return m}}var L0=I0({defaultModifiers:[w0,N0,a0,o0,j0,y0,k0,t0]}),Ro=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},F0={name:"applyStyles",enabled:!1},U0={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var n=t.elements,s=n.reference,a=n.popper;if("removeAttribute"in s){var i=(s.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==a.id});i.length?s.setAttribute("aria-describedby",i.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state,s=n.elements,a=s.popper,i=s.reference,l=(t=a.getAttribute("role"))==null?void 0:t.toLowerCase();if(a.id&&l==="tooltip"&&"setAttribute"in i){var c=i.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(a.id)!==-1)return;i.setAttribute("aria-describedby",c?c+","+a.id:a.id)}}},H0=[];function W0(r,e,t){var n=t===void 0?{}:t,s=n.enabled,a=s===void 0?!0:s,i=n.placement,l=i===void 0?"bottom":i,c=n.strategy,d=c===void 0?"absolute":c,u=n.modifiers,h=u===void 0?H0:u,f=Ns(n,["enabled","placement","strategy","modifiers"]),m=E.useRef(),v=E.useCallback(function(){var w;(w=m.current)==null||w.update()},[]),g=E.useCallback(function(){var w;(w=m.current)==null||w.forceUpdate()},[]),p=Ry(E.useState({placement:l,update:v,forceUpdate:g,attributes:{},styles:{popper:Ro(d),arrow:{}}})),y=p[0],b=p[1],x=E.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(j){var T=j.state,_={},N={};Object.keys(T.elements).forEach(function(O){_[O]=T.styles[O],N[O]=T.attributes[O]}),b({state:T,styles:_,attributes:N,update:v,forceUpdate:g,placement:T.placement})}}},[v,g,b]);return E.useEffect(function(){!m.current||!a||m.current.setOptions({placement:l,strategy:d,modifiers:[].concat(h,[x,F0])})},[d,l,x,a]),E.useEffect(function(){if(!(!a||r==null||e==null))return m.current=L0(r,e,_e({},f,{placement:l,strategy:d,modifiers:[].concat(h,[U0,x])})),function(){m.current!=null&&(m.current.destroy(),m.current=void 0,b(function(w){return _e({},w,{attributes:{},styles:{popper:Ro(d)}})}))}},[a,r,e]),y}function B0(r,e,t,n){var s=n&&typeof n!="boolean"?n.capture:n;r.removeEventListener(e,t,s),t.__once&&r.removeEventListener(e,t.__once,s)}function Yr(r,e,t,n){return Cy(r,e,t,n),function(){B0(r,e,t,n)}}var q0=function(){},z0=q0;const G0=Je(z0);function Y0(r){return r&&"setState"in r?Hl.findDOMNode(r):r??null}const V0=function(r){return Sn(Y0(r))};var K0=27,Io=function(){};function X0(r){return r.button===0}function J0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}var Lo=function(e){return e&&("current"in e?e.current:e)};function Q0(r,e,t){var n=t===void 0?{}:t,s=n.disabled,a=n.clickTrigger,i=a===void 0?"click":a,l=E.useRef(!1),c=e||Io,d=E.useCallback(function(f){var m,v=Lo(r);G0(!!v,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!v||J0(f)||!X0(f)||!!un(v,(m=f.composedPath==null?void 0:f.composedPath()[0])!=null?m:f.target)},[r]),u=No(function(f){l.current||c(f)}),h=No(function(f){f.keyCode===K0&&c(f)});E.useEffect(function(){if(!(s||r==null)){var f=window.event,m=V0(Lo(r)),v=Yr(m,i,d,!0),g=Yr(m,i,function(b){if(b===f){f=void 0;return}u(b)}),p=Yr(m,"keyup",function(b){if(b===f){f=void 0;return}h(b)}),y=[];return"ontouchstart"in m.documentElement&&(y=[].slice.call(m.body.children).map(function(b){return Yr(b,"mousemove",Io)})),function(){v(),g(),p(),y.forEach(function(b){return b()})}}},[r,s,i,d,u,h])}function Z0(r){var e={};return Array.isArray(r)?(r==null||r.forEach(function(t){e[t.name]=t}),e):r||e}function eb(r){return r===void 0&&(r={}),Array.isArray(r)?r:Object.keys(r).map(function(e){return r[e].name=e,r[e]})}function tb(r){var e,t,n,s,a=r.enabled,i=r.enableEvents,l=r.placement,c=r.flip,d=r.offset,u=r.fixed,h=r.containerPadding,f=r.arrowElement,m=r.popperConfig,v=m===void 0?{}:m,g=Z0(v.modifiers);return _e({},v,{placement:l,enabled:a,strategy:u?"fixed":v.strategy,modifiers:eb(_e({},g,{eventListeners:{enabled:i},preventOverflow:_e({},g.preventOverflow,{options:h?_e({padding:h},(e=g.preventOverflow)==null?void 0:e.options):(t=g.preventOverflow)==null?void 0:t.options}),offset:{options:_e({offset:d},(n=g.offset)==null?void 0:n.options)},arrow:_e({},g.arrow,{enabled:!!f,options:_e({},(s=g.arrow)==null?void 0:s.options,{element:f})}),flip:_e({enabled:!!c},g.flip)}))})}function rb(r,e){return r.classList?r.classList.contains(e):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+e+" ")!==-1}function nb(r,e){r.classList?r.classList.add(e):rb(r,e)||(typeof r.className=="string"?r.className=r.className+" "+e:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+e))}function Fo(r,e){return r.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function sb(r,e){r.classList?r.classList.remove(e):typeof r.className=="string"?r.className=Fo(r.className,e):r.setAttribute("class",Fo(r.className&&r.className.baseVal||"",e))}var Wn;function bi(r){if((!Wn&&Wn!==0||r)&&di){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Wn=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Wn}var na=function(e){var t;return typeof document>"u"?null:e==null?Sn().body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),(t=e)!=null&&t.nodeType&&e||null)};function Uo(r,e){var t=E.useState(function(){return na(r)}),n=t[0],s=t[1];if(!n){var a=na(r);a&&s(a)}return E.useEffect(function(){},[e,n]),E.useEffect(function(){var i=na(r);i!==n&&s(i)},[r,n]),n}const Ho=r=>!r||typeof r=="function"?r:e=>{r.current=e};function ab(r,e){const t=Ho(r),n=Ho(e);return s=>{t&&t(s),n&&n(s)}}function ib(r,e){return E.useMemo(()=>ab(r,e),[r,e])}var wi=k.forwardRef(function(r,e){var t=r.flip,n=r.offset,s=r.placement,a=r.containerPadding,i=a===void 0?5:a,l=r.popperConfig,c=l===void 0?{}:l,d=r.transition,u=Eo(),h=u[0],f=u[1],m=Eo(),v=m[0],g=m[1],p=ib(f,e),y=Uo(r.container),b=Uo(r.target),x=E.useState(!r.show),w=x[0],j=x[1],T=W0(b,h,tb({placement:s,enableEvents:!!r.show,containerPadding:i||5,flip:t,offset:n,arrowElement:v,popperConfig:c})),_=T.styles,N=T.attributes,O=Ns(T,["styles","attributes"]);r.show?w&&j(!1):!r.transition&&!w&&j(!0);var P=function(){j(!0),r.onExited&&r.onExited.apply(r,arguments)},C=r.show||d&&!w;if(Q0(h,r.onHide,{disabled:!r.rootClose||r.rootCloseDisabled,clickTrigger:r.rootCloseEvent}),!C)return null;var A=r.children(_e({},O,{show:!!r.show,props:_e({},N.popper,{style:_.popper,ref:p}),arrowProps:_e({},N.arrow,{style:_.arrow,ref:g})}));if(d){var I=r.onExit,Y=r.onExiting,Z=r.onEnter,X=r.onEntering,te=r.onEntered;A=k.createElement(d,{in:r.show,appear:!0,onExit:I,onExiting:Y,onExited:P,onEnter:Z,onEntering:X,onEntered:te},A)}return y?Hl.createPortal(A,y):null});wi.displayName="Overlay";wi.propTypes={show:U.bool,placement:U.oneOf(hi),target:U.any,container:U.any,flip:U.bool,children:U.func.isRequired,containerPadding:U.number,popperConfig:U.object,rootClose:U.bool,rootCloseEvent:U.oneOf(["click","mousedown"]),rootCloseDisabled:U.bool,onHide:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e.rootClose){var a;return(a=U.func).isRequired.apply(a,[e].concat(n))}return U.func.apply(U,[e].concat(n))},transition:U.elementType,onEnter:U.func,onEntering:U.func,onEntered:U.func,onExit:U.func,onExiting:U.func,onExited:U.func};function ob(){this.__data__=[],this.size=0}var lb=ob,cb=xn;function db(r,e){for(var t=r.length;t--;)if(cb(r[t][0],e))return t;return-1}var $s=db,ub=$s,hb=Array.prototype,fb=hb.splice;function mb(r){var e=this.__data__,t=ub(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():fb.call(e,t,1),--this.size,!0}var gb=mb,pb=$s;function vb(r){var e=this.__data__,t=pb(e,r);return t<0?void 0:e[t][1]}var yb=vb,bb=$s;function wb(r){return bb(this.__data__,r)>-1}var xb=wb,_b=$s;function jb(r,e){var t=this.__data__,n=_b(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var Sb=jb,Nb=lb,Eb=gb,Tb=yb,kb=xb,$b=Sb;function Cr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Cr.prototype.clear=Nb;Cr.prototype.delete=Eb;Cr.prototype.get=Tb;Cr.prototype.has=kb;Cr.prototype.set=$b;var Ds=Cr,Db=Ds;function Ob(){this.__data__=new Db,this.size=0}var Mb=Ob;function Cb(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}var Pb=Cb;function Ab(r){return this.__data__.get(r)}var Rb=Ab;function Ib(r){return this.__data__.has(r)}var Lb=Ib,Fb=ut,Ub=Fb["__core-js_shared__"],Hb=Ub,sa=Hb,Wo=function(){var r=/[^.]+$/.exec(sa&&sa.keys&&sa.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Wb(r){return!!Wo&&Wo in r}var Bb=Wb,qb=Function.prototype,zb=qb.toString;function Gb(r){if(r!=null){try{return zb.call(r)}catch{}try{return r+""}catch{}}return""}var _d=Gb,Yb=ii,Vb=Bb,Kb=jt,Xb=_d,Jb=/[\\^$.*+?()[\]{}|]/g,Qb=/^\[object .+?Constructor\]$/,Zb=Function.prototype,ew=Object.prototype,tw=Zb.toString,rw=ew.hasOwnProperty,nw=RegExp("^"+tw.call(rw).replace(Jb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sw(r){if(!Kb(r)||Vb(r))return!1;var e=Yb(r)?nw:Qb;return e.test(Xb(r))}var aw=sw;function iw(r,e){return r==null?void 0:r[e]}var ow=iw,lw=aw,cw=ow;function dw(r,e){var t=cw(r,e);return lw(t)?t:void 0}var ir=dw,uw=ir,hw=ut,fw=uw(hw,"Map"),xi=fw,mw=ir,gw=mw(Object,"create"),Os=gw,Bo=Os;function pw(){this.__data__=Bo?Bo(null):{},this.size=0}var vw=pw;function yw(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var bw=yw,ww=Os,xw="__lodash_hash_undefined__",_w=Object.prototype,jw=_w.hasOwnProperty;function Sw(r){var e=this.__data__;if(ww){var t=e[r];return t===xw?void 0:t}return jw.call(e,r)?e[r]:void 0}var Nw=Sw,Ew=Os,Tw=Object.prototype,kw=Tw.hasOwnProperty;function $w(r){var e=this.__data__;return Ew?e[r]!==void 0:kw.call(e,r)}var Dw=$w,Ow=Os,Mw="__lodash_hash_undefined__";function Cw(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Ow&&e===void 0?Mw:e,this}var Pw=Cw,Aw=vw,Rw=bw,Iw=Nw,Lw=Dw,Fw=Pw;function Pr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Pr.prototype.clear=Aw;Pr.prototype.delete=Rw;Pr.prototype.get=Iw;Pr.prototype.has=Lw;Pr.prototype.set=Fw;var Uw=Pr,qo=Uw,Hw=Ds,Ww=xi;function Bw(){this.size=0,this.__data__={hash:new qo,map:new(Ww||Hw),string:new qo}}var qw=Bw;function zw(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var Gw=zw,Yw=Gw;function Vw(r,e){var t=r.__data__;return Yw(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Ms=Vw,Kw=Ms;function Xw(r){var e=Kw(this,r).delete(r);return this.size-=e?1:0,e}var Jw=Xw,Qw=Ms;function Zw(r){return Qw(this,r).get(r)}var ex=Zw,tx=Ms;function rx(r){return tx(this,r).has(r)}var nx=rx,sx=Ms;function ax(r,e){var t=sx(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var ix=ax,ox=qw,lx=Jw,cx=ex,dx=nx,ux=ix;function Ar(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ar.prototype.clear=ox;Ar.prototype.delete=lx;Ar.prototype.get=cx;Ar.prototype.has=dx;Ar.prototype.set=ux;var _i=Ar,hx=Ds,fx=xi,mx=_i,gx=200;function px(r,e){var t=this.__data__;if(t instanceof hx){var n=t.__data__;if(!fx||n.length<gx-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new mx(n)}return t.set(r,e),this.size=t.size,this}var vx=px,yx=Ds,bx=Mb,wx=Pb,xx=Rb,_x=Lb,jx=vx;function Rr(r){var e=this.__data__=new yx(r);this.size=e.size}Rr.prototype.clear=bx;Rr.prototype.delete=wx;Rr.prototype.get=xx;Rr.prototype.has=_x;Rr.prototype.set=jx;var ji=Rr,Sx="__lodash_hash_undefined__";function Nx(r){return this.__data__.set(r,Sx),this}var Ex=Nx;function Tx(r){return this.__data__.has(r)}var kx=Tx,$x=_i,Dx=Ex,Ox=kx;function ds(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new $x;++e<t;)this.add(r[e])}ds.prototype.add=ds.prototype.push=Dx;ds.prototype.has=Ox;var Mx=ds;function Cx(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}var Px=Cx;function Ax(r,e){return r.has(e)}var Rx=Ax,Ix=Mx,Lx=Px,Fx=Rx,Ux=1,Hx=2;function Wx(r,e,t,n,s,a){var i=t&Ux,l=r.length,c=e.length;if(l!=c&&!(i&&c>l))return!1;var d=a.get(r),u=a.get(e);if(d&&u)return d==e&&u==r;var h=-1,f=!0,m=t&Hx?new Ix:void 0;for(a.set(r,e),a.set(e,r);++h<l;){var v=r[h],g=e[h];if(n)var p=i?n(g,v,h,e,r,a):n(v,g,h,r,e,a);if(p!==void 0){if(p)continue;f=!1;break}if(m){if(!Lx(e,function(y,b){if(!Fx(m,b)&&(v===y||s(v,y,t,n,a)))return m.push(b)})){f=!1;break}}else if(!(v===g||s(v,g,t,n,a))){f=!1;break}}return a.delete(r),a.delete(e),f}var jd=Wx,Bx=ut,qx=Bx.Uint8Array,Sd=qx;function zx(r){var e=-1,t=Array(r.size);return r.forEach(function(n,s){t[++e]=[s,n]}),t}var Gx=zx;function Yx(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var Vx=Yx,zo=Or,Go=Sd,Kx=xn,Xx=jd,Jx=Gx,Qx=Vx,Zx=1,e_=2,t_="[object Boolean]",r_="[object Date]",n_="[object Error]",s_="[object Map]",a_="[object Number]",i_="[object RegExp]",o_="[object Set]",l_="[object String]",c_="[object Symbol]",d_="[object ArrayBuffer]",u_="[object DataView]",Yo=zo?zo.prototype:void 0,aa=Yo?Yo.valueOf:void 0;function h_(r,e,t,n,s,a,i){switch(t){case u_:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case d_:return!(r.byteLength!=e.byteLength||!a(new Go(r),new Go(e)));case t_:case r_:case a_:return Kx(+r,+e);case n_:return r.name==e.name&&r.message==e.message;case i_:case l_:return r==e+"";case s_:var l=Jx;case o_:var c=n&Zx;if(l||(l=Qx),r.size!=e.size&&!c)return!1;var d=i.get(r);if(d)return d==e;n|=e_,i.set(r,e);var u=Xx(l(r),l(e),n,s,a,i);return i.delete(r),u;case c_:if(aa)return aa.call(r)==aa.call(e)}return!1}var f_=h_;function m_(r,e){for(var t=-1,n=e.length,s=r.length;++t<n;)r[s+t]=e[t];return r}var Si=m_,g_=Array.isArray,Qe=g_,p_=Si,v_=Qe;function y_(r,e,t){var n=e(r);return v_(r)?n:p_(n,t(r))}var Nd=y_;function b_(r,e){for(var t=-1,n=r==null?0:r.length,s=0,a=[];++t<n;){var i=r[t];e(i,t,r)&&(a[s++]=i)}return a}var w_=b_;function x_(){return[]}var Ed=x_,__=w_,j_=Ed,S_=Object.prototype,N_=S_.propertyIsEnumerable,Vo=Object.getOwnPropertySymbols,E_=Vo?function(r){return r==null?[]:(r=Object(r),__(Vo(r),function(e){return N_.call(r,e)}))}:j_,Ni=E_;function T_(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var k_=T_,$_=Mr,D_=It,O_="[object Arguments]";function M_(r){return D_(r)&&$_(r)==O_}var C_=M_,Ko=C_,P_=It,Td=Object.prototype,A_=Td.hasOwnProperty,R_=Td.propertyIsEnumerable,I_=Ko(function(){return arguments}())?Ko:function(r){return P_(r)&&A_.call(r,"callee")&&!R_.call(r,"callee")},Ei=I_,us={exports:{}};function L_(){return!1}var F_=L_;us.exports;(function(r,e){var t=ut,n=F_,s=e&&!e.nodeType&&e,a=s&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===s,l=i?t.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;r.exports=d})(us,us.exports);var Cs=us.exports,U_=Mr,H_=oi,W_=It,B_="[object Arguments]",q_="[object Array]",z_="[object Boolean]",G_="[object Date]",Y_="[object Error]",V_="[object Function]",K_="[object Map]",X_="[object Number]",J_="[object Object]",Q_="[object RegExp]",Z_="[object Set]",e1="[object String]",t1="[object WeakMap]",r1="[object ArrayBuffer]",n1="[object DataView]",s1="[object Float32Array]",a1="[object Float64Array]",i1="[object Int8Array]",o1="[object Int16Array]",l1="[object Int32Array]",c1="[object Uint8Array]",d1="[object Uint8ClampedArray]",u1="[object Uint16Array]",h1="[object Uint32Array]",ve={};ve[s1]=ve[a1]=ve[i1]=ve[o1]=ve[l1]=ve[c1]=ve[d1]=ve[u1]=ve[h1]=!0;ve[B_]=ve[q_]=ve[r1]=ve[z_]=ve[n1]=ve[G_]=ve[Y_]=ve[V_]=ve[K_]=ve[X_]=ve[J_]=ve[Q_]=ve[Z_]=ve[e1]=ve[t1]=!1;function f1(r){return W_(r)&&H_(r.length)&&!!ve[U_(r)]}var m1=f1;function g1(r){return function(e){return r(e)}}var Ps=g1,hs={exports:{}};hs.exports;(function(r,e){var t=ad,n=e&&!e.nodeType&&e,s=n&&!0&&r&&!r.nodeType&&r,a=s&&s.exports===n,i=a&&t.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();r.exports=l})(hs,hs.exports);var Ti=hs.exports,p1=m1,v1=Ps,Xo=Ti,Jo=Xo&&Xo.isTypedArray,y1=Jo?v1(Jo):p1,ki=y1,b1=k_,w1=Ei,x1=Qe,_1=Cs,j1=li,S1=ki,N1=Object.prototype,E1=N1.hasOwnProperty;function T1(r,e){var t=x1(r),n=!t&&w1(r),s=!t&&!n&&_1(r),a=!t&&!n&&!s&&S1(r),i=t||n||s||a,l=i?b1(r.length,String):[],c=l.length;for(var d in r)(e||E1.call(r,d))&&!(i&&(d=="length"||s&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||j1(d,c)))&&l.push(d);return l}var kd=T1,k1=Object.prototype;function $1(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||k1;return r===t}var $i=$1;function D1(r,e){return function(t){return r(e(t))}}var $d=D1,O1=$d,M1=O1(Object.keys,Object),C1=M1,P1=$i,A1=C1,R1=Object.prototype,I1=R1.hasOwnProperty;function L1(r){if(!P1(r))return A1(r);var e=[];for(var t in Object(r))I1.call(r,t)&&t!="constructor"&&e.push(t);return e}var F1=L1,U1=kd,H1=F1,W1=_n;function B1(r){return W1(r)?U1(r):H1(r)}var Tn=B1,q1=Nd,z1=Ni,G1=Tn;function Y1(r){return q1(r,G1,z1)}var Dd=Y1,Qo=Dd,V1=1,K1=Object.prototype,X1=K1.hasOwnProperty;function J1(r,e,t,n,s,a){var i=t&V1,l=Qo(r),c=l.length,d=Qo(e),u=d.length;if(c!=u&&!i)return!1;for(var h=c;h--;){var f=l[h];if(!(i?f in e:X1.call(e,f)))return!1}var m=a.get(r),v=a.get(e);if(m&&v)return m==e&&v==r;var g=!0;a.set(r,e),a.set(e,r);for(var p=i;++h<c;){f=l[h];var y=r[f],b=e[f];if(n)var x=i?n(b,y,f,e,r,a):n(y,b,f,r,e,a);if(!(x===void 0?y===b||s(y,b,t,n,a):x)){g=!1;break}p||(p=f=="constructor")}if(g&&!p){var w=r.constructor,j=e.constructor;w!=j&&"constructor"in r&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof j=="function"&&j instanceof j)&&(g=!1)}return a.delete(r),a.delete(e),g}var Q1=J1,Z1=ir,ej=ut,tj=Z1(ej,"DataView"),rj=tj,nj=ir,sj=ut,aj=nj(sj,"Promise"),ij=aj,oj=ir,lj=ut,cj=oj(lj,"Set"),dj=cj,uj=ir,hj=ut,fj=uj(hj,"WeakMap"),mj=fj,Ca=rj,Pa=xi,Aa=ij,Ra=dj,Ia=mj,Od=Mr,Ir=_d,Zo="[object Map]",gj="[object Object]",el="[object Promise]",tl="[object Set]",rl="[object WeakMap]",nl="[object DataView]",pj=Ir(Ca),vj=Ir(Pa),yj=Ir(Aa),bj=Ir(Ra),wj=Ir(Ia),qt=Od;(Ca&&qt(new Ca(new ArrayBuffer(1)))!=nl||Pa&&qt(new Pa)!=Zo||Aa&&qt(Aa.resolve())!=el||Ra&&qt(new Ra)!=tl||Ia&&qt(new Ia)!=rl)&&(qt=function(r){var e=Od(r),t=e==gj?r.constructor:void 0,n=t?Ir(t):"";if(n)switch(n){case pj:return nl;case vj:return Zo;case yj:return el;case bj:return tl;case wj:return rl}return e});var As=qt,ia=ji,xj=jd,_j=f_,jj=Q1,sl=As,al=Qe,il=Cs,Sj=ki,Nj=1,ol="[object Arguments]",ll="[object Array]",Bn="[object Object]",Ej=Object.prototype,cl=Ej.hasOwnProperty;function Tj(r,e,t,n,s,a){var i=al(r),l=al(e),c=i?ll:sl(r),d=l?ll:sl(e);c=c==ol?Bn:c,d=d==ol?Bn:d;var u=c==Bn,h=d==Bn,f=c==d;if(f&&il(r)){if(!il(e))return!1;i=!0,u=!1}if(f&&!u)return a||(a=new ia),i||Sj(r)?xj(r,e,t,n,s,a):_j(r,e,c,t,n,s,a);if(!(t&Nj)){var m=u&&cl.call(r,"__wrapped__"),v=h&&cl.call(e,"__wrapped__");if(m||v){var g=m?r.value():r,p=v?e.value():e;return a||(a=new ia),s(g,p,t,n,a)}}return f?(a||(a=new ia),jj(r,e,t,n,s,a)):!1}var kj=Tj,$j=kj,dl=It;function Md(r,e,t,n,s){return r===e?!0:r==null||e==null||!dl(r)&&!dl(e)?r!==r&&e!==e:$j(r,e,t,n,Md,s)}var Di=Md,Dj=Di;function Oj(r,e){return Dj(r,e)}var Mj=Oj;const Cj=Je(Mj);function oa(r,e){var t=ci(r);return t?t.innerHeight:Vt(r).height}function Cd(r,e,t){r.closest&&!t&&r.closest(e);var n=r;do{if(Dy(n,e))return n;n=n.parentElement}while(n&&n!==t&&n.nodeType===document.ELEMENT_NODE);return null}function Pj(r,e,t,n){for(var s=r.length,a=t+(n?1:-1);n?a--:++a<s;)if(e(r[a],a,r))return a;return-1}var Aj=Pj,Rj=ji,Ij=Di,Lj=1,Fj=2;function Uj(r,e,t,n){var s=t.length,a=s,i=!n;if(r==null)return!a;for(r=Object(r);s--;){var l=t[s];if(i&&l[2]?l[1]!==r[l[0]]:!(l[0]in r))return!1}for(;++s<a;){l=t[s];var c=l[0],d=r[c],u=l[1];if(i&&l[2]){if(d===void 0&&!(c in r))return!1}else{var h=new Rj;if(n)var f=n(d,u,c,r,e,h);if(!(f===void 0?Ij(u,d,Lj|Fj,n,h):f))return!1}}return!0}var Hj=Uj,Wj=jt;function Bj(r){return r===r&&!Wj(r)}var Pd=Bj,qj=Pd,zj=Tn;function Gj(r){for(var e=zj(r),t=e.length;t--;){var n=e[t],s=r[n];e[t]=[n,s,qj(s)]}return e}var Yj=Gj;function Vj(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}var Ad=Vj,Kj=Hj,Xj=Yj,Jj=Ad;function Qj(r){var e=Xj(r);return e.length==1&&e[0][2]?Jj(e[0][0],e[0][1]):function(t){return t===r||Kj(t,r,e)}}var Zj=Qj,eS=Qe,tS=jn,rS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nS=/^\w*$/;function sS(r,e){if(eS(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||tS(r)?!0:nS.test(r)||!rS.test(r)||e!=null&&r in Object(e)}var Oi=sS,Rd=_i,aS="Expected a function";function Mi(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(aS);var t=function(){var n=arguments,s=e?e.apply(this,n):n[0],a=t.cache;if(a.has(s))return a.get(s);var i=r.apply(this,n);return t.cache=a.set(s,i)||a,i};return t.cache=new(Mi.Cache||Rd),t}Mi.Cache=Rd;var iS=Mi,oS=iS,lS=500;function cS(r){var e=oS(r,function(n){return t.size===lS&&t.clear(),n}),t=e.cache;return e}var dS=cS,uS=dS,hS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fS=/\\(\\)?/g,mS=uS(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(hS,function(t,n,s,a){e.push(s?a.replace(fS,"$1"):n||t)}),e}),gS=mS;function pS(r,e){for(var t=-1,n=r==null?0:r.length,s=Array(n);++t<n;)s[t]=e(r[t],t,r);return s}var Ci=pS,ul=Or,vS=Ci,yS=Qe,bS=jn,wS=1/0,hl=ul?ul.prototype:void 0,fl=hl?hl.toString:void 0;function Id(r){if(typeof r=="string")return r;if(yS(r))return vS(r,Id)+"";if(bS(r))return fl?fl.call(r):"";var e=r+"";return e=="0"&&1/r==-wS?"-0":e}var xS=Id,_S=xS;function jS(r){return r==null?"":_S(r)}var SS=jS,NS=Qe,ES=Oi,TS=gS,kS=SS;function $S(r,e){return NS(r)?r:ES(r,e)?[r]:TS(kS(r))}var Rs=$S,DS=jn,OS=1/0;function MS(r){if(typeof r=="string"||DS(r))return r;var e=r+"";return e=="0"&&1/r==-OS?"-0":e}var kn=MS,CS=Rs,PS=kn;function AS(r,e){e=CS(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[PS(e[t++])];return t&&t==n?r:void 0}var Is=AS,RS=Is;function IS(r,e,t){var n=r==null?void 0:RS(r,e);return n===void 0?t:n}var LS=IS;function FS(r,e){return r!=null&&e in Object(r)}var US=FS,HS=Rs,WS=Ei,BS=Qe,qS=li,zS=oi,GS=kn;function YS(r,e,t){e=HS(e,r);for(var n=-1,s=e.length,a=!1;++n<s;){var i=GS(e[n]);if(!(a=r!=null&&t(r,i)))break;r=r[i]}return a||++n!=s?a:(s=r==null?0:r.length,!!s&&zS(s)&&qS(i,s)&&(BS(r)||WS(r)))}var VS=YS,KS=US,XS=VS;function JS(r,e){return r!=null&&XS(r,e,KS)}var QS=JS,ZS=Di,eN=LS,tN=QS,rN=Oi,nN=Pd,sN=Ad,aN=kn,iN=1,oN=2;function lN(r,e){return rN(r)&&nN(e)?sN(aN(r),e):function(t){var n=eN(t,r);return n===void 0&&n===e?tN(t,r):ZS(e,n,iN|oN)}}var cN=lN;function dN(r){return r}var Ls=dN;function uN(r){return function(e){return e==null?void 0:e[r]}}var hN=uN,fN=Is;function mN(r){return function(e){return fN(e,r)}}var gN=mN,pN=hN,vN=gN,yN=Oi,bN=kn;function wN(r){return yN(r)?pN(bN(r)):vN(r)}var xN=wN,_N=Zj,jN=cN,SN=Ls,NN=Qe,EN=xN;function TN(r){return typeof r=="function"?r:r==null?SN:typeof r=="object"?NN(r)?jN(r[0],r[1]):_N(r):EN(r)}var Fs=TN,kN=Aj,$N=Fs,DN=ld,ON=Math.max;function MN(r,e,t){var n=r==null?0:r.length;if(!n)return-1;var s=t==null?0:DN(t);return s<0&&(s=ON(n+s,0)),kN(r,$N(e),s)}var CN=MN;const PN=Je(CN);var AN=Math.ceil,RN=Math.max;function IN(r,e,t,n){for(var s=-1,a=RN(AN((e-r)/(t||1)),0),i=Array(a);a--;)i[n?a:++s]=r,r+=t;return i}var LN=IN,FN=LN,UN=Ts,la=od;function HN(r){return function(e,t,n){return n&&typeof n!="number"&&UN(e,t,n)&&(t=n=void 0),e=la(e),t===void 0?(t=e,e=0):t=la(t),n=n===void 0?e<t?1:-1:la(n),FN(e,t,n,r)}}var WN=HN,BN=WN,qN=BN(),zN=qN;const GN=Je(zN);var ml=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function YN(r,e){return!!(r===e||ml(r)&&ml(e))}function VN(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!YN(r[t],e[t]))return!1;return!0}function Ld(r,e){e===void 0&&(e=VN);var t=null;function n(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var i=r.apply(this,s);return t={lastResult:i,lastArgs:s,lastThis:this},i}return n.clear=function(){t=null},n}function La(r,e){var t=ci(r);return t?t.innerWidth:Vt(r).width}var gl=Or,KN=Ei,XN=Qe,pl=gl?gl.isConcatSpreadable:void 0;function JN(r){return XN(r)||KN(r)||!!(pl&&r&&r[pl])}var QN=JN,ZN=Si,eE=QN;function Fd(r,e,t,n,s){var a=-1,i=r.length;for(t||(t=eE),s||(s=[]);++a<i;){var l=r[a];e>0&&t(l)?e>1?Fd(l,e-1,t,n,s):ZN(s,l):n||(s[s.length]=l)}return s}var Ud=Fd;function tE(r){return function(e,t,n){for(var s=-1,a=Object(e),i=n(e),l=i.length;l--;){var c=i[r?l:++s];if(t(a[c],c,a)===!1)break}return e}}var rE=tE,nE=rE,sE=nE(),aE=sE,iE=aE,oE=Tn;function lE(r,e){return r&&iE(r,e,oE)}var Pi=lE,cE=_n;function dE(r,e){return function(t,n){if(t==null)return t;if(!cE(t))return r(t,n);for(var s=t.length,a=e?s:-1,i=Object(t);(e?a--:++a<s)&&n(i[a],a,i)!==!1;);return t}}var uE=dE,hE=Pi,fE=uE,mE=fE(hE),gE=mE,pE=gE,vE=_n;function yE(r,e){var t=-1,n=vE(r)?Array(r.length):[];return pE(r,function(s,a,i){n[++t]=e(s,a,i)}),n}var bE=yE;function wE(r,e){var t=r.length;for(r.sort(e);t--;)r[t]=r[t].value;return r}var xE=wE,vl=jn;function _E(r,e){if(r!==e){var t=r!==void 0,n=r===null,s=r===r,a=vl(r),i=e!==void 0,l=e===null,c=e===e,d=vl(e);if(!l&&!d&&!a&&r>e||a&&i&&c&&!l&&!d||n&&i&&c||!t&&c||!s)return 1;if(!n&&!a&&!d&&r<e||d&&t&&s&&!n&&!a||l&&t&&s||!i&&s||!c)return-1}return 0}var jE=_E,SE=jE;function NE(r,e,t){for(var n=-1,s=r.criteria,a=e.criteria,i=s.length,l=t.length;++n<i;){var c=SE(s[n],a[n]);if(c){if(n>=l)return c;var d=t[n];return c*(d=="desc"?-1:1)}}return r.index-e.index}var EE=NE,ca=Ci,TE=Is,kE=Fs,$E=bE,DE=xE,OE=Ps,ME=EE,CE=Ls,PE=Qe;function AE(r,e,t){e.length?e=ca(e,function(a){return PE(a)?function(i){return TE(i,a.length===1?a[0]:a)}:a}):e=[CE];var n=-1;e=ca(e,OE(kE));var s=$E(r,function(a,i,l){var c=ca(e,function(d){return d(a)});return{criteria:c,index:++n,value:a}});return DE(s,function(a,i){return ME(a,i,t)})}var RE=AE;function IE(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var LE=IE,FE=LE,yl=Math.max;function UE(r,e,t){return e=yl(e===void 0?r.length-1:e,0),function(){for(var n=arguments,s=-1,a=yl(n.length-e,0),i=Array(a);++s<a;)i[s]=n[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=n[s];return l[e]=t(i),FE(r,this,l)}}var Hd=UE;function HE(r){return function(){return r}}var WE=HE,BE=ir,qE=function(){try{var r=BE(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Wd=qE,zE=WE,bl=Wd,GE=Ls,YE=bl?function(r,e){return bl(r,"toString",{configurable:!0,enumerable:!1,value:zE(e),writable:!0})}:GE,VE=YE,KE=800,XE=16,JE=Date.now;function QE(r){var e=0,t=0;return function(){var n=JE(),s=XE-(n-t);if(t=n,s>0){if(++e>=KE)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var ZE=QE,eT=VE,tT=ZE,rT=tT(eT),Bd=rT,nT=Ls,sT=Hd,aT=Bd;function iT(r,e){return aT(sT(r,e,nT),r+"")}var qd=iT,oT=Ud,lT=RE,cT=qd,wl=Ts,dT=cT(function(r,e){if(r==null)return[];var t=e.length;return t>1&&wl(r,e[0],e[1])?e=[]:t>2&&wl(e[0],e[1],e[2])&&(e=[e[0]]),lT(r,oT(e,1),[])}),uT=dT;const hT=Je(uT);function zd(r){return Uc(r)||nd(r)||ni(r)||Hc()}function fT(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var mT=fT,gT=jt,pT=$i,vT=mT,yT=Object.prototype,bT=yT.hasOwnProperty;function wT(r){if(!gT(r))return vT(r);var e=pT(r),t=[];for(var n in r)n=="constructor"&&(e||!bT.call(r,n))||t.push(n);return t}var xT=wT,_T=kd,jT=xT,ST=_n;function NT(r){return ST(r)?_T(r,!0):jT(r)}var Us=NT,ET=qd,TT=xn,kT=Ts,$T=Us,Gd=Object.prototype,DT=Gd.hasOwnProperty,OT=ET(function(r,e){r=Object(r);var t=-1,n=e.length,s=n>2?e[2]:void 0;for(s&&kT(e[0],e[1],s)&&(n=1);++t<n;)for(var a=e[t],i=$T(a),l=-1,c=i.length;++l<c;){var d=i[l],u=r[d];(u===void 0||TT(u,Gd[d])&&!DT.call(r,d))&&(r[d]=a[d])}return r}),MT=OT;const CT=Je(MT);var xl=Wd;function PT(r,e,t){e=="__proto__"&&xl?xl(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var Ai=PT,AT=Ai,RT=Pi,IT=Fs;function LT(r,e){var t={};return e=IT(e),RT(r,function(n,s,a){AT(t,s,e(n,s,a))}),t}var FT=LT;const UT=Je(FT);function HT(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}var Yd=HT,WT=Ai,BT=xn,qT=Object.prototype,zT=qT.hasOwnProperty;function GT(r,e,t){var n=r[e];(!(zT.call(r,e)&&BT(n,t))||t===void 0&&!(e in r))&&WT(r,e,t)}var Vd=GT,YT=Vd,VT=Ai;function KT(r,e,t,n){var s=!t;t||(t={});for(var a=-1,i=e.length;++a<i;){var l=e[a],c=n?n(t[l],r[l],l,t,r):void 0;c===void 0&&(c=r[l]),s?VT(t,l,c):YT(t,l,c)}return t}var $n=KT,XT=$n,JT=Tn;function QT(r,e){return r&&XT(e,JT(e),r)}var ZT=QT,ek=$n,tk=Us;function rk(r,e){return r&&ek(e,tk(e),r)}var nk=rk,fs={exports:{}};fs.exports;(function(r,e){var t=ut,n=e&&!e.nodeType&&e,s=n&&!0&&r&&!r.nodeType&&r,a=s&&s.exports===n,i=a?t.Buffer:void 0,l=i?i.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var h=d.length,f=l?l(h):new d.constructor(h);return d.copy(f),f}r.exports=c})(fs,fs.exports);var sk=fs.exports;function ak(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var ik=ak,ok=$n,lk=Ni;function ck(r,e){return ok(r,lk(r),e)}var dk=ck,uk=$d,hk=uk(Object.getPrototypeOf,Object),Hs=hk,fk=Si,mk=Hs,gk=Ni,pk=Ed,vk=Object.getOwnPropertySymbols,yk=vk?function(r){for(var e=[];r;)fk(e,gk(r)),r=mk(r);return e}:pk,Kd=yk,bk=$n,wk=Kd;function xk(r,e){return bk(r,wk(r),e)}var _k=xk,jk=Nd,Sk=Kd,Nk=Us;function Ek(r){return jk(r,Nk,Sk)}var Xd=Ek,Tk=Object.prototype,kk=Tk.hasOwnProperty;function $k(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&kk.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var Dk=$k,_l=Sd;function Ok(r){var e=new r.constructor(r.byteLength);return new _l(e).set(new _l(r)),e}var Ri=Ok,Mk=Ri;function Ck(r,e){var t=e?Mk(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var Pk=Ck,Ak=/\w*$/;function Rk(r){var e=new r.constructor(r.source,Ak.exec(r));return e.lastIndex=r.lastIndex,e}var Ik=Rk,jl=Or,Sl=jl?jl.prototype:void 0,Nl=Sl?Sl.valueOf:void 0;function Lk(r){return Nl?Object(Nl.call(r)):{}}var Fk=Lk,Uk=Ri;function Hk(r,e){var t=e?Uk(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var Wk=Hk,Bk=Ri,qk=Pk,zk=Ik,Gk=Fk,Yk=Wk,Vk="[object Boolean]",Kk="[object Date]",Xk="[object Map]",Jk="[object Number]",Qk="[object RegExp]",Zk="[object Set]",e$="[object String]",t$="[object Symbol]",r$="[object ArrayBuffer]",n$="[object DataView]",s$="[object Float32Array]",a$="[object Float64Array]",i$="[object Int8Array]",o$="[object Int16Array]",l$="[object Int32Array]",c$="[object Uint8Array]",d$="[object Uint8ClampedArray]",u$="[object Uint16Array]",h$="[object Uint32Array]";function f$(r,e,t){var n=r.constructor;switch(e){case r$:return Bk(r);case Vk:case Kk:return new n(+r);case n$:return qk(r,t);case s$:case a$:case i$:case o$:case l$:case c$:case d$:case u$:case h$:return Yk(r,t);case Xk:return new n;case Jk:case e$:return new n(r);case Qk:return zk(r);case Zk:return new n;case t$:return Gk(r)}}var m$=f$,g$=jt,El=Object.create,p$=function(){function r(){}return function(e){if(!g$(e))return{};if(El)return El(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),Jd=p$,v$=Jd,y$=Hs,b$=$i;function w$(r){return typeof r.constructor=="function"&&!b$(r)?v$(y$(r)):{}}var x$=w$,_$=As,j$=It,S$="[object Map]";function N$(r){return j$(r)&&_$(r)==S$}var E$=N$,T$=E$,k$=Ps,Tl=Ti,kl=Tl&&Tl.isMap,$$=kl?k$(kl):T$,D$=$$,O$=As,M$=It,C$="[object Set]";function P$(r){return M$(r)&&O$(r)==C$}var A$=P$,R$=A$,I$=Ps,$l=Ti,Dl=$l&&$l.isSet,L$=Dl?I$(Dl):R$,F$=L$,U$=ji,H$=Yd,W$=Vd,B$=ZT,q$=nk,z$=sk,G$=ik,Y$=dk,V$=_k,K$=Dd,X$=Xd,J$=As,Q$=Dk,Z$=m$,e2=x$,t2=Qe,r2=Cs,n2=D$,s2=jt,a2=F$,i2=Tn,o2=Us,l2=1,c2=2,d2=4,Qd="[object Arguments]",u2="[object Array]",h2="[object Boolean]",f2="[object Date]",m2="[object Error]",Zd="[object Function]",g2="[object GeneratorFunction]",p2="[object Map]",v2="[object Number]",eu="[object Object]",y2="[object RegExp]",b2="[object Set]",w2="[object String]",x2="[object Symbol]",_2="[object WeakMap]",j2="[object ArrayBuffer]",S2="[object DataView]",N2="[object Float32Array]",E2="[object Float64Array]",T2="[object Int8Array]",k2="[object Int16Array]",$2="[object Int32Array]",D2="[object Uint8Array]",O2="[object Uint8ClampedArray]",M2="[object Uint16Array]",C2="[object Uint32Array]",ge={};ge[Qd]=ge[u2]=ge[j2]=ge[S2]=ge[h2]=ge[f2]=ge[N2]=ge[E2]=ge[T2]=ge[k2]=ge[$2]=ge[p2]=ge[v2]=ge[eu]=ge[y2]=ge[b2]=ge[w2]=ge[x2]=ge[D2]=ge[O2]=ge[M2]=ge[C2]=!0;ge[m2]=ge[Zd]=ge[_2]=!1;function Jn(r,e,t,n,s,a){var i,l=e&l2,c=e&c2,d=e&d2;if(t&&(i=s?t(r,n,s,a):t(r)),i!==void 0)return i;if(!s2(r))return r;var u=t2(r);if(u){if(i=Q$(r),!l)return G$(r,i)}else{var h=J$(r),f=h==Zd||h==g2;if(r2(r))return z$(r,l);if(h==eu||h==Qd||f&&!s){if(i=c||f?{}:e2(r),!l)return c?V$(r,q$(i,r)):Y$(r,B$(i,r))}else{if(!ge[h])return s?r:{};i=Z$(r,h,l)}}a||(a=new U$);var m=a.get(r);if(m)return m;a.set(r,i),a2(r)?r.forEach(function(p){i.add(Jn(p,e,t,p,r,a))}):n2(r)&&r.forEach(function(p,y){i.set(y,Jn(p,e,t,y,r,a))});var v=d?c?X$:K$:c?o2:i2,g=u?void 0:v(r);return H$(g||r,function(p,y){g&&(y=p,p=r[y]),W$(i,y,Jn(p,e,t,y,r,a))}),i}var P2=Jn;function A2(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}var R2=A2,I2=Is,L2=sd;function F2(r,e){return e.length<2?r:I2(r,L2(e,0,-1))}var U2=F2,H2=Rs,W2=R2,B2=U2,q2=kn;function z2(r,e){return e=H2(e,r),r=B2(r,e),r==null||delete r[q2(W2(e))]}var G2=z2,Y2=Mr,V2=Hs,K2=It,X2="[object Object]",J2=Function.prototype,Q2=Object.prototype,tu=J2.toString,Z2=Q2.hasOwnProperty,eD=tu.call(Object);function tD(r){if(!K2(r)||Y2(r)!=X2)return!1;var e=V2(r);if(e===null)return!0;var t=Z2.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&tu.call(t)==eD}var rD=tD,nD=rD;function sD(r){return nD(r)?void 0:r}var aD=sD,iD=Ud;function oD(r){var e=r==null?0:r.length;return e?iD(r,1):[]}var lD=oD,cD=lD,dD=Hd,uD=Bd;function hD(r){return uD(dD(r,void 0,cD),r+"")}var fD=hD,mD=Ci,gD=P2,pD=G2,vD=Rs,yD=$n,bD=aD,wD=fD,xD=Xd,_D=1,jD=2,SD=4,ND=wD(function(r,e){var t={};if(r==null)return t;var n=!1;e=mD(e,function(a){return a=vD(a,r),n||(n=a.length>1),a}),yD(r,xD(r),t),n&&(t=gD(t,_D|jD|SD,bD));for(var s=e.length;s--;)pD(t,e[s]);return t}),ED=ND;const TD=Je(ED);var kD=Yd,$D=Jd,DD=Pi,OD=Fs,MD=Hs,CD=Qe,PD=Cs,AD=ii,RD=jt,ID=ki;function LD(r,e,t){var n=CD(r),s=n||PD(r)||ID(r);if(e=OD(e),t==null){var a=r&&r.constructor;s?t=n?new a:[]:RD(r)?t=AD(a)?$D(MD(r)):{}:t={}}return(s?kD:DD)(r,function(i,l,c){return e(t,i,l,c)}),t}var FD=LD;const UD=Je(FD);var HD={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){return function(t,n,s){n.prototype.isBetween=function(a,i,l,c){var d=s(a),u=s(i),h=(c=c||"()")[0]==="(",f=c[1]===")";return(h?this.isAfter(d,l):!this.isBefore(d,l))&&(f?this.isBefore(u,l):!this.isAfter(u,l))||(h?this.isBefore(d,l):!this.isAfter(d,l))&&(f?this.isAfter(u,l):!this.isBefore(u,l))}}})})(HD);var WD={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){return function(t,n){n.prototype.isSameOrAfter=function(s,a){return this.isSame(s,a)||this.isAfter(s,a)}}})})(WD);var BD={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){return function(t,n){n.prototype.isSameOrBefore=function(s,a){return this.isSame(s,a)||this.isBefore(s,a)}}})})(BD);var qD={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){return function(t,n,s){var a=n.prototype,i=function(h){return h&&(h.indexOf?h:h.s)},l=function(h,f,m,v,g){var p=h.name?h:h.$locale(),y=i(p[f]),b=i(p[m]),x=y||b.map(function(j){return j.slice(0,v)});if(!g)return x;var w=p.weekStart;return x.map(function(j,T){return x[(T+(w||0))%7]})},c=function(){return s.Ls[s.locale()]},d=function(h,f){return h.formats[f]||function(m){return m.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,g,p){return g||p.slice(1)})}(h.formats[f.toUpperCase()])},u=function(){var h=this;return{months:function(f){return f?f.format("MMMM"):l(h,"months")},monthsShort:function(f){return f?f.format("MMM"):l(h,"monthsShort","months",3)},firstDayOfWeek:function(){return h.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):l(h,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):l(h,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):l(h,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return d(h.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};a.localeData=function(){return u.bind(this)()},s.localeData=function(){var h=c();return{firstDayOfWeek:function(){return h.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(f){return d(h,f)},meridiem:h.meridiem,ordinal:h.ordinal}},s.months=function(){return l(c(),"months")},s.monthsShort=function(){return l(c(),"monthsShort","months",3)},s.weekdays=function(h){return l(c(),"weekdays",null,null,h)},s.weekdaysShort=function(h){return l(c(),"weekdaysShort","weekdays",3,h)},s.weekdaysMin=function(h){return l(c(),"weekdaysMin","weekdays",2,h)}}})})(qD);var zD={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,s,a){var i=s.prototype,l=i.format;a.en.formats=t,i.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(h,f){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(m,v,g){var p=g&&g.toUpperCase();return v||f[g]||t[g]||f[p].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,b,x){return b||x.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,u)}}})})(zD);var GD={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){return function(t,n,s){var a=function(i,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(u){return u}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][i](c)||(c=l[d]);return c};s.max=function(){var i=[].slice.call(arguments,0);return a("isAfter",i)},s.min=function(){var i=[].slice.call(arguments,0);return a("isBefore",i)}}})})(GD);var YD={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){var t="minute",n=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(a,i,l){var c=i.prototype;l.utc=function(g){var p={date:g,utc:!0,args:arguments};return new i(p)},c.utc=function(g){var p=l(this.toDate(),{locale:this.$L,utc:!0});return g?p.add(this.utcOffset(),t):p},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),d.call(this,g)};var u=c.init;c.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else u.call(this)};var h=c.utcOffset;c.utcOffset=function(g,p){var y=this.$utils().u;if(y(g))return this.$u?0:y(this.$offset)?h.call(this):this.$offset;if(typeof g=="string"&&(g=function(j){j===void 0&&(j="");var T=j.match(n);if(!T)return null;var _=(""+T[0]).match(s)||["-",0,0],N=_[0],O=60*+_[1]+ +_[2];return O===0?0:N==="+"?O:-O}(g),g===null))return this;var b=Math.abs(g)<=16?60*g:g,x=this;if(p)return x.$offset=b,x.$u=g===0,x;if(g!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(x=this.local().add(b+w,t)).$offset=b,x.$x.$localOffset=w}else x=this.utc();return x};var f=c.format;c.format=function(g){var p=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,p)},c.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var m=c.toDate;c.toDate=function(g){return g==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var v=c.diff;c.diff=function(g,p,y){if(g&&this.$u===g.$u)return v.call(this,g,p,y);var b=this.local(),x=l(g).local();return v.call(b,x,p,y)}}})})(YD);var VD={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){return function(t,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(VD);function at(r){return r.children}var qe={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Fe={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Ol=Object.keys(Fe).map(function(r){return Fe[r]});U.oneOfType([U.string,U.func]);U.any;U.func;U.oneOfType([U.arrayOf(U.oneOf(Ol)),U.objectOf(function(r,e){var t=Ol.indexOf(e)!==-1&&typeof r[e]=="boolean";if(t)return null;for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];return U.elementType.apply(U,[r,e].concat(s))})]);U.oneOfType([U.oneOf(["overlap","no-overlap"]),U.func]);var Ml={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function ru(r,e){var t=Ce(r,"month");return Ce(t,"week",e.startOfWeek())}function nu(r,e){var t=os(r,"month");return os(t,"week",e.startOfWeek())}function KD(r,e){for(var t=ru(r,e),n=nu(r,e),s=[];$r(t,n,"day");)s.push(t),t=tt(t,1,"day");return s}function XD(r,e){var t=Ce(r,e);return kr(t,r)?t:tt(t,1,e)}function JD(r,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=r,s=[];$r(n,e,t);)s.push(n),n=tt(n,1,t);return s}function QD(r,e){return e==null&&r==null?null:(e==null&&(e=new Date),r==null&&(r=new Date),r=Ce(r,"day"),r=dn(r,dn(e)),r=wr(r,wr(e)),r=cn(r,cn(e)),ln(r,ln(e)))}function Cl(r){return dn(r)===0&&wr(r)===0&&cn(r)===0&&ln(r)===0}function ZD(r,e,t,n){return t==="day"&&(t="date"),Math.abs(go[t](r,void 0,n)-go[t](e,void 0,n))}function Ii(r,e,t){return!t||t==="milliseconds"?Math.abs(+r-+e):Math.round(Math.abs(+Ce(r,t)/Ml[t]-+Ce(e,t)/Ml[t]))}var eO=U.oneOfType([U.string,U.func]);function tO(r,e,t,n,s){var a=typeof n=="function"?n(t,s,r):e.call(r,t,n,s);return tn(a==null||typeof a=="string","`localizer format(..)` must return a string, null, or undefined"),a}function rO(r,e,t){return new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,e+t,0,0)}function Li(r,e){return r.getTimezoneOffset()-e.getTimezoneOffset()}function nO(r,e){return Ii(r,e,"minutes")+Li(r,e)}function sO(r){var e=Ce(r,"day");return Ii(e,r,"minutes")+Li(e,r)}function aO(r,e){return ai(r,e,"day")}function iO(r,e,t){var n=kr(r,e,"minutes");return n?wn(e,t,"minutes"):Es(e,t,"minutes")}function Fa(r,e){return ZD(r,e,"day")}function oO(r){var e=r.evtA,t=e.start,n=e.end,s=e.allDay,a=r.evtB,i=a.start,l=a.end,c=a.allDay,d=+Ce(t,"day")-+Ce(i,"day"),u=Fa(t,n),h=Fa(i,l);return d||h-u||!!c-!!s||+t-+i||+n-+l}function lO(r){var e=r.event,t=e.start,n=e.end,s=r.range,a=s.start,i=s.end,l=Ce(t,"day"),c=$r(l,i,"day"),d=si(l,n,"minutes"),u=d?Es(n,a,"minutes"):wn(n,a,"minutes");return c&&u}function cO(r,e){return kr(r,e,"day")}function dO(r,e){return Cl(r)&&Cl(e)}var uO=$e(function r(e){var t=this;ke(this,r),tn(typeof e.format=="function","date localizer `format(..)` must be a function"),tn(typeof e.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=e.propType||eO,this.formats=e.formats,this.format=function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return tO.apply(void 0,[t,e.format].concat(s))},this.startOfWeek=e.firstOfWeek,this.merge=e.merge||QD,this.inRange=e.inRange||Zc,this.lt=e.lt||ai,this.lte=e.lte||$r,this.gt=e.gt||Es,this.gte=e.gte||wn,this.eq=e.eq||kr,this.neq=e.neq||si,this.startOf=e.startOf||Ce,this.endOf=e.endOf||os,this.add=e.add||tt,this.range=e.range||JD,this.diff=e.diff||Ii,this.ceil=e.ceil||XD,this.min=e.min||Jc,this.max=e.max||Qc,this.minutes=e.minutes||wr,this.daySpan=e.daySpan||Fa,this.firstVisibleDay=e.firstVisibleDay||ru,this.lastVisibleDay=e.lastVisibleDay||nu,this.visibleDays=e.visibleDays||KD,this.getSlotDate=e.getSlotDate||rO,this.getTimezoneOffset=e.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=e.getDstOffset||Li,this.getTotalMin=e.getTotalMin||nO,this.getMinutesFromMidnight=e.getMinutesFromMidnight||sO,this.continuesPrior=e.continuesPrior||aO,this.continuesAfter=e.continuesAfter||iO,this.sortEvents=e.sortEvents||oO,this.inEventRange=e.inEventRange||lO,this.isSameDate=e.isSameDate||cO,this.startAndEndAreDateOnly=e.startAndEndAreDateOnly||dO,this.segmentOffset=e.browserTZOffset?e.browserTZOffset():0});function hO(r,e,t,n){var s=fe(fe({},r.formats),t);return fe(fe({},r),{},{messages:n,startOfWeek:function(){return r.startOfWeek(e)},format:function(i,l){return r.format(i,s[l]||l,e)}})}var fO=function(r){function e(){var t;ke(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=Re(this,e,[].concat(s)),t.navigate=function(i){t.props.onNavigate(i)},t.view=function(i){t.props.onView(i)},t}return Ie(e,r),$e(e,[{key:"render",value:function(){var n=this.props,s=n.localizer.messages,a=n.label;return k.createElement("div",{className:"rbc-toolbar"},k.createElement("span",{className:"rbc-btn-group"},k.createElement("button",{type:"button",onClick:this.navigate.bind(null,qe.TODAY)},s.today),k.createElement("button",{type:"button",onClick:this.navigate.bind(null,qe.PREVIOUS)},s.previous),k.createElement("button",{type:"button",onClick:this.navigate.bind(null,qe.NEXT)},s.next)),k.createElement("span",{className:"rbc-toolbar-label"},a),k.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(n){var s=this,a=this.props.views,i=this.props.view;if(a.length>1)return a.map(function(l){return k.createElement("button",{type:"button",key:l,className:je({"rbc-active":i===l}),onClick:s.view.bind(null,l)},n[l])})}}])}(k.Component);function ye(r,e){r&&r.apply(null,[].concat(e))}var mO={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};function gO(r){return fe(fe({},mO),r)}function pO(r){var e=r.ref,t=r.callback;E.useEffect(function(){var n=function(a){e.current&&!e.current.contains(a.target)&&t()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[e,t])}var vO=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],su=function(r){function e(){return ke(this,e),Re(this,e,arguments)}return Ie(e,r),$e(e,[{key:"render",value:function(){var n=this.props,s=n.style,a=n.className,i=n.event,l=n.selected,c=n.isAllDay,d=n.onSelect,u=n.onDoubleClick,h=n.onKeyPress,f=n.localizer,m=n.continuesPrior,v=n.continuesAfter,g=n.accessors,p=n.getters,y=n.children,b=n.components,x=b.event,w=b.eventWrapper,j=n.slotStart,T=n.slotEnd,_=dt(n,vO);delete _.resizable;var N=g.title(i),O=g.tooltip(i),P=g.end(i),C=g.start(i),A=g.allDay(i),I=c||A||f.diff(C,f.ceil(P,"day"),"day")>1,Y=p.eventProp(i,C,P,l),Z=k.createElement("div",{className:"rbc-event-content",title:O||void 0},x?k.createElement(x,{event:i,continuesPrior:m,continuesAfter:v,title:N,isAllDay:A,localizer:f,slotStart:j,slotEnd:T}):N);return k.createElement(w,Object.assign({},this.props,{type:"date"}),k.createElement("div",Object.assign({},_,{style:fe(fe({},Y.style),s),className:je("rbc-event",a,Y.className,{"rbc-selected":l,"rbc-event-allday":I,"rbc-event-continues-prior":m,"rbc-event-continues-after":v}),onClick:function(te){return d&&d(i,te)},onDoubleClick:function(te){return u&&u(i,te)},onKeyDown:function(te){return h&&h(i,te)}}),typeof y=="function"?y(Z):Z))}}])}(k.Component);function Ws(r,e){return!r||e==null?!1:Cj(r,e)}function au(r,e){var t=r.right-r.left,n=t/e;return n}function iu(r,e,t,n){var s=au(r,n);return t?n-1-Math.floor((e-r.left)/s):Math.floor((e-r.left)/s)}function yO(r,e){var t=e.x,n=e.y;return n>=r.top&&n<=r.bottom&&t>=r.left&&t<=r.right}function bO(r,e,t,n,s){var a=-1,i=-1,l=n-1,c=au(e,n),d=iu(e,t.x,s,n),u=e.top<t.y&&e.bottom>t.y,h=e.top<r.y&&e.bottom>r.y,f=r.y>e.bottom,m=e.top>r.y,v=t.top<e.top&&t.bottom>e.bottom;return v&&(a=0,i=l),u&&(m?(a=0,i=d):f&&(a=d,i=l)),h&&(a=i=s?l-Math.floor((r.x-e.left)/c):Math.floor((r.x-e.left)/c),u?d<a?a=d:i=d:r.y<t.y?i=l:a=0),{startIdx:a,endIdx:i}}function wO(r){var e=r.target,t=r.offset,n=r.container,s=r.box,a=Vt(e),i=a.top,l=a.left,c=a.width,d=a.height,u=Vt(n),h=u.top,f=u.left,m=u.width,v=u.height,g=Vt(s),p=g.width,y=g.height,b=h+v,x=f+m,w=i+y,j=l+p,T=t.x,_=t.y,N=w>b?i-y-_:i+_+d,O=j>x?l+T-p+c:l+T;return{topOffset:N,leftOffset:O}}function xO(r){var e=r.containerRef,t=r.accessors,n=r.getters,s=r.selected,a=r.components,i=r.localizer,l=r.position,c=r.show,d=r.events,u=r.slotStart,h=r.slotEnd,f=r.onSelect,m=r.onDoubleClick,v=r.onKeyPress,g=r.handleDragStart,p=r.popperRef,y=r.target,b=r.offset;pO({ref:p,callback:c}),E.useLayoutEffect(function(){var j=wO({target:y,offset:b,container:e.current,box:p.current}),T=j.topOffset,_=j.leftOffset;p.current.style.top="".concat(T,"px"),p.current.style.left="".concat(_,"px")},[b.x,b.y,y]);var x=l.width,w={minWidth:x+x/2};return k.createElement("div",{style:w,className:"rbc-overlay",ref:p},k.createElement("div",{className:"rbc-overlay-header"},i.format(u,"dayHeaderFormat")),d.map(function(j,T){return k.createElement(su,{key:T,type:"popup",localizer:i,event:j,getters:n,onSelect:f,accessors:t,components:a,onDoubleClick:m,onKeyPress:v,continuesPrior:i.lt(t.end(j),u,"day"),continuesAfter:i.gte(t.start(j),h,"day"),slotStart:u,slotEnd:h,selected:Ws(j,s),draggable:!0,onDragStart:function(){return g(j)},onDragEnd:function(){return c()}})}))}var ou=k.forwardRef(function(r,e){return k.createElement(xO,Object.assign({},r,{popperRef:e}))});ou.propTypes={accessors:U.object.isRequired,getters:U.object.isRequired,selected:U.object,components:U.object.isRequired,localizer:U.object.isRequired,position:U.object.isRequired,show:U.func.isRequired,events:U.array.isRequired,slotStart:U.instanceOf(Date).isRequired,slotEnd:U.instanceOf(Date),onSelect:U.func,onDoubleClick:U.func,onKeyPress:U.func,handleDragStart:U.func,style:U.object,offset:U.shape({x:U.number,y:U.number})};function _O(r){var e=r.containerRef,t=r.popupOffset,n=t===void 0?5:t,s=r.overlay,a=r.accessors,i=r.localizer,l=r.components,c=r.getters,d=r.selected,u=r.handleSelectEvent,h=r.handleDoubleClickEvent,f=r.handleKeyPressEvent,m=r.handleDragStart,v=r.onHide,g=r.overlayDisplay,p=E.useRef(null);if(!s.position)return null;var y=n;isNaN(n)||(y={x:n,y:n});var b=s.position,x=s.events,w=s.date,j=s.end;return k.createElement(wi,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:v,target:s.target},function(T){var _=T.props;return k.createElement(ou,Object.assign({},_,{containerRef:e,ref:p,target:s.target,offset:y,accessors:a,getters:c,selected:d,components:l,localizer:i,position:b,show:g,events:x,slotStart:w,slotEnd:j,onSelect:u,onDoubleClick:h,onKeyPress:f,handleDragStart:m}))})}var Fi=k.forwardRef(function(r,e){return k.createElement(_O,Object.assign({},r,{containerRef:e}))});Fi.propTypes={popupOffset:U.oneOfType([U.number,U.shape({x:U.number,y:U.number})]),overlay:U.shape({position:U.object,events:U.array,date:U.instanceOf(Date),end:U.instanceOf(Date)}),accessors:U.object.isRequired,localizer:U.object.isRequired,components:U.object.isRequired,getters:U.object.isRequired,selected:U.object,handleSelectEvent:U.func,handleDoubleClickEvent:U.func,handleKeyPressEvent:U.func,handleDragStart:U.func,onHide:U.func,overlayDisplay:U.func};function Ae(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Yr(t,r,e,{passive:!1})}function jO(r,e,t){return!r||un(r,document.elementFromPoint(e,t))}function SO(r,e){var t=e.clientX,n=e.clientY,s=document.elementFromPoint(t,n);return Cd(s,".rbc-event",r)}function NO(r,e){var t=e.clientX,n=e.clientY,s=document.elementFromPoint(t,n);return Cd(s,".rbc-show-more",r)}function ms(r,e){return!!SO(r,e)}function EO(r,e){return!!NO(r,e)}function zr(r){var e=r;return r.touches&&r.touches.length&&(e=r.touches[0]),{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var Pl=5,TO=250,lu=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.global,s=n===void 0?!1:n,a=t.longPressThreshold,i=a===void 0?250:a,l=t.validContainers,c=l===void 0?[]:l;ke(this,r),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=e,this.globalMouse=!e||s,this.longPressThreshold=i,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ae("touchmove",function(){},window),this._removeKeyDownListener=Ae("keydown",this._keyListener),this._removeKeyUpListener=Ae("keyup",this._keyListener),this._removeDropFromOutsideListener=Ae("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ae("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return $e(r,[{key:"on",value:function(t,n){var s=this._listeners[t]||(this._listeners[t]=[]);return s.push(n),{remove:function(){var i=s.indexOf(n);i!==-1&&s.splice(i,1)}}}},{key:"emit",value:function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];var i,l=this._listeners[t]||[];return l.forEach(function(c){i===void 0&&(i=c.apply(void 0,s))}),i}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(t){var n=this._selectRect;return!n||!this.selecting?!1:Al(n,nr(t))}},{key:"filter",value:function(t){var n=this._selectRect;return!n||!this.selecting?[]:t.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(t,n){var s=this,a=null,i=null,l=null,c=function(f){a=setTimeout(function(){u(),t(f)},s.longPressThreshold),i=Ae("touchmove",function(){return u()}),l=Ae("touchend",function(){return u()})},d=Ae("touchstart",c),u=function(){a&&clearTimeout(a),i&&i(),l&&l(),a=null,i=null,l=null};return n&&c(n),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var t=this,n=Ae("mousedown",function(a){t._removeInitialEventListener(),t._handleInitialEvent(a),t._removeInitialEventListener=Ae("mousedown",t._handleInitialEvent)}),s=Ae("touchstart",function(a){t._removeInitialEventListener(),t._removeInitialEventListener=t._addLongPressListener(t._handleInitialEvent,a)});this._removeInitialEventListener=function(){n(),s()}}},{key:"_dropFromOutsideListener",value:function(t){var n=zr(t),s=n.pageX,a=n.pageY,i=n.clientX,l=n.clientY;this.emit("dropFromOutside",{x:s,y:a,clientX:i,clientY:l}),t.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(t){var n=zr(t),s=n.pageX,a=n.pageY,i=n.clientX,l=n.clientY;this.emit("dragOverFromOutside",{x:s,y:a,clientX:i,clientY:l}),t.preventDefault()}},{key:"_handleInitialEvent",value:function(t){if(this._initialEvent=t,!this.isDetached){var n=zr(t),s=n.clientX,a=n.clientY,i=n.pageX,l=n.pageY,c=this.container(),d,u;if(!(t.which===3||t.button===2||!jO(c,s,a))){if(!this.globalMouse&&c&&!un(c,t.target)){var h=kO(0),f=h.top,m=h.left,v=h.bottom,g=h.right;if(u=nr(c),d=Al({top:u.top-f,left:u.left-m,bottom:u.bottom+v,right:u.right+g},{top:l,left:i}),!d)return}var p=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(t.type),x:i,y:l,clientX:s,clientY:a});if(p!==!1)switch(t.type){case"mousedown":this._removeEndListener=Ae("mouseup",this._handleTerminatingEvent),this._onEscListener=Ae("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ae("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(t),this._removeEndListener=Ae("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ae("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(t){var n=t.target,s=this.validContainers;return!s||!s.length||!n?!0:s.some(function(a){return!!n.closest(a)})}},{key:"_handleTerminatingEvent",value:function(t){var n=this.selecting,s=this._selectRect;if(!n&&t.type.includes("key")&&(t=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!t){var a=!this.container||un(this.container(),t.target),i=this._isWithinValidContainer(t);return t.key==="Escape"||!i?this.emit("reset"):!n&&a?this._handleClickEvent(t):n?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(t){var n=zr(t),s=n.pageX,a=n.pageY,i=n.clientX,l=n.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<TO?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:a,clientX:i,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:s,y:a,clientX:i,clientY:l}))}},{key:"_handleMoveEvent",value:function(t){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,s=n.x,a=n.y,i=zr(t),l=i.pageX,c=i.pageY,d=Math.abs(s-l),u=Math.abs(a-c),h=Math.min(l,s),f=Math.min(c,a),m=this.selecting,v=this.isClick(l,c);v&&!m&&!(d||u)||(!m&&!v&&this.emit("selectStart",this._initialEventData),v||(this.selecting=!0,this._selectRect={top:f,left:h,x:l,y:c,right:h+d,bottom:f+u},this.emit("selecting",this._selectRect)),t.preventDefault())}}},{key:"_keyListener",value:function(t){this.ctrl=t.metaKey||t.ctrlKey}},{key:"isClick",value:function(t,n){var s=this._initialEventData,a=s.x,i=s.y,l=s.isTouch;return!l&&Math.abs(t-a)<=Pl&&Math.abs(n-i)<=Pl}}])}();function kO(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return wt(r)!=="object"&&(r={top:r,left:r,right:r,bottom:r}),r}function Al(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=nr(r),s=n.top,a=n.left,i=n.right,l=i===void 0?a:i,c=n.bottom,d=c===void 0?s:c,u=nr(e),h=u.top,f=u.left,m=u.right,v=m===void 0?f:m,g=u.bottom,p=g===void 0?h:g;return!(d-t<h||s+t>p||l-t<f||a+t>v)}function nr(r){if(!r.getBoundingClientRect)return r;var e=r.getBoundingClientRect(),t=e.left+Rl("left"),n=e.top+Rl("top");return{top:n,left:t,right:(r.offsetWidth||0)+t,bottom:(r.offsetHeight||0)+n}}function Rl(r){if(r==="left")return window.pageXOffset||document.body.scrollLeft||0;if(r==="top")return window.pageYOffset||document.body.scrollTop||0}var $O=function(r){function e(t,n){var s;return ke(this,e),s=Re(this,e,[t,n]),s.state={selecting:!1},s.containerRef=E.createRef(),s}return Ie(e,r),$e(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,s=n.range,a=n.getNow,i=n.getters,l=n.date,c=n.components.dateCellWrapper,d=n.localizer,u=this.state,h=u.selecting,f=u.startIdx,m=u.endIdx,v=a();return k.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(g,p){var y=h&&p>=f&&p<=m,b=i.dayProp(g),x=b.className,w=b.style;return k.createElement(c,{key:p,value:g,range:s},k.createElement("div",{style:w,className:je("rbc-day-bg",x,y&&"rbc-selected-cell",d.isSameDate(g,v)&&"rbc-today",l&&d.neq(l,g,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,s=this.containerRef.current,a=this._selector=new lu(this.props.container,{longPressThreshold:this.props.longPressThreshold}),i=function(c,d){if(!ms(s,c)&&!EO(s,c)){var u=nr(s),h=n.props,f=h.range,m=h.rtl;if(yO(u,c)){var v=iu(u,c.x,m,f.length);n._selectSlot({startIdx:v,endIdx:v,action:d,box:c})}}n._initial={},n.setState({selecting:!1})};a.on("selecting",function(l){var c=n.props,d=c.range,u=c.rtl,h=-1,f=-1;if(n.state.selecting||(ye(n.props.onSelectStart,[l]),n._initial={x:l.x,y:l.y}),a.isSelected(s)){var m=nr(s),v=bO(n._initial,m,l,d.length,u);h=v.startIdx,f=v.endIdx}n.setState({selecting:!0,startIdx:h,endIdx:f})}),a.on("beforeSelect",function(l){if(n.props.selectable==="ignoreEvents")return!ms(n.containerRef.current,l)}),a.on("click",function(l){return i(l,"click")}),a.on("doubleClick",function(l){return i(l,"doubleClick")}),a.on("select",function(l){n._selectSlot(fe(fe({},n.state),{},{action:"select",bounds:l})),n._initial={},n.setState({selecting:!1}),ye(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var s=n.endIdx,a=n.startIdx,i=n.action,l=n.bounds,c=n.box;s!==-1&&a!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:a,end:s,action:i,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(k.Component),Ve={propTypes:{slotMetrics:U.object.isRequired,selected:U.object,isAllDay:U.bool,accessors:U.object.isRequired,localizer:U.object.isRequired,components:U.object.isRequired,getters:U.object.isRequired,onSelect:U.func,onDoubleClick:U.func,onKeyPress:U.func},defaultProps:{segments:[],selected:{}},renderEvent:function(e,t){var n=e.selected;e.isAllDay;var s=e.accessors,a=e.getters,i=e.onSelect,l=e.onDoubleClick,c=e.onKeyPress,d=e.localizer,u=e.slotMetrics,h=e.components,f=e.resizable,m=u.continuesPrior(t),v=u.continuesAfter(t);return k.createElement(su,{event:t,getters:a,localizer:d,accessors:s,components:h,onSelect:i,onDoubleClick:l,onKeyPress:c,continuesPrior:m,continuesAfter:v,slotStart:u.first,slotEnd:u.last,selected:Ws(t,n),resizable:f})},renderSpan:function(e,t,n){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",a=Math.abs(t)/e*100+"%";return k.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:a,flexBasis:a,maxWidth:a}},s)}},cu=function(r){function e(){return ke(this,e),Re(this,e,arguments)}return Ie(e,r),$e(e,[{key:"render",value:function(){var n=this,s=this.props,a=s.segments,i=s.slotMetrics.slots,l=s.className,c=1;return k.createElement("div",{className:je(l,"rbc-row")},a.reduce(function(d,u,h){var f=u.event,m=u.left,v=u.right,g=u.span,p="_lvl_"+h,y=m-c,b=Ve.renderEvent(n.props,f);return y&&d.push(Ve.renderSpan(i,y,"".concat(p,"_gap"))),d.push(Ve.renderSpan(i,g,p,b)),c=v+1,d},[]))}}])}(k.Component);cu.defaultProps=fe({},Ve.defaultProps);function du(r){var e=r.dateRange,t=r.unit,n=t===void 0?"day":t,s=r.localizer;return{first:e[0],last:s.add(e[e.length-1],1,n)}}function DO(r,e,t,n){var s=du({dateRange:e,localizer:n}),a=s.first,i=s.last,l=n.diff(a,i,"day"),c=n.max(n.startOf(t.start(r),"day"),a),d=n.min(n.ceil(t.end(r),"day"),i),u=PN(e,function(f){return n.isSameDate(f,c)}),h=n.diff(c,d,"day");return h=Math.min(h,l),h=Math.max(h-n.segmentOffset,1),{event:r,span:h,left:u+1,right:Math.max(u+h,1)}}function Ua(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,t,n,s,a=[],i=[];for(t=0;t<r.length;t++){for(s=r[t],n=0;n<a.length&&OO(s,a[n]);n++);n>=e?i.push(s):(a[n]||(a[n]=[])).push(s)}for(t=0;t<a.length;t++)a[t].sort(function(l,c){return l.left-c.left});return{levels:a,extra:i}}function mn(r,e,t,n,s){var a={start:n.start(r),end:n.end(r)},i={start:e,end:t};return s.inEventRange({event:a,range:i})}function OO(r,e){return e.some(function(t){return t.left<=r.right&&t.right>=r.left})}function MO(r,e,t){var n=Kn(r),s=[],a=[];n.forEach(function(c){var d=e.start(c),u=e.end(c);t.daySpan(d,u)>1?s.push(c):a.push(c)});var i=s.sort(function(c,d){return Ha(c,d,e,t)}),l=a.sort(function(c,d){return Ha(c,d,e,t)});return[].concat(Kn(i),Kn(l))}function Ha(r,e,t,n){var s={start:t.start(r),end:t.end(r),allDay:t.allDay(r)},a={start:t.start(e),end:t.end(e),allDay:t.allDay(e)};return n.sortEvents({evtA:s,evtB:a})}var Wa=function(e,t){return e.left<=t&&e.right>=t},da=function(e,t){return e.filter(function(n){return Wa(n,t)}).map(function(n){return n.event})},uu=function(r){function e(){return ke(this,e),Re(this,e,arguments)}return Ie(e,r),$e(e,[{key:"render",value:function(){for(var n=this.props,s=n.segments,a=n.slotMetrics.slots,i=Ua(s).levels[0],l=1,c=1,d=[];l<=a;){var u="_lvl_"+l,h=i.filter(function(w){return Wa(w,l)})[0]||{},f=h.event,m=h.left,v=h.right,g=h.span;if(!f){var p=this.getHiddenEventsForSlot(s,l);if(p.length>0){var y=l-c;y&&d.push(Ve.renderSpan(a,y,u+"_gap")),d.push(Ve.renderSpan(a,1,u,this.renderShowMore(s,l))),c=l=l+1;continue}l++;continue}var b=Math.max(0,m-c);if(this.canRenderSlotEvent(m,g)){var x=Ve.renderEvent(this.props,f);b&&d.push(Ve.renderSpan(a,b,u+"_gap")),d.push(Ve.renderSpan(a,g,u,x)),c=l=v+1}else b&&d.push(Ve.renderSpan(a,b,u+"_gap")),d.push(Ve.renderSpan(a,1,u,this.renderShowMore(s,l))),c=l=l+1}return k.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(n,s){var a=da(n,s),i=Ua(n).levels[0],l=i.filter(function(c){return Wa(c,s)}).map(function(c){return c.event});return a.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(n,s){var a=this.props.segments;return GN(n,n+s).every(function(i){var l=da(a,i).length;return l===1})}},{key:"renderShowMore",value:function(n,s){var a=this,i=this.props,l=i.localizer,c=i.slotMetrics,d=i.components,u=c.getEventsForSlot(s),h=da(n,s),f=h.length;if(d!=null&&d.showMore){var m=d.showMore,v=c.getDateForSlot(s-1);return f?k.createElement(m,{localizer:l,slotDate:v,slot:s,count:f,events:u,remainingEvents:h}):!1}return f?k.createElement("button",{type:"button",key:"sm_"+s,className:je("rbc-button-link","rbc-show-more"),onClick:function(p){return a.showMore(s,p)}},l.messages.showMore(f,h,u)):!1}},{key:"showMore",value:function(n,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(n,s.target)}}])}(k.Component);uu.defaultProps=fe({},Ve.defaultProps);var CO=function(e){var t=e.children;return k.createElement("div",{className:"rbc-row-content-scroll-container"},t)},PO=function(e,t){return e.left<=t&&e.right>=t},AO=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function hu(){return Ld(function(r){for(var e=r.range,t=r.events,n=r.maxRows,s=r.minRows,a=r.accessors,i=r.localizer,l=du({dateRange:e,localizer:i}),c=l.first,d=l.last,u=t.map(function(g){return DO(g,e,a,i)}),h=Ua(u,Math.max(n-1,1)),f=h.levels,m=h.extra,v=m.length>0?s-1:s;f.length<v;)f.push([]);return{first:c,last:d,levels:f,extra:m,range:e,slots:e.length,clone:function(p){var y=hu();return y(fe(fe({},r),p))},getDateForSlot:function(p){return e[p]},getSlotForDate:function(p){return e.find(function(y){return i.isSameDate(y,p)})},getEventsForSlot:function(p){return u.filter(function(y){return PO(y,p)}).map(function(y){return y.event})},continuesPrior:function(p){return i.continuesPrior(a.start(p),c)},continuesAfter:function(p){var y=a.start(p),b=a.end(p);return i.continuesAfter(y,b,d)}}},AO)}var gn=function(r){function e(){var t;ke(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=Re(this,e,[].concat(s)),t.handleSelectSlot=function(i){var l=t.props,c=l.range,d=l.onSelectSlot;d(c.slice(i.start,i.end+1),i)},t.handleShowMore=function(i,l){var c=t.props,d=c.range,u=c.onShowMore,h=t.slotMetrics(t.props),f=My(t.containerRef.current,".rbc-row-bg")[0],m;f&&(m=f.children[i-1]);var v=h.getEventsForSlot(i);u(v,d[i-1],m,i,l)},t.getContainer=function(){var i=t.props.container;return i?i():t.containerRef.current},t.renderHeadingCell=function(i,l){var c=t.props,d=c.renderHeader,u=c.getNow,h=c.localizer;return d({date:i,key:"header_".concat(l),className:je("rbc-date-cell",h.isSameDate(i,u())&&"rbc-now")})},t.renderDummy=function(){var i=t.props,l=i.className,c=i.range,d=i.renderHeader,u=i.showAllEvents;return k.createElement("div",{className:l,ref:t.containerRef},k.createElement("div",{className:je("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&k.createElement("div",{className:"rbc-row",ref:t.headingRowRef},c.map(t.renderHeadingCell)),k.createElement("div",{className:"rbc-row",ref:t.eventRowRef},k.createElement("div",{className:"rbc-row-segment"},k.createElement("div",{className:"rbc-event"},k.createElement("div",{className:"rbc-event-content"}," "))))))},t.containerRef=E.createRef(),t.headingRowRef=E.createRef(),t.eventRowRef=E.createRef(),t.slotMetrics=hu(),t}return Ie(e,r),$e(e,[{key:"getRowLimit",value:function(){var n,s=oa(this.eventRowRef.current),a=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?oa(this.headingRowRef.current):0,i=oa(this.containerRef.current)-a;return Math.max(Math.floor(i/s),1)}},{key:"render",value:function(){var n=this.props,s=n.date,a=n.rtl,i=n.range,l=n.className,c=n.selected,d=n.selectable,u=n.renderForMeasure,h=n.accessors,f=n.getters,m=n.components,v=n.getNow,g=n.renderHeader,p=n.onSelect,y=n.localizer,b=n.onSelectStart,x=n.onSelectEnd,w=n.onDoubleClick,j=n.onKeyPress,T=n.resourceId,_=n.longPressThreshold,N=n.isAllDay,O=n.resizable,P=n.showAllEvents;if(u)return this.renderDummy();var C=this.slotMetrics(this.props),A=C.levels,I=C.extra,Y=P?CO:at,Z=m.weekWrapper,X={selected:c,accessors:h,getters:f,localizer:y,components:m,onSelect:p,onDoubleClick:w,onKeyPress:j,resourceId:T,slotMetrics:C,resizable:O};return k.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},k.createElement($O,{localizer:y,date:s,getNow:v,rtl:a,range:i,selectable:d,container:this.getContainer,getters:f,onSelectStart:b,onSelectEnd:x,onSelectSlot:this.handleSelectSlot,components:m,longPressThreshold:_,resourceId:T}),k.createElement("div",{className:je("rbc-row-content",P&&"rbc-row-content-scrollable"),role:"row"},g&&k.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},i.map(this.renderHeadingCell)),k.createElement(Y,null,k.createElement(Z,Object.assign({isAllDay:N},X,{rtl:this.props.rtl}),A.map(function(te,J){return k.createElement(cu,Object.assign({key:J,segments:te},X))}),!!I.length&&k.createElement(uu,Object.assign({segments:I,onShowMore:this.handleShowMore},X))))))}}])}(k.Component);gn.defaultProps={minRows:0,maxRows:1/0};var Ui=function(e){var t=e.label;return k.createElement("span",{role:"columnheader","aria-sort":"none"},t)},RO=function(e){var t=e.label,n=e.drilldownView,s=e.onDrillDown;return n?k.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},t):k.createElement("span",null,t)},IO=["date","className"],LO=function(e,t,n,s,a){return e.filter(function(i){return mn(i,t,n,s,a)})},Bs=function(r){function e(){var t;ke(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=Re(this,e,[].concat(s)),t.getContainer=function(){return t.containerRef.current},t.renderWeek=function(i,l){var c=t.props,d=c.events,u=c.components,h=c.selectable,f=c.getNow,m=c.selected,v=c.date,g=c.localizer,p=c.longPressThreshold,y=c.accessors,b=c.getters,x=c.showAllEvents,w=t.state,j=w.needLimitMeasure,T=w.rowLimit,_=LO(Kn(d),i[0],i[i.length-1],y,g),N=MO(_,y,g);return k.createElement(gn,{key:l,ref:l===0?t.slotRowRef:void 0,container:t.getContainer,className:"rbc-month-row",getNow:f,date:v,range:i,events:N,maxRows:x?1/0:T,selected:m,selectable:h,components:u,accessors:y,getters:b,localizer:g,renderHeader:t.readerDateHeading,renderForMeasure:j,onShowMore:t.handleShowMore,onSelect:t.handleSelectEvent,onDoubleClick:t.handleDoubleClickEvent,onKeyPress:t.handleKeyPressEvent,onSelectSlot:t.handleSelectSlot,longPressThreshold:p,rtl:t.props.rtl,resizable:t.props.resizable,showAllEvents:x})},t.readerDateHeading=function(i){var l=i.date,c=i.className,d=dt(i,IO),u=t.props,h=u.date,f=u.getDrilldownView,m=u.localizer,v=m.neq(h,l,"month"),g=m.isSameDate(l,h),p=f(l),y=m.format(l,"dateFormat"),b=t.props.components.dateHeader||RO;return k.createElement("div",Object.assign({},d,{className:je(c,v&&"rbc-off-range",g&&"rbc-current"),role:"cell"}),k.createElement(b,{label:y,date:l,drilldownView:p,isOffRange:v,onDrillDown:function(w){return t.handleHeadingClick(l,p,w)}}))},t.handleSelectSlot=function(i,l){t._pendingSelection=t._pendingSelection.concat(i),clearTimeout(t._selectTimer),t._selectTimer=setTimeout(function(){return t.selectDates(l)})},t.handleHeadingClick=function(i,l,c){c.preventDefault(),t.clearSelection(),ye(t.props.onDrillDown,[i,l])},t.handleSelectEvent=function(){t.clearSelection();for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onSelectEvent,l)},t.handleDoubleClickEvent=function(){t.clearSelection();for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onDoubleClickEvent,l)},t.handleKeyPressEvent=function(){t.clearSelection();for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onKeyPressEvent,l)},t.handleShowMore=function(i,l,c,d,u){var h=t.props,f=h.popup,m=h.onDrillDown,v=h.onShowMore,g=h.getDrilldownView,p=h.doShowMoreDrillDown;if(t.clearSelection(),f){var y=hd(c,t.containerRef.current);t.setState({overlay:{date:l,events:i,position:y,target:u}})}else p&&ye(m,[l,g(l)||Fe.DAY]);ye(v,[i,l,d])},t.overlayDisplay=function(){t.setState({overlay:null})},t.state={rowLimit:5,needLimitMeasure:!0,date:null},t.containerRef=E.createRef(),t.slotRowRef=E.createRef(),t._bgRows=[],t._pendingSelection=[],t}return Ie(e,r),$e(e,[{key:"componentDidMount",value:function(){var n=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||fd(function(){s=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,s=n.date,a=n.localizer,i=n.className,l=a.visibleDays(s,a),c=py(l,7);return this._weekCount=c.length,k.createElement("div",{className:je("rbc-month-view",i),role:"table","aria-label":"Month View",ref:this.containerRef},k.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var s=this.props,a=s.localizer,i=s.components,l=n[0],c=n[n.length-1],d=i.header||Ui;return a.range(l,c,"day").map(function(u,h){return k.createElement("div",{key:"header_"+h,className:"rbc-header"},k.createElement(d,{date:u,localizer:a,label:a.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,s,a=this,i=(n=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,h=l.getters,f=l.selected,m=l.popupOffset,v=l.handleDragStart,g=function(){return a.setState({overlay:null})};return k.createElement(Fi,{overlay:i,accessors:c,localizer:d,components:u,getters:h,selected:f,popupOffset:m,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!i.position,overlayDisplay:this.overlayDisplay,onHide:g})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(l,c){return+l-+c});var a=new Date(s[0]),i=new Date(s[s.length-1]);i.setDate(s[s.length-1].getDate()+1),ye(this.props.onSelectSlot,{slots:s,start:a,end:i,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,s){var a=n.date,i=n.localizer;return{date:a,needLimitMeasure:i.neq(a,s.date,"month")}}}])}(k.Component);Bs.range=function(r,e){var t=e.localizer,n=t.firstVisibleDay(r,t),s=t.lastVisibleDay(r,t);return{start:n,end:s}};Bs.navigate=function(r,e,t){var n=t.localizer;switch(e){case qe.PREVIOUS:return n.add(r,-1,"month");case qe.NEXT:return n.add(r,1,"month");default:return r}};Bs.title=function(r,e){var t=e.localizer;return t.format(r,"monthHeaderFormat")};var Il=function(e){var t=e.min,n=e.max,s=e.step,a=e.slots,i=e.localizer;return"".concat(+i.startOf(t,"minutes"))+"".concat(+i.startOf(n,"minutes"))+"".concat(s,"-").concat(a)};function Hi(r){for(var e=r.min,t=r.max,n=r.step,s=r.timeslots,a=r.localizer,i=Il({start:e,end:t,step:n,timeslots:s,localizer:a}),l=1+a.getTotalMin(e,t),c=a.getMinutesFromMidnight(e),d=Math.ceil((l-1)/(n*s)),u=d*s,h=new Array(d),f=new Array(u),m=0;m<d;m++){h[m]=new Array(s);for(var v=0;v<s;v++){var g=m*s+v,p=g*n;f[g]=h[m][v]=a.getSlotDate(e,c,p)}}var y=f.length*n;f.push(a.getSlotDate(e,c,y));function b(x){var w=a.diff(e,x,"minutes")+a.getDstOffset(e,x);return Math.min(w,l)}return{groups:h,update:function(w){return Il(w)!==i?Hi(w):this},dateIsInGroup:function(w,j){var T=h[j+1];return a.inRange(w,h[j][0],T?T[0]:t,"minutes")},nextSlot:function(w){var j=f[Math.min(f.findIndex(function(T){return T===w||a.eq(T,w)})+1,f.length-1)];return a.eq(j,w)&&(j=a.add(w,n,"minutes")),j},closestSlotToPosition:function(w){var j=Math.min(f.length-1,Math.max(0,Math.floor(w*u)));return f[j]},closestSlotFromPoint:function(w,j){var T=Math.abs(j.top-j.bottom);return this.closestSlotToPosition((w.y-j.top)/T)},closestSlotFromDate:function(w){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(a.lt(w,e,"minutes"))return f[0];if(a.gt(w,t,"minutes"))return f[f.length-1];var T=a.diff(e,w,"minutes");return f[(T-T%n)/n+j]},startsBeforeDay:function(w){return a.lt(w,e,"day")},startsAfterDay:function(w){return a.gt(w,t,"day")},startsBefore:function(w){return a.lt(a.merge(e,w),e,"minutes")},startsAfter:function(w){return a.gt(a.merge(t,w),t,"minutes")},getRange:function(w,j,T,_){T||(w=a.min(t,a.max(e,w))),_||(j=a.min(t,a.max(e,j)));var N=b(w),O=b(j),P=O>n*u&&!a.eq(t,j)?(N-n)/(n*u)*100:N/(n*u)*100;return{top:P,height:O/(n*u)*100-P,start:b(w),startDate:w,end:b(j),endDate:j}},getCurrentTimePosition:function(w){var j=b(w),T=j/(n*u)*100;return T}}}var FO=function(){function r(e,t){var n=t.accessors,s=t.slotMetrics;ke(this,r);var a=s.getRange(n.start(e),n.end(e)),i=a.start,l=a.startDate,c=a.end,d=a.endDate,u=a.top,h=a.height;this.start=i,this.end=c,this.startMs=+l,this.endMs=+d,this.top=u,this.height=h,this.data=e}return $e(r,[{key:"_width",get:function(){if(this.rows){var t=this.rows.reduce(function(s,a){return Math.max(s,a.leaves.length+1)},0)+1;return 100/t}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var t=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:t;var s=this.row.leaves,a=s.indexOf(this);return a===s.length-1?t:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var t=this.row,n=t.leaves,s=t.xOffset,a=t._width,i=n.indexOf(this)+1;return s+i*a}}])}();function UO(r,e,t){return Math.abs(e.start-r.start)<t||e.start>r.start&&e.start<r.end}function HO(r){for(var e=hT(r,["startMs",function(l){return-l.endMs}]),t=[];e.length>0;){var n=e.shift();t.push(n);for(var s=0;s<e.length;s++){var a=e[s];if(!(n.endMs>a.startMs)){if(s>0){var i=e.splice(s,1)[0];t.push(i)}break}}}return t}function fu(r){for(var e=r.events,t=r.minimumStartDifference,n=r.slotMetrics,s=r.accessors,a=e.map(function(u){return new FO(u,{slotMetrics:n,accessors:s})}),i=HO(a),l=[],c=function(){var h=i[d],f=l.find(function(g){return g.end>h.start||Math.abs(h.start-g.start)<t});if(!f)return h.rows=[],l.push(h),1;h.container=f;for(var m=null,v=f.rows.length-1;!m&&v>=0;v--)UO(f.rows[v],h,t)&&(m=f.rows[v]);m?(m.leaves.push(h),h.row=m):(h.leaves=[],f.rows.push(h))},d=0;d<i.length;d++)c();return i.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function mu(r,e,t){for(var n=0;n<r.friends.length;++n)if(!(t.indexOf(r.friends[n])>-1)){e=e>r.friends[n].idx?e:r.friends[n].idx,t.push(r.friends[n]);var s=mu(r.friends[n],e,t);e=e>s?e:s}return e}function WO(r){var e=r.events,t=r.minimumStartDifference,n=r.slotMetrics,s=r.accessors,a=fu({events:e,minimumStartDifference:t,slotMetrics:n,accessors:s});a.sort(function(Z,X){return Z=Z.style,X=X.style,Z.top!==X.top?Z.top>X.top?1:-1:Z.height!==X.height?Z.top+Z.height<X.top+X.height?1:-1:0});for(var i=0;i<a.length;++i)a[i].friends=[],delete a[i].style.left,delete a[i].style.left,delete a[i].idx,delete a[i].size;for(var l=0;l<a.length-1;++l)for(var c=a[l],d=c.style.top,u=c.style.top+c.style.height,h=l+1;h<a.length;++h){var f=a[h],m=f.style.top,v=f.style.top+f.style.height;(m>=d&&v<=u||v>d&&v<=u||m>=d&&m<u)&&(c.friends.push(f),f.friends.push(c))}for(var g=0;g<a.length;++g){for(var p=a[g],y=[],b=0;b<100;++b)y.push(1);for(var x=0;x<p.friends.length;++x)p.friends[x].idx!==void 0&&(y[p.friends[x].idx]=0);p.idx=y.indexOf(1)}for(var w=0;w<a.length;++w){var j=0;if(!a[w].size){var T=[],_=mu(a[w],0,T);j=100/(_+1),a[w].size=j;for(var N=0;N<T.length;++N)T[N].size=j}}for(var O=0;O<a.length;++O){var P=a[O];P.style.left=P.idx*P.size;for(var C=0,A=0;A<P.friends.length;++A){var I=P.friends[A].idx;C=C>I?C:I}C<=P.idx&&(P.size=100-P.idx*P.size);var Y=P.idx===0?0:3;P.style.width="calc(".concat(P.size,"% - ").concat(Y,"px)"),P.style.height="calc(".concat(P.style.height,"% - 2px)"),P.style.xOffset="calc(".concat(P.style.left,"% + ").concat(Y,"px)")}return a}var Ll={overlap:fu,"no-overlap":WO};function BO(r){return!!(r&&r.constructor&&r.call&&r.apply)}function qO(r){r.events,r.minimumStartDifference,r.slotMetrics,r.accessors;var e=r.dayLayoutAlgorithm,t=e;return e in Ll&&(t=Ll[e]),BO(t)?t.apply(this,arguments):[]}var gu=function(r){function e(){return ke(this,e),Re(this,e,arguments)}return Ie(e,r),$e(e,[{key:"render",value:function(){var n=this.props,s=n.renderSlot,a=n.resource,i=n.group,l=n.getters,c=n.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,h=u===void 0?at:u,f=l?l.slotGroupProp(i):{};return k.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),i.map(function(m,v){var g=l?l.slotProp(m,a):{};return k.createElement(h,{key:v,value:m,resource:a},k.createElement("div",Object.assign({},g,{className:je("rbc-time-slot",g.className)}),s&&s(m,v)))}))}}])}(E.Component);function qn(r){return typeof r=="string"?r:r+"%"}function zO(r){var e=r.style,t=r.className,n=r.event,s=r.accessors,a=r.rtl,i=r.selected,l=r.label,c=r.continuesPrior,d=r.continuesAfter,u=r.getters,h=r.onClick,f=r.onDoubleClick,m=r.isBackgroundEvent,v=r.onKeyPress,g=r.components,p=g.event,y=g.eventWrapper,b=s.title(n),x=s.tooltip(n),w=s.end(n),j=s.start(n),T=u.eventProp(n,j,w,i),_=[k.createElement("div",{key:"1",className:"rbc-event-label"},l),k.createElement("div",{key:"2",className:"rbc-event-content"},p?k.createElement(p,{event:n,title:b}):b)],N=e.height,O=e.top,P=e.width,C=e.xOffset,A=fe(fe({},T.style),{},Gt({top:qn(O),height:qn(N),width:qn(P)},a?"right":"left",qn(C)));return k.createElement(y,Object.assign({type:"time"},r),k.createElement("div",{role:"button",tabIndex:0,onClick:h,onDoubleClick:f,style:A,onKeyDown:v,title:x?(typeof l=="string"?l+": ":"")+x:void 0,className:je(m?"rbc-background-event":"rbc-event",t,T.className,{"rbc-selected":i,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},_))}var GO=function(e){var t=e.children,n=e.className,s=e.style,a=e.innerRef;return k.createElement("div",{className:n,style:s,ref:a},t)},YO=k.forwardRef(function(r,e){return k.createElement(GO,Object.assign({},r,{innerRef:e}))}),VO=["dayProp"],KO=["eventContainerWrapper","timeIndicatorWrapper"],pu=function(r){function e(){var t;ke(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=Re(this,e,[].concat(s)),t.state={selecting:!1,timeIndicatorPosition:null},t.intervalTriggered=!1,t.renderEvents=function(i){var l=i.events,c=i.isBackgroundEvent,d=t.props,u=d.rtl,h=d.selected,f=d.accessors,m=d.localizer,v=d.getters,g=d.components,p=d.step,y=d.timeslots,b=d.dayLayoutAlgorithm,x=d.resizable,w=t,j=w.slotMetrics,T=m.messages,_=qO({events:l,accessors:f,slotMetrics:j,minimumStartDifference:Math.ceil(p*y/2),dayLayoutAlgorithm:b});return _.map(function(N,O){var P,C=N.event,A=N.style,I=f.end(C),Y=f.start(C),Z=(P=f.eventId(C))!==null&&P!==void 0?P:"evt_"+O,X="eventTimeRangeFormat",te,J=j.startsBeforeDay(Y),de=j.startsAfterDay(I);J?X="eventTimeRangeEndFormat":de&&(X="eventTimeRangeStartFormat"),J&&de?te=T.allDay:te=m.format({start:Y,end:I},X);var $=J||j.startsBefore(Y),S=de||j.startsAfter(I);return k.createElement(zO,{style:A,event:C,label:te,key:Z,getters:v,rtl:u,components:g,continuesPrior:$,continuesAfter:S,accessors:f,resource:t.props.resource,selected:Ws(C,h),onClick:function(R){return t._select(fe(fe(fe({},C),t.props.resource&&{sourceResource:t.props.resource}),c&&{isBackgroundEvent:!0}),R)},onDoubleClick:function(R){return t._doubleClick(C,R)},isBackgroundEvent:c,onKeyPress:function(R){return t._keyPress(C,R)},resizable:x})})},t._selectable=function(){var i=t.containerRef.current,l=t.props,c=l.longPressThreshold,d=l.localizer,u=t._selector=new lu(function(){return i},{longPressThreshold:c}),h=function(g){var p=t.props.onSelecting,y=t.state||{},b=f(g),x=b.startDate,w=b.endDate;p&&(d.eq(y.startDate,x,"minutes")&&d.eq(y.endDate,w,"minutes")||p({start:x,end:w,resourceId:t.props.resource})===!1)||(t.state.start!==b.start||t.state.end!==b.end||t.state.selecting!==b.selecting)&&t.setState(b)},f=function(g){var p=t.slotMetrics.closestSlotFromPoint(g,nr(i));t.state.selecting||(t._initialSlot=p);var y=t._initialSlot;d.lte(y,p)?p=t.slotMetrics.nextSlot(p):d.gt(y,p)&&(y=t.slotMetrics.nextSlot(y));var b=t.slotMetrics.getRange(d.min(y,p),d.max(y,p));return fe(fe({},b),{},{selecting:!0,top:"".concat(b.top,"%"),height:"".concat(b.height,"%")})},m=function(g,p){if(!ms(t.containerRef.current,g)){var y=f(g),b=y.startDate,x=y.endDate;t._selectSlot({startDate:b,endDate:x,action:p,box:g})}t.setState({selecting:!1})};u.on("selecting",h),u.on("selectStart",h),u.on("beforeSelect",function(v){if(t.props.selectable==="ignoreEvents")return!ms(t.containerRef.current,v)}),u.on("click",function(v){return m(v,"click")}),u.on("doubleClick",function(v){return m(v,"doubleClick")}),u.on("select",function(v){t.state.selecting&&(t._selectSlot(fe(fe({},t.state),{},{action:"select",bounds:v})),t.setState({selecting:!1}))}),u.on("reset",function(){t.state.selecting&&t.setState({selecting:!1})})},t._teardownSelectable=function(){t._selector&&(t._selector.teardown(),t._selector=null)},t._selectSlot=function(i){for(var l=i.startDate,c=i.endDate,d=i.action,u=i.bounds,h=i.box,f=l,m=[];t.props.localizer.lte(f,c);)m.push(f),f=new Date(+f+t.props.step*60*1e3);ye(t.props.onSelectSlot,{slots:m,start:l,end:c,resourceId:t.props.resource,action:d,bounds:u,box:h})},t._select=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onSelectEvent,l)},t._doubleClick=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onDoubleClickEvent,l)},t._keyPress=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onKeyPressEvent,l)},t.slotMetrics=Hi(t.props),t.containerRef=E.createRef(),t}return Ie(e,r),$e(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,s){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var a=this.props,i=a.getNow,l=a.isNow,c=a.localizer,d=a.date,u=a.min,h=a.max,f=c.neq(n.getNow(),i(),"minutes");if(n.isNow!==l||f){if(this.clearTimeIndicatorInterval(),l){var m=!f&&c.eq(n.date,d,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(m)}}else l&&(c.neq(n.min,u,"minutes")||c.neq(n.max,h,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,s=n.min,a=n.max,i=n.getNow,l=i();if(l>=s&&l<=a){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,s=n.date,a=n.max,i=n.rtl,l=n.isNow,c=n.resource,d=n.accessors,u=n.localizer,h=n.getters,f=h.dayProp,m=dt(h,VO),v=n.components,g=v.eventContainerWrapper,p=v.timeIndicatorWrapper,y=dt(v,KO);this.slotMetrics=this.slotMetrics.update(this.props);var b=this.slotMetrics,x=this.state,w=x.selecting,j=x.top,T=x.height,_=x.startDate,N=x.endDate,O={start:_,end:N},P=f(a,c),C=P.className,A=P.style,I={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},Y=y.dayColumnWrapper||YO;return k.createElement(Y,{ref:this.containerRef,date:s,style:A,className:je(C,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",w&&"rbc-slot-selecting"),slotMetrics:b,resource:c},b.groups.map(function(Z,X){return k.createElement(gu,{key:X,group:Z,resource:c,getters:m,components:y})}),k.createElement(g,{localizer:u,resource:c,accessors:d,getters:m,components:y,slotMetrics:b},k.createElement("div",{className:je("rbc-events-container",i&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),w&&k.createElement("div",{className:"rbc-slot-selection",style:{top:j,height:T}},k.createElement("span",null,u.format(O,"selectRangeFormat"))),l&&this.intervalTriggered&&k.createElement(p,I,k.createElement("div",I)))}}])}(k.Component);pu.defaultProps={dragThroughEvents:!0,timeslots:2};var vu=function(e){var t=e.label;return k.createElement(k.Fragment,null,t)},XO=function(r){function e(){var t;ke(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=Re(this,e,[].concat(s)),t.handleHeaderClick=function(i,l,c){c.preventDefault(),ye(t.props.onDrillDown,[i,l])},t.renderRow=function(i){var l=t.props,c=l.events,d=l.rtl,u=l.selectable,h=l.getNow,f=l.range,m=l.getters,v=l.localizer,g=l.accessors,p=l.components,y=l.resizable,b=g.resourceId(i),x=i?c.filter(function(w){return g.resource(w)===b}):c;return k.createElement(gn,{isAllDay:!0,rtl:d,getNow:h,minRows:2,maxRows:t.props.allDayMaxRows+1,range:f,events:x,resourceId:b,className:"rbc-allday-cell",selectable:u,selected:t.props.selected,components:p,accessors:g,getters:m,localizer:v,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyPress:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:y})},t}return Ie(e,r),$e(e,[{key:"renderHeaderCells",value:function(n){var s=this,a=this.props,i=a.localizer,l=a.getDrilldownView,c=a.getNow,d=a.getters.dayProp,u=a.components.header,h=u===void 0?Ui:u,f=c();return n.map(function(m,v){var g=l(m),p=i.format(m,"dayFormat"),y=d(m),b=y.className,x=y.style,w=k.createElement(h,{date:m,label:p,localizer:i});return k.createElement("div",{key:v,style:x,className:je("rbc-header",b,i.isSameDate(m,f)&&"rbc-today")},g?k.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(T){return s.handleHeaderClick(m,g,T)}},w):k.createElement("span",null,w))})}},{key:"render",value:function(){var n=this,s=this.props,a=s.width,i=s.rtl,l=s.resources,c=s.range,d=s.events,u=s.getNow,h=s.accessors,f=s.selectable,m=s.components,v=s.getters,g=s.scrollRef,p=s.localizer,y=s.isOverflowing,b=s.components,x=b.timeGutterHeader,w=b.resourceHeader,j=w===void 0?vu:w,T=s.resizable,_={};y&&(_[i?"marginLeft":"marginRight"]="".concat(bi()-1,"px"));var N=l.groupEvents(d);return k.createElement("div",{style:_,ref:g,className:je("rbc-time-header",y&&"rbc-overflowing")},k.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},x&&k.createElement(x,null)),l.map(function(O,P){var C=Xt(O,2),A=C[0],I=C[1];return k.createElement("div",{className:"rbc-time-header-content",key:A||P},I&&k.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(P)},k.createElement("div",{className:"rbc-header"},k.createElement(j,{index:P,label:h.resourceTitle(I),resource:I}))),k.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(c)),k.createElement(gn,{isAllDay:!0,rtl:i,getNow:u,minRows:2,maxRows:n.props.allDayMaxRows+1,range:c,events:N.get(A)||[],resourceId:I&&A,className:"rbc-allday-cell",selectable:f,selected:n.props.selected,components:m,accessors:h,getters:v,localizer:p,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:T}))}))}}])}(k.Component),JO=function(r){function e(){var t;ke(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=Re(this,e,[].concat(s)),t.handleHeaderClick=function(i,l,c){c.preventDefault(),ye(t.props.onDrillDown,[i,l])},t}return Ie(e,r),$e(e,[{key:"renderHeaderCells",value:function(n){var s=this,a=this.props,i=a.localizer,l=a.getDrilldownView,c=a.getNow,d=a.getters.dayProp,u=a.components,h=u.header,f=h===void 0?Ui:h,m=u.resourceHeader,v=m===void 0?vu:m,g=a.resources,p=a.accessors,y=a.events,b=a.rtl,x=a.selectable,w=a.components,j=a.getters,T=a.resizable,_=c(),N=g.groupEvents(y);return n.map(function(O,P){var C=l(O),A=i.format(O,"dayFormat"),I=d(O),Y=I.className,Z=I.style,X=k.createElement(f,{date:O,label:A,localizer:i});return k.createElement("div",{key:P,className:"rbc-time-header-content rbc-resource-grouping"},k.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},k.createElement("div",{style:Z,className:je("rbc-header",Y,i.isSameDate(O,_)&&"rbc-today")},C?k.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(J){return s.handleHeaderClick(O,C,J)}},X):k.createElement("span",null,X))),k.createElement("div",{className:"rbc-row"},g.map(function(te,J){var de=Xt(te,2),$=de[0],S=de[1];return k.createElement("div",{key:"resource_".concat($,"_").concat(J),className:je("rbc-header",Y,i.isSameDate(O,_)&&"rbc-today")},k.createElement(v,{index:J,label:p.resourceTitle(S),resource:S}))})),k.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},g.map(function(te,J){var de=Xt(te,2),$=de[0],S=de[1],D=(N.get($)||[]).filter(function(R){return i.isSameDate(R.start,O)||i.isSameDate(R.end,O)});return k.createElement(gn,{key:"resource_".concat($,"_").concat(J),isAllDay:!0,rtl:b,getNow:c,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[O],events:D,resourceId:S&&$,className:"rbc-allday-cell",selectable:x,selected:s.props.selected,components:w,accessors:p,getters:j,localizer:i,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:T})})))})}},{key:"render",value:function(){var n=this.props,s=n.width,a=n.rtl,i=n.range,l=n.scrollRef,c=n.isOverflowing,d=n.components.timeGutterHeader,u={};return c&&(u[a?"marginLeft":"marginRight"]="".concat(bi()-1,"px")),k.createElement("div",{style:u,ref:l,className:je("rbc-time-header",c&&"rbc-overflowing")},k.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},d&&k.createElement(d,null)),this.renderHeaderCells(i))}}])}(k.Component);function QO(r){var e=r.min,t=r.max,n=r.localizer;return n.getTimezoneOffset(e)!==n.getTimezoneOffset(t)?{start:n.add(e,-1,"day"),end:n.add(t,-1,"day")}:{start:e,end:t}}var ZO=function(e){var t=e.min,n=e.max,s=e.timeslots,a=e.step,i=e.localizer,l=e.getNow,c=e.resource,d=e.components,u=e.getters,h=e.gutterRef,f=d.timeGutterWrapper,m=E.useMemo(function(){return QO({min:t,max:n,localizer:i})},[t==null?void 0:t.toISOString(),n==null?void 0:n.toISOString(),i]),v=m.start,g=m.end,p=E.useState(Hi({min:v,max:g,timeslots:s,step:a,localizer:i})),y=Xt(p,2),b=y[0],x=y[1];E.useEffect(function(){b&&x(b.update({min:v,max:g,timeslots:s,step:a,localizer:i}))},[v==null?void 0:v.toISOString(),g==null?void 0:g.toISOString(),s,a]);var w=E.useCallback(function(j,T){if(T)return null;var _=b.dateIsInGroup(l(),T);return k.createElement("span",{className:je("rbc-label",_&&"rbc-now")},i.format(j,"timeGutterFormat"))},[b,i,l]);return k.createElement(f,{slotMetrics:b},k.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:h},b.groups.map(function(j,T){return k.createElement(gu,{key:T,group:j,resource:c,components:d,renderSlot:w,getters:u})})))},eM=k.forwardRef(function(r,e){return k.createElement(ZO,Object.assign({gutterRef:e},r))}),ua={};function tM(r,e){return{map:function(n){return r?r.map(function(s,a){return n([e.resourceId(s),s],a)}):[n([ua,null],0)]},groupEvents:function(n){var s=new Map;return r?(n.forEach(function(a){var i=e.resource(a)||ua;if(Array.isArray(i))i.forEach(function(c){var d=s.get(c)||[];d.push(a),s.set(c,d)});else{var l=s.get(i)||[];l.push(a),s.set(i,l)}}),s):(s.set(ua,n),s)}}}var Lr=function(r){function e(t){var n;return ke(this,e),n=Re(this,e,[t]),n.handleScroll=function(s){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=s.target.scrollLeft)},n.handleResize=function(){So(n.rafHandle),n.rafHandle=fd(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];ye(n.props.onKeyPressEvent,a)},n.handleSelectEvent=function(){n.clearSelection();for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];ye(n.props.onSelectEvent,a)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];ye(n.props.onDoubleClickEvent,a)},n.handleShowMore=function(s,a,i,l,c){var d=n.props,u=d.popup,h=d.onDrillDown,f=d.onShowMore,m=d.getDrilldownView,v=d.doShowMoreDrillDown;if(n.clearSelection(),u){var g=hd(i,n.containerRef.current);n.setState({overlay:{date:a,events:s,position:fe(fe({},g),{},{width:"200px"}),target:c}})}else v&&ye(h,[a,m(a)||Fe.DAY]);ye(f,[s,a,l])},n.handleSelectAllDaySlot=function(s,a){var i=n.props.onSelectSlot,l=new Date(s[0]),c=new Date(s[s.length-1]);c.setDate(s[s.length-1].getDate()+1),ye(i,{slots:s,start:l,end:c,action:a.action,resourceId:a.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var s=n.contentRef.current;if(s!=null&&s.scrollHeight){var a=s.scrollHeight>s.clientHeight;n.state.isOverflowing!==a&&(n._updatingOverflow=!0,n.setState({isOverflowing:a},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=Ld(function(s,a){return tM(s,a)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=k.createRef(),n.contentRef=k.createRef(),n.containerRef=k.createRef(),n._scrollRatio=null,n.gutterRef=E.createRef(),n}return Ie(e,r),$e(e,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),So(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,s,a,i,l,c,d,u,h,f){var m=this.props,v=m.min,g=m.max,p=(i.get(s)||[]).filter(function(b){return c.inRange(n,d.start(b),d.end(b),"day")}),y=(l.get(s)||[]).filter(function(b){return c.inRange(n,d.start(b),d.end(b),"day")});return k.createElement(pu,Object.assign({},this.props,{localizer:c,min:c.merge(n,v),max:c.merge(n,g),resource:a&&s,components:u,isNow:c.isSameDate(n,f),key:"".concat(s,"-").concat(n),date:n,events:p,backgroundEvents:y,dayLayoutAlgorithm:h}))}},{key:"renderResourcesFirst",value:function(n,s,a,i,l,c,d,u,h){var f=this;return s.map(function(m){var v=Xt(m,2),g=v[0],p=v[1];return n.map(function(y){return f.renderDayColumn(y,g,p,a,i,l,c,u,h,d)})})}},{key:"renderRangeFirst",value:function(n,s,a,i,l,c,d,u,h){var f=this;return n.map(function(m){return k.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:m},s.map(function(v){var g=Xt(v,2),p=g[0],y=g[1];return k.createElement("div",{style:{flex:1},key:c.resourceId(y)},f.renderDayColumn(m,p,y,a,i,l,c,u,h,d))}))})}},{key:"renderEvents",value:function(n,s,a,i){var l=this.props,c=l.accessors,d=l.localizer,u=l.resourceGroupingLayout,h=l.components,f=l.dayLayoutAlgorithm,m=this.memoizedResources(this.props.resources,c),v=m.groupEvents(s),g=m.groupEvents(a);return u?this.renderRangeFirst(n,m,v,g,d,c,i,h,f):this.renderResourcesFirst(n,m,v,g,d,c,i,h,f)}},{key:"render",value:function(){var n,s=this.props,a=s.events,i=s.backgroundEvents,l=s.range,c=s.width,d=s.rtl,u=s.selected,h=s.getNow,f=s.resources,m=s.components,v=s.accessors,g=s.getters,p=s.localizer,y=s.min,b=s.max,x=s.showMultiDayTimes,w=s.longPressThreshold,j=s.resizable,T=s.resourceGroupingLayout;c=c||this.state.gutterWidth;var _=l[0],N=l[l.length-1];this.slots=l.length;var O=[],P=[],C=[];a.forEach(function(I){if(mn(I,_,N,v,p)){var Y=v.start(I),Z=v.end(I);v.allDay(I)||p.startAndEndAreDateOnly(Y,Z)||!x&&!p.isSameDate(Y,Z)?O.push(I):P.push(I)}}),i.forEach(function(I){mn(I,_,N,v,p)&&C.push(I)}),O.sort(function(I,Y){return Ha(I,Y,v,p)});var A={range:l,events:O,width:c,rtl:d,getNow:h,localizer:p,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(f,v),selectable:this.props.selectable,accessors:v,getters:g,components:m,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:w,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:j};return k.createElement("div",{className:je("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},f&&f.length>1&&T?k.createElement(JO,A):k.createElement(XO,A),this.props.popup&&this.renderOverlay(),k.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},k.createElement(eM,{date:_,ref:this.gutterRef,localizer:p,min:p.merge(_,y),max:p.merge(_,b),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:m,className:"rbc-time-gutter",getters:g}),this.renderEvents(l,P,C,h())))}},{key:"renderOverlay",value:function(){var n,s,a=this,i=(n=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,h=l.getters,f=l.selected,m=l.popupOffset,v=l.handleDragStart,g=function(){return a.setState({overlay:null})};return k.createElement(Fi,{overlay:i,accessors:c,localizer:d,components:u,getters:h,selected:f,popupOffset:m,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!i.position,overlayDisplay:this.overlayDisplay,onHide:g})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,a=(s=n.gutterRef)!==null&&s!==void 0&&s.current?La(n.gutterRef.current):void 0;a&&n.state.gutterWidth!==a&&n.setState({gutterWidth:a})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=n.min,a=n.max,i=n.scrollToTime,l=n.localizer,c=l.diff(l.merge(i,s),i,"milliseconds"),d=l.diff(s,a,"milliseconds");this._scrollRatio=c/d}}])}(E.Component);Lr.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var rM=["date","localizer","min","max","scrollToTime","enableAutoScroll"],qs=function(r){function e(){return ke(this,e),Re(this,e,arguments)}return Ie(e,r),$e(e,[{key:"render",value:function(){var n=this.props,s=n.date,a=n.localizer,i=n.min,l=i===void 0?a.startOf(new Date,"day"):i,c=n.max,d=c===void 0?a.endOf(new Date,"day"):c,u=n.scrollToTime,h=u===void 0?a.startOf(new Date,"day"):u,f=n.enableAutoScroll,m=f===void 0?!0:f,v=dt(n,rM),g=e.range(s,{localizer:a});return k.createElement(Lr,Object.assign({},v,{range:g,eventOffset:10,localizer:a,min:l,max:d,scrollToTime:h,enableAutoScroll:m}))}}])}(k.Component);qs.range=function(r,e){var t=e.localizer;return[t.startOf(r,"day")]};qs.navigate=function(r,e,t){var n=t.localizer;switch(e){case qe.PREVIOUS:return n.add(r,-1,"day");case qe.NEXT:return n.add(r,1,"day");default:return r}};qs.title=function(r,e){var t=e.localizer;return t.format(r,"dayHeaderFormat")};var nM=["date","localizer","min","max","scrollToTime","enableAutoScroll"],At=function(r){function e(){return ke(this,e),Re(this,e,arguments)}return Ie(e,r),$e(e,[{key:"render",value:function(){var n=this.props,s=n.date,a=n.localizer,i=n.min,l=i===void 0?a.startOf(new Date,"day"):i,c=n.max,d=c===void 0?a.endOf(new Date,"day"):c,u=n.scrollToTime,h=u===void 0?a.startOf(new Date,"day"):u,f=n.enableAutoScroll,m=f===void 0?!0:f,v=dt(n,nM),g=e.range(s,this.props);return k.createElement(Lr,Object.assign({},v,{range:g,eventOffset:15,localizer:a,min:l,max:d,scrollToTime:h,enableAutoScroll:m}))}}])}(k.Component);At.defaultProps=Lr.defaultProps;At.navigate=function(r,e,t){var n=t.localizer;switch(e){case qe.PREVIOUS:return n.add(r,-1,"week");case qe.NEXT:return n.add(r,1,"week");default:return r}};At.range=function(r,e){var t=e.localizer,n=t.startOfWeek(),s=t.startOf(r,"week",n),a=t.endOf(r,"week",n);return t.range(s,a)};At.title=function(r,e){var t=e.localizer,n=At.range(r,{localizer:t}),s=zd(n),a=s[0],i=s.slice(1);return t.format({start:a,end:i.pop()},"dayRangeHeaderFormat")};var sM=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Wi(r,e){return At.range(r,e).filter(function(t){return[6,0].indexOf(t.getDay())===-1})}var Dn=function(r){function e(){return ke(this,e),Re(this,e,arguments)}return Ie(e,r),$e(e,[{key:"render",value:function(){var n=this.props,s=n.date,a=n.localizer,i=n.min,l=i===void 0?a.startOf(new Date,"day"):i,c=n.max,d=c===void 0?a.endOf(new Date,"day"):c,u=n.scrollToTime,h=u===void 0?a.startOf(new Date,"day"):u,f=n.enableAutoScroll,m=f===void 0?!0:f,v=dt(n,sM),g=Wi(s,this.props);return k.createElement(Lr,Object.assign({},v,{range:g,eventOffset:15,localizer:a,min:l,max:d,scrollToTime:h,enableAutoScroll:m}))}}])}(k.Component);Dn.defaultProps=Lr.defaultProps;Dn.range=Wi;Dn.navigate=At.navigate;Dn.title=function(r,e){var t=e.localizer,n=Wi(r,{localizer:t}),s=zd(n),a=s[0],i=s.slice(1);return t.format({start:a,end:i.pop()},"dayRangeHeaderFormat")};var zs=30;function Gs(r){var e=r.accessors,t=r.components,n=r.date,s=r.events,a=r.getters,i=r.length,l=i===void 0?zs:i,c=r.localizer,d=r.onDoubleClickEvent,u=r.onSelectEvent,h=r.selected,f=E.useRef(null),m=E.useRef(null),v=E.useRef(null),g=E.useRef(null),p=E.useRef(null);E.useEffect(function(){x()});var y=function(N,O,P){var C=t.event,A=t.date;return O=O.filter(function(I){return mn(I,c.startOf(N,"day"),c.endOf(N,"day"),e,c)}),O.map(function(I,Y){var Z=e.title(I),X=e.end(I),te=e.start(I),J=a.eventProp(I,te,X,Ws(I,h)),de=Y===0&&c.format(N,"agendaDateFormat"),$=Y===0?k.createElement("td",{rowSpan:O.length,className:"rbc-agenda-date-cell"},A?k.createElement(A,{day:N,label:de}):de):!1;return k.createElement("tr",{key:P+"_"+Y,className:J.className,style:J.style},$,k.createElement("td",{className:"rbc-agenda-time-cell"},b(N,I)),k.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(D){return u&&u(I,D)},onDoubleClick:function(D){return d&&d(I,D)}},C?k.createElement(C,{event:I,title:Z}):Z))},[])},b=function(N,O){var P="",C=t.time,A=c.messages.allDay,I=e.end(O),Y=e.start(O);return e.allDay(O)||(c.eq(Y,I)?A=c.format(Y,"agendaTimeFormat"):c.isSameDate(Y,I)?A=c.format({start:Y,end:I},"agendaTimeRangeFormat"):c.isSameDate(N,Y)?A=c.format(Y,"agendaTimeFormat"):c.isSameDate(N,I)&&(A=c.format(I,"agendaTimeFormat"))),c.gt(N,Y,"day")&&(P="rbc-continues-prior"),c.lt(N,I,"day")&&(P+=" rbc-continues-after"),k.createElement("span",{className:P.trim()},C?k.createElement(C,{event:O,day:N,label:A}):A)},x=function(){if(p.current){var N=f.current,O=p.current.firstChild;if(O){var P=g.current.scrollHeight>g.current.clientHeight,C=[],A=C;C=[La(O.children[0]),La(O.children[1])],(A[0]!==C[0]||A[1]!==C[1])&&(m.current.style.width=C[0]+"px",v.current.style.width=C[1]+"px"),P?(nb(N,"rbc-header-overflowing"),N.style.marginRight=bi()+"px"):sb(N,"rbc-header-overflowing")}}},w=c.messages,j=c.add(n,l,"day"),T=c.range(n,j,"day");return s=s.filter(function(_){return mn(_,c.startOf(n,"day"),c.endOf(j,"day"),e,c)}),s.sort(function(_,N){return+e.start(_)-+e.start(N)}),k.createElement("div",{className:"rbc-agenda-view"},s.length!==0?k.createElement(k.Fragment,null,k.createElement("table",{ref:f,className:"rbc-agenda-table"},k.createElement("thead",null,k.createElement("tr",null,k.createElement("th",{className:"rbc-header",ref:m},w.date),k.createElement("th",{className:"rbc-header",ref:v},w.time),k.createElement("th",{className:"rbc-header"},w.event)))),k.createElement("div",{className:"rbc-agenda-content",ref:g},k.createElement("table",{className:"rbc-agenda-table"},k.createElement("tbody",{ref:p},T.map(function(_,N){return y(_,s,N)}))))):k.createElement("span",{className:"rbc-agenda-empty"},w.noEventsInRange))}Gs.range=function(r,e){var t=e.length,n=t===void 0?zs:t,s=e.localizer,a=s.add(r,n,"day");return{start:r,end:a}};Gs.navigate=function(r,e,t){var n=t.length,s=n===void 0?zs:n,a=t.localizer;switch(e){case qe.PREVIOUS:return a.add(r,-s,"day");case qe.NEXT:return a.add(r,s,"day");default:return r}};Gs.title=function(r,e){var t=e.length,n=t===void 0?zs:t,s=e.localizer,a=s.add(r,n,"day");return s.format({start:r,end:a},"agendaHeaderFormat")};var Qn=Gt(Gt(Gt(Gt(Gt({},Fe.MONTH,Bs),Fe.WEEK,At),Fe.WORK_WEEK,Dn),Fe.DAY,qs),Fe.AGENDA,Gs),aM=["action","date","today"];function iM(r,e){var t=e.action,n=e.date,s=e.today,a=dt(e,aM);switch(r=typeof r=="string"?Qn[r]:r,t){case qe.TODAY:n=s||new Date;break;case qe.DATE:break;default:tn(r&&typeof r.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=r.navigate(n,t,a)}return n}function oM(r,e){var t=null;return typeof e=="function"?t=e(r):typeof e=="string"&&wt(r)==="object"&&r!=null&&e in r&&(t=r[e]),t}var mt=function(e){return function(t){return oM(t,e)}},lM=["view","date","getNow","onNavigate"],cM=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function yu(r){if(Array.isArray(r))return r;for(var e=[],t=0,n=Object.entries(r);t<n.length;t++){var s=Xt(n[t],2),a=s[0],i=s[1];i&&e.push(a)}return e}function dM(r,e){var t=e.views,n=yu(t);return n.indexOf(r)!==-1}var bu=function(r){function e(){var t;ke(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=Re(this,e,[].concat(s)),t.getViews=function(){var i=t.props.views;return Array.isArray(i)?UD(i,function(l,c){return l[c]=Qn[c]},{}):wt(i)==="object"?UT(i,function(l,c){return l===!0?Qn[c]:l}):Qn},t.getView=function(){var i=t.getViews();return i[t.props.view]},t.getDrilldownView=function(i){var l=t.props,c=l.view,d=l.drilldownView,u=l.getDrilldownView;return u?u(i,c,Object.keys(t.getViews())):d},t.handleRangeChange=function(i,l,c){var d=t.props,u=d.onRangeChange,h=d.localizer;u&&l.range&&u(l.range(i,{localizer:h}),c)},t.handleNavigate=function(i,l){var c=t.props,d=c.view,u=c.date,h=c.getNow,f=c.onNavigate,m=dt(c,lM),v=t.getView(),g=h();u=iM(v,fe(fe({},m),{},{action:i,date:l||u||g,today:g})),f(u,d,i),t.handleRangeChange(u,v)},t.handleViewChange=function(i){i!==t.props.view&&dM(i,t.props)&&t.props.onView(i);var l=t.getViews();t.handleRangeChange(t.props.date||t.props.getNow(),l[i],i)},t.handleSelectEvent=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onSelectEvent,l)},t.handleDoubleClickEvent=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onDoubleClickEvent,l)},t.handleKeyPressEvent=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];ye(t.props.onKeyPressEvent,l)},t.handleSelectSlot=function(i){ye(t.props.onSelectSlot,i)},t.handleDrillDown=function(i,l){var c=t.props.onDrillDown;if(c){c(i,l,t.drilldownView);return}l&&t.handleViewChange(l),t.handleNavigate(qe.DATE,i)},t.state={context:e.getContext(t.props)},t}return Ie(e,r),$e(e,[{key:"render",value:function(){var n=this.props,s=n.view,a=n.toolbar,i=n.events,l=n.backgroundEvents,c=n.resourceGroupingLayout,d=n.style,u=n.className,h=n.elementProps,f=n.date,m=n.getNow,v=n.length,g=n.showMultiDayTimes,p=n.onShowMore,y=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var b=dt(n,cM);f=f||m();var x=this.getView(),w=this.state.context,j=w.accessors,T=w.components,_=w.getters,N=w.localizer,O=w.viewNames,P=T.toolbar||fO,C=x.title(f,{localizer:N,length:v});return k.createElement("div",Object.assign({},h,{className:je(u,"rbc-calendar",b.rtl&&"rbc-rtl"),style:d}),a&&k.createElement(P,{date:f,view:s,views:O,label:C,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:N}),k.createElement(x,Object.assign({},b,{events:i,backgroundEvents:l,date:f,getNow:m,length:v,localizer:N,getters:_,components:T,accessors:j,showMultiDayTimes:g,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:p,doShowMoreDrillDown:y,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:e.getContext(n)}}},{key:"getContext",value:function(n){var s=n.startAccessor,a=n.endAccessor,i=n.allDayAccessor,l=n.tooltipAccessor,c=n.titleAccessor,d=n.resourceAccessor,u=n.resourceIdAccessor,h=n.resourceTitleAccessor,f=n.eventIdAccessor,m=n.eventPropGetter,v=n.backgroundEventPropGetter,g=n.slotPropGetter,p=n.slotGroupPropGetter,y=n.dayPropGetter,b=n.view,x=n.views,w=n.localizer,j=n.culture,T=n.messages,_=T===void 0?{}:T,N=n.components,O=N===void 0?{}:N,P=n.formats,C=P===void 0?{}:P,A=yu(x),I=gO(_);return{viewNames:A,localizer:hO(w,j,C,I),getters:{eventProp:function(){return m&&m.apply(void 0,arguments)||{}},backgroundEventProp:function(){return v&&v.apply(void 0,arguments)||{}},slotProp:function(){return g&&g.apply(void 0,arguments)||{}},slotGroupProp:function(){return p&&p.apply(void 0,arguments)||{}},dayProp:function(){return y&&y.apply(void 0,arguments)||{}}},components:CT(O[b]||{},TD(O,A),{eventWrapper:at,backgroundEventWrapper:at,eventContainerWrapper:at,dateCellWrapper:at,weekWrapper:at,timeSlotWrapper:at,timeGutterWrapper:at,timeIndicatorWrapper:at}),accessors:{start:mt(s),end:mt(a),allDay:mt(i),tooltip:mt(l),title:mt(c),resource:mt(d),resourceId:mt(u),resourceTitle:mt(h),eventId:mt(f)}}}}])}(k.Component);bu.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Fe.MONTH,views:[Fe.MONTH,Fe.WEEK,Fe.DAY,Fe.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Fe.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var uM=Gc(bu,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),hM=function(e,t,n){var s=e.start,a=e.end;return"".concat(n.format(s,"P",t)," – ").concat(n.format(a,"P",t))},ha=function(e,t,n){var s=e.start,a=e.end;return"".concat(n.format(s,"p",t)," – ").concat(n.format(a,"p",t))},fM=function(e,t,n){var s=e.start;return"".concat(n.format(s,"h:mma",t)," – ")},mM=function(e,t,n){var s=e.end;return" – ".concat(n.format(s,"h:mma",t))},gM=function(e,t,n){var s=e.start,a=e.end;return"".concat(n.format(s,"MMMM dd",t)," – ").concat(n.format(a,kr(s,a,"month")?"dd":"MMMM dd",t))},pM={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:ha,eventTimeRangeFormat:ha,eventTimeRangeStartFormat:fM,eventTimeRangeEndFormat:mM,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:gM,agendaHeaderFormat:hM,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:ha},vM=function(e){var t=e.startOfWeek,n=e.getDay,s=e.format,a=e.locales;return new uO({formats:pM,firstOfWeek:function(l){return n(t(new Date,{locale:a[l]}))},format:function(l,c,d){return s(new Date(l),c,{locale:a[d]})}})};const yM={"en-US":Za},bM=vM({format:Na,parse:gp,startOfWeek:r=>bt(r,{weekStartsOn:1}),getDay:bg,locales:yM});function wu({meetings:r}){const[e,t]=E.useState(null),n=r.map(c=>{var b,x,w;const[d,u="09:00"]=(c.scheduled_date||"").split("T"),[h,f,m]=d.split("-").map(Number),[v,g]=u.split(":").map(Number),p=new Date(h,f-1,m,v,g),y=new Date(p.getTime()+30*60*1e3);return{id:c.id,title:c.title,start:p,end:y,status:c.status,contact_full_name:c.contact_full_name,contact_email:c.contact_email,contact_phone:c.contact_phone,held_at:c.held_at,no_show:c.no_show,sdr_name:(b=c.sdrs)==null?void 0:b.full_name,client_name:(x=c.clients)==null?void 0:x.name,sdr_full_name:(w=c.sdrs)==null?void 0:w.full_name,scheduled_date:c.scheduled_date,company:c.company,linkedin_url:c.linkedin_url,notes:c.notes}}),s=c=>{let d="";switch(c.status){case"pending":d="#FFBF00";break;case"confirmed":d="#48D035";break;case"no_show":d="#FECACA";break;default:d="#E5E7EB"}return{style:{backgroundColor:d,borderRadius:"4px",border:"none"}}},a=({event:c})=>o.jsx("div",{className:"rbc-event-content",children:c.client_name||c.contact_full_name||c.title}),i=({event:c})=>{let d="";switch(c.status){case"pending":d="#FFBF00";break;case"confirmed":d="#48D035";break;case"no_show":d="#FECACA";break;default:d="#E5E7EB"}return o.jsx("div",{className:"rbc-event-content",style:{backgroundColor:d,borderRadius:"4px",padding:"4px 8px",margin:"2px 0"},children:c.client_name||c.contact_full_name||c.title})},l=c=>{t(c)};return o.jsxs("div",{className:"calendar-wrapper",style:{height:"700px"},children:[o.jsx(uM,{localizer:bM,events:n,startAccessor:"start",endAccessor:"end",defaultView:"week",views:["month","week","day","agenda"],style:{height:"100%"},eventPropGetter:s,onSelectEvent:l,components:{event:a,agenda:{event:i}}}),e&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-lg max-w-md w-full",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:e.client_name||e.contact_full_name||e.title}),o.jsxs("div",{className:"text-sm text-gray-700 space-y-1 mt-2",children:[e.title&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Title:"})," ",e.title]}),e.company&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Company:"})," ",e.company]}),e.linkedin_url&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"LinkedIn:"})," ",o.jsx("a",{href:e.linkedin_url,target:"_blank",className:"text-blue-600 underline",children:e.linkedin_url})]}),e.notes&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]})]})]}),o.jsx(yn,{meeting:e}),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsx("button",{onClick:()=>t(null),className:"px-3 py-1 text-sm text-white bg-indigo-600 rounded hover:bg-indigo-700",children:"Close"})})]})})]})}function Fl(){const{token:r}=Ou(),e=Mu(),[t,n]=E.useState(null),[s,a]=E.useState(null),[i,l]=E.useState(null),[c,d]=E.useState(null),[u,h]=E.useState(null),[f,m]=E.useState(null),[v,g]=E.useState(!1),[p,y]=E.useState(""),[b,x]=E.useState("09:00"),[w,j]=E.useState(""),[T,_]=E.useState(""),[N,O]=E.useState(""),[P,C]=E.useState(""),[A,I]=E.useState(""),[Y,Z]=E.useState(""),[X,te]=E.useState(""),{clients:J,loading:de,error:$,totalMeetingGoal:S}=Sc(t),{meetings:D,loading:R,error:G,addMeeting:V,updateMeeting:M,updateMeetingHeldDate:L,updateMeetingConfirmedDate:z,deleteMeeting:K}=Ss(t),H=async q=>{console.log("Saving meeting:",q);try{await M(q),m(null)}catch(ee){console.error("Failed to update meeting:",ee)}},F=()=>{m(null)},B=new Date().toLocaleString("en-US",{month:"long",year:"numeric"}),ne=D.filter(q=>q.status==="pending"&&!q.no_show).sort((q,ee)=>new Date(q.scheduled_date).getTime()-new Date(ee.scheduled_date).getTime()),Q=D.filter(q=>q.status==="confirmed").sort((q,ee)=>new Date(q.scheduled_date).getTime()-new Date(ee.scheduled_date).getTime()),se=D.filter(q=>q.no_show).sort((q,ee)=>new Date(ee.scheduled_date).getTime()-new Date(q.scheduled_date).getTime());D.filter(q=>q.status==="confirmed"&&!q.no_show&&new Date(q.scheduled_date)<new Date&&new Date(q.scheduled_date)>=new Date(new Date().getFullYear(),new Date().getMonth(),1)).length;const le=()=>{const ee={origin:{y:.7},zIndex:9999};function De(ft,nt){wp({...ee,...nt,particleCount:Math.floor(200*ft)})}De(.25,{spread:26,startVelocity:55}),De(.2,{spread:60}),De(.35,{spread:100,decay:.91,scalar:.8}),De(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),De(.1,{spread:120,startVelocity:45})};E.useEffect(()=>{async function q(){if(!r){l("No access token provided");return}try{const ee=JSON.parse(atob(r));if(!ee.id||!ee.timestamp||ee.type!=="sdr_access")throw new Error("Invalid access token");if(Date.now()-ee.timestamp>30*24*60*60*1e3)throw new Error("Access token has expired");const De=await fetch(`https://jadpfguancqrtkyzziei.supabase.co//rest/v1/profiles?id=eq.${ee.id}&role=eq.sdr&active=eq.true&select=id,full_name`,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImphZHBmZ3VhbmNxcnRreXp6aWVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk5OTM2MjUsImV4cCI6MjA1NTU2OTYyNX0.GMTZ80KGcR7B1Cr9UPHbmUFsSLqgcbAWBS_s6i7GMv4",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImphZHBmZ3VhbmNxcnRreXp6aWVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk5OTM2MjUsImV4cCI6MjA1NTU2OTYyNX0.GMTZ80KGcR7B1Cr9UPHbmUFsSLqgcbAWBS_s6i7GMv4"}});if(!De.ok)throw new Error("Failed to fetch SDR profile");const[ft]=await De.json();if(!ft)throw new Error("Invalid or inactive SDR account");n(ee.id),a(ft.full_name),l(null)}catch(ee){console.error("Token validation error:",ee),l(ee instanceof Error?ee.message:"Invalid or expired access token"),n(null),a(null)}}q()},[r]);const oe=q=>{console.log("Editing meeting:",q.id),m(q.id)};async function Le(q){if(q.preventDefault(),!c||!p||!t||!w||!T){h("Please fill all required fields");return}try{const ee=`${p}T${b}:00`;await V(c,ee,t,{contact_full_name:w,contact_email:T,contact_phone:N||null,title:P||null,company:A||null,linkedin_page:Y||null,notes:X||null,status:"pending"}),g(!1),y(""),x("09:00"),d(null),j(""),_(""),O(""),C(""),I(""),Z(""),te(""),m(null),h(null),le()}catch(ee){console.error("Failed to add meeting:",ee),h(ee instanceof Error?ee.message:"Failed to add meeting")}}if(i)return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-md w-full",children:o.jsxs("div",{className:"flex items-center gap-3 text-red-600",children:[o.jsx(et,{className:"w-6 h-6 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:i})]})})});if(de||R)return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});const Pe=new Date,pe=new Date(Pe.getFullYear(),Pe.getMonth()+1,0).getDate(),lr=Pe.getDate()/pe*100,Ut=Pe.toISOString().split("T")[0],St=D.filter(q=>q.scheduled_date.split("T")[0]===Ut),Nt=async(q,ee)=>{try{await L(q,ee),ee&&le()}catch(De){console.error("Failed to update meeting held date:",De)}},rt=async(q,ee)=>{try{await z(q,ee),ee&&le()}catch(De){console.error("Failed to update meeting confirmed date:",De)}};return o.jsxs(o.Fragment,{children:[v&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6 text-center",children:"Add New Meeting"}),o.jsxs("form",{onSubmit:Le,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Date"}),o.jsx("input",{type:"date",value:p,onChange:q=>y(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Time"}),o.jsx("input",{type:"time",value:b,onChange:q=>x(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Full Name"}),o.jsx("input",{type:"text",value:w,onChange:q=>j(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),o.jsx("input",{type:"email",value:T,onChange:q=>_(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),o.jsx("input",{type:"tel",value:N,onChange:q=>O(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("input",{type:"text",value:P,onChange:q=>C(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),o.jsx("input",{type:"text",value:A,onChange:q=>I(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Page"}),o.jsx("input",{type:"text",value:Y,onChange:q=>Z(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),o.jsx("textarea",{value:X,onChange:q=>te(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:3})]}),u&&o.jsx("p",{className:"text-red-500 text-sm",children:u}),o.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md transition duration-150",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-md transition duration-150",children:"Save"})]})]})]})}),o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("header",{className:"bg-white shadow",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",s]}),o.jsxs("div",{className:"flex items-center gap-2 text-lg text-gray-600",children:[o.jsx("span",{children:B}),o.jsx(Ju,{className:"w-5 h-5 text-indigo-600"})]})]}),o.jsxs("div",{className:"mt-4 flex gap-4",children:[o.jsx(Cn,{to:"",className:`text-sm font-medium ${e.pathname===`/dashboard/sdr/${r}`?"text-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Mt,{className:"w-4 h-4"}),"Dashboard"]})}),o.jsx(Cn,{to:"history",className:`text-sm font-medium ${e.pathname===`/dashboard/sdr/${r}/history`?"text-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(zu,{className:"w-4 h-4"}),"Meeting History"]})}),o.jsx(Cn,{to:"commissions",className:`text-sm font-medium ${e.pathname===`/dashboard/sdr/${r}/commissions`?"text-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Xl,{className:"w-4 h-4"}),"Commissions"]})}),o.jsx(Cn,{to:"calendar",className:`text-sm font-medium ${e.pathname===`/dashboard/sdr/${r}/calendar`?"text-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Mt,{className:"w-4 h-4"}),"Calendar"]})})]})]})}),o.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[($||G)&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[o.jsx(et,{className:"w-5 h-5"}),o.jsx("p",{children:$||G})]})}),o.jsxs(Wl,{children:[o.jsx(vt,{index:!0,element:o.jsxs(o.Fragment,{children:[(()=>{const ee=(()=>{const De=J.reduce((Ye,cr)=>Ye+(cr.monthly_set_target||0),0),ft=J.reduce((Ye,cr)=>Ye+(cr.monthly_hold_target||0),0),nt=new Date,Vs=new Date(nt.getFullYear(),nt.getMonth(),1),Ks=new Date(nt.getFullYear(),nt.getMonth()+1,0),Mn=D.filter(Ye=>{const cr=new Date(Ye.scheduled_date);return cr>=Vs&&cr<=Ks});return{totalSetTarget:De,totalHeldTarget:ft,totalMeetingsSet:Mn.length,totalMeetingsHeld:Mn.filter(Ye=>Ye.held_at!==null).length,totalPendingMeetings:Mn.filter(Ye=>Ye.status==="pending"&&!Ye.no_show).length,totalNoShowMeetings:Mn.filter(Ye=>Ye.no_show).length}})();return o.jsx("div",{className:"mb-8",children:o.jsx(pm,{clients:J,monthProgress:lr,totalMeetingGoal:S,totalHeldMeetings:ee.totalMeetingsHeld,totalSetTarget:ee.totalSetTarget,totalHeldTarget:ee.totalHeldTarget,totalMeetingsSet:ee.totalMeetingsSet,totalPendingMeetings:ee.totalPendingMeetings,totalNoShowMeetings:ee.totalNoShowMeetings})})})(),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[J.map(q=>o.jsx(fm,{name:q.name,monthly_set_target:q.monthly_set_target,monthly_hold_target:q.monthly_hold_target,confirmedMeetings:q.confirmedMeetings,pendingMeetings:q.pendingMeetings,todaysMeetings:q.todaysMeetings,onAddMeeting:()=>{d(q.id),g(!0)},onConfirmMeeting:ee=>{rt(ee,Ut)},onEditMeeting:ee=>{d(ee.client_id),oe(ee)}},q.id)),J.length===0&&o.jsx("div",{className:"col-span-full p-6 bg-white rounded-lg shadow-md text-center",children:o.jsx("p",{className:"text-gray-500",children:"No clients assigned for this month"})})]}),o.jsx("div",{className:"mb-8",children:o.jsx(gm,{title:"Today's Meetings",meetings:St,editable:!0,editingMeetingId:f,onEdit:oe,onDelete:K,onSave:H,onCancel:F,onUpdateHeldDate:Nt,onUpdateConfirmedDate:rt,showMeetingStatus:!0})}),o.jsx(xp,{pendingMeetings:ne,confirmedMeetings:Q,noShowMeetings:se,editable:!0,editingMeetingId:f,onEdit:oe,onDelete:K,onSave:H,onCancel:F,onUpdateHeldDate:Nt,onUpdateConfirmedDate:rt})]})}),o.jsx(vt,{path:"history",element:o.jsx(yp,{meetings:D,loading:R,error:G,onUpdateHeldDate:Nt,onUpdateConfirmedDate:rt})}),o.jsx(vt,{path:"commissions",element:o.jsx(bp,{sdrId:t||""})}),o.jsx(vt,{path:"calendar",element:o.jsx(wu,{meetings:D})})]})]})]})]})}function xu(){const[r,e]=E.useState([]),[t,n]=E.useState(!0),[s,a]=E.useState(null);async function i(){try{const l=new Date,c=new Date(l.getFullYear(),l.getMonth(),1),d=new Date(l.getFullYear(),l.getMonth()+1,0),{data:u,error:h}=await re.from("profiles").select("id, full_name, role, active").eq("role","sdr").eq("active",!0).order("full_name",{ascending:!0});if(h)throw h;const{data:f,error:m}=await re.from("assignments").select(`
          sdr_id,
          client_id,
          monthly_target,
          clients (
            id,
            name,
            monthly_target
          )
        `).eq("month",c.toISOString().split("T")[0]);if(m)throw m;const{data:v,error:g}=await re.from("meetings").select("*").gte("scheduled_date",c.toISOString()).lte("scheduled_date",d.toISOString());if(g)throw g;const p=u==null?void 0:u.map(y=>{const b=(v==null?void 0:v.filter(N=>N.sdr_id===y.id))||[],x=(f||[]).filter(N=>N.sdr_id===y.id).map(N=>{const O=b.filter(C=>C.client_id===N.client_id),P=O.filter(C=>C.status==="pending"&&!C.no_show).length;return{id:N.clients.id,name:N.clients.name,monthlyTarget:N.monthly_target,confirmedMeetings:O.filter(C=>C.status==="confirmed"&&!C.no_show).length,pendingMeetings:P}}),w=b.filter(N=>N.status==="confirmed"&&!N.no_show).length,j=b.filter(N=>N.status==="pending"&&!N.no_show).length,T=b.filter(N=>N.held_at!==null).length,_=b.filter(N=>N.no_show===!0).length;return{...y,clients:x,totalConfirmedMeetings:w,totalPendingMeetings:j,totalHeldMeetings:T,totalNoShowMeetings:_}});e(p||[]),a(null)}catch(l){console.error("SDR data fetch error:",l),a(l instanceof Error?l.message:"Failed to fetch SDR data")}finally{n(!1)}}return E.useEffect(()=>{i();const l=re.channel("sdr-changes").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},()=>i()).on("postgres_changes",{event:"*",schema:"public",table:"assignments"},()=>i()).on("postgres_changes",{event:"*",schema:"public",table:"meetings"},()=>i()).subscribe();return()=>{re.removeChannel(l)}},[]),{sdrs:r,loading:t,error:s,fetchSDRs:i}}function wM({sdrId:r,fullName:e,onUpdate:t}){const[n,s]=E.useState(!1),[a,i]=E.useState(null),[l,c]=E.useState(null),[d,u]=E.useState("goal_based"),[h,f]=E.useState({booked:25,held:75}),[m,v]=E.useState([{percentage:140,bonus:1500},{percentage:130,bonus:1200},{percentage:120,bonus:900},{percentage:110,bonus:700},{percentage:100,bonus:500},{percentage:90,bonus:400},{percentage:80,bonus:350},{percentage:70,bonus:300},{percentage:60,bonus:200}]);E.useEffect(()=>{async function p(){try{const{data:y,error:b}=await re.from("compensation_structures").select("*").eq("sdr_id",r).maybeSingle();if(b&&b.code!=="PGRST116")throw b;y&&(u(y.commission_type),f(y.meeting_rates),y.goal_tiers&&y.goal_tiers.length>0&&v(y.goal_tiers))}catch(y){console.error("Load compensation error:",y)}}p()},[r]);async function g(){s(!0),i(null),c(null);try{if(await re.from("compensation_structures").delete().eq("sdr_id",r),d==="goal_based"){if(m.some(x=>x.percentage<=0||x.bonus<=0))throw new Error("Goal percentages and bonuses must be greater than 0");const p=[...m].sort((x,w)=>w.percentage-x.percentage);if(p.some((x,w)=>w>0&&x.percentage===p[w-1].percentage))throw new Error("Each tier must have a unique goal percentage");const{error:b}=await re.from("compensation_structures").insert({sdr_id:r,commission_type:"goal_based",goal_tiers:p,meeting_rates:{booked:0,held:0}});if(b)throw b}else{if(h.booked<0||h.held<0)throw new Error("Meeting rates must be greater than or equal to 0");const{error:p}=await re.from("compensation_structures").insert({sdr_id:r,commission_type:"per_meeting",meeting_rates:h,goal_tiers:[]});if(p)throw p}c("Compensation structure updated successfully"),t()}catch(p){console.error("Save compensation error:",p),i(p instanceof Error?p.message:"Failed to save compensation structure")}finally{s(!1)}}return o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Compensation Structure for ",e]})}),o.jsxs("div",{className:"p-6",children:[a&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[o.jsx(et,{className:"w-5 h-5"}),o.jsx("p",{children:a})]})}),l&&o.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:o.jsx("p",{className:"text-green-700",children:l})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Commission Type"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>u("per_meeting"),className:`px-4 py-2 rounded-md text-sm font-medium ${d==="per_meeting"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Per Meeting"}),o.jsx("button",{onClick:()=>u("goal_based"),className:`px-4 py-2 rounded-md text-sm font-medium ${d==="goal_based"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Goal Based"})]})]}),d==="per_meeting"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Per Booked Meeting Rate ($)"}),o.jsx("input",{type:"number",min:"0",value:h.booked,onChange:p=>f(y=>({...y,booked:Math.max(0,parseInt(p.target.value)||0)})),className:"block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Per Held Meeting Rate ($)"}),o.jsx("input",{type:"number",min:"0",value:h.held,onChange:p=>f(y=>({...y,held:Math.max(0,parseInt(p.target.value)||0)})),className:"block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})]}),o.jsx("div",{className:"pt-4 border-t",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Total commission per held meeting: $",h.booked+h.held]})})]}),d==="goal_based"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Goal Tiers"}),o.jsxs("button",{onClick:()=>v([...m,{percentage:0,bonus:0}]),className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-medium text-indigo-700 bg-indigo-50 rounded-md hover:bg-indigo-100",children:[o.jsx(Ga,{className:"w-4 h-4"}),"Add Tier"]})]}),o.jsx("div",{className:"space-y-3",children:m.sort((p,y)=>y.percentage-p.percentage).map((p,y)=>o.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal Percentage"}),o.jsx("input",{type:"number",min:"0",max:"200",value:p.percentage,onChange:b=>{const x=[...m];x[y].percentage=Math.max(0,parseInt(b.target.value)||0),v(x)},className:"block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bonus Amount ($)"}),o.jsx("input",{type:"number",min:"0",value:p.bonus,onChange:b=>{const x=[...m];x[y].bonus=Math.max(0,parseInt(b.target.value)||0),v(x)},className:"block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})]}),o.jsx("button",{onClick:()=>{const b=m.filter((x,w)=>w!==y);v(b)},className:"p-2 text-red-600 hover:text-red-700 focus:outline-none",children:o.jsx(Zr,{className:"w-4 h-4"})})]},y))})]}),o.jsx("div",{className:"pt-6 border-t",children:o.jsx("button",{onClick:g,disabled:n,className:"w-full flex justify-center items-center gap-2 rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(Xl,{className:"w-4 h-4"}),"Save Compensation Structure"]})})})]})]})]})}function xM({sdrs:r,onInviteSent:e}){var T;const[t,n]=E.useState(""),[s,a]=E.useState(""),[i,l]=E.useState(!1),[c,d]=E.useState(null),[u,h]=E.useState(null),[f,m]=E.useState(null),[v,g]=E.useState(null);function p(_){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(_)}function y(_){const N={id:_,timestamp:Date.now(),type:"sdr_access",exp:Date.now()+2592e6};return btoa(JSON.stringify(N))}function b(_){const N=y(_);return`${window.location.origin}/dashboard/sdr/${N}`}async function x(_){_.preventDefault(),l(!0),d(null),h(null);try{if(!p(t))throw new Error("Please enter a valid email address");const{data:N}=await re.from("profiles").select("*").eq("email",t).maybeSingle();if(N){if(N.active)throw new Error("An SDR with this email already exists");const{error:C}=await re.from("profiles").update({active:!0,full_name:s,updated_at:new Date().toISOString()}).eq("id",N.id);if(C)throw C;h("SDR reactivated successfully"),e(),n(""),a("");return}const{data:O,error:P}=await re.from("profiles").insert([{email:t,full_name:s,role:"sdr",active:!0}]).select().single();if(P)throw P;h("SDR added successfully"),n(""),a(""),e()}catch(N){console.error("Add SDR error:",N),d(N instanceof Error?N.message:"Failed to add SDR")}finally{l(!1)}}async function w(_){if(confirm("Are you sure you want to remove this SDR? This will deactivate their account.")){l(!0),d(null);try{const{error:N}=await re.from("profiles").update({active:!1,updated_at:new Date().toISOString()}).eq("id",_);if(N)throw N;h("SDR removed successfully"),e()}catch(N){console.error("Delete error:",N),d(N instanceof Error?N.message:"Failed to remove SDR")}finally{l(!1)}}}async function j(_){const N=b(_);try{await navigator.clipboard.writeText(N),m(_),setTimeout(()=>m(null),2e3)}catch(O){console.error("Failed to copy URL:",O)}}return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Manage SDRs"})}),o.jsxs("form",{onSubmit:x,className:"p-6 border-b border-gray-200",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Add New SDR"}),c&&o.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-center gap-2 text-red-700",children:[o.jsx(et,{className:"w-4 h-4"}),o.jsx("p",{className:"text-sm",children:c})]}),u&&o.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:o.jsx("p",{className:"text-sm text-green-700",children:u})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),o.jsx("input",{id:"fullName",type:"text",required:!0,value:s,onChange:_=>a(_.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsx("input",{id:"email",type:"email",required:!0,value:t,onChange:_=>n(_.target.value),pattern:"[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center items-center gap-2 rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(za,{className:"w-4 h-4"}),"Add SDR"]})})]})]})]}),v&&o.jsx(wM,{sdrId:v,fullName:((T=r.find(_=>_.id===v))==null?void 0:T.full_name)||"",onUpdate:e}),o.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Current SDRs"}),o.jsxs("div",{className:"space-y-3",children:[r.map(_=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:_.full_name}),o.jsx("p",{className:"text-xs text-gray-500",children:_.email}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Created ",_.created_at&&new Date(_.created_at).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>g(v===_.id?null:_.id),className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-medium text-indigo-700 bg-indigo-50 rounded-md hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:v===_.id?"Hide Compensation":"Manage Compensation"}),o.jsx("button",{onClick:()=>j(_.id),className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-medium text-indigo-700 bg-indigo-50 rounded-md hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",title:"Copy dashboard URL",children:f===_.id?o.jsxs(o.Fragment,{children:[o.jsx(Yl,{className:"w-4 h-4"}),"Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(fa,{className:"w-4 h-4"}),"Copy URL"]})}),o.jsx("button",{onClick:()=>w(_.id),className:"p-2 text-red-600 hover:text-red-700 focus:outline-none",title:"Remove SDR",children:o.jsx(Zr,{className:"w-4 h-4"})})]})]},_.id)),r.length===0&&o.jsx("p",{className:"text-sm text-gray-500",children:"No SDRs have been added yet"})]})]})})]})}let _M={data:""},jM=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||_M,SM=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,NM=/\/\*[^]*?\*\/|  +/g,Ul=/\n+/g,Ot=(r,e)=>{let t="",n="",s="";for(let a in r){let i=r[a];a[0]=="@"?a[1]=="i"?t=a+" "+i+";":n+=a[1]=="f"?Ot(i,a):a+"{"+Ot(i,a[1]=="k"?"":e)+"}":typeof i=="object"?n+=Ot(i,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):i!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ot.p?Ot.p(a,i):a+":"+i+";")}return t+(e&&s?e+"{"+s+"}":s)+n},gt={},_u=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+_u(r[t]);return e}return r},EM=(r,e,t,n,s)=>{let a=_u(r),i=gt[a]||(gt[a]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(a));if(!gt[i]){let c=a!==r?r:(d=>{let u,h,f=[{}];for(;u=SM.exec(d.replace(NM,""));)u[4]?f.shift():u[3]?(h=u[3].replace(Ul," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(Ul," ").trim();return f[0]})(r);gt[i]=Ot(s?{["@keyframes "+i]:c}:c,t?"":"."+i)}let l=t&&gt.g?gt.g:null;return t&&(gt.g=gt[i]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(gt[i],e,n,l),i},TM=(r,e,t)=>r.reduce((n,s,a)=>{let i=e[a];if(i&&i.call){let l=i(t),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":Ot(l,""):l===!1?"":l}return n+s+(i??"")},"");function Ys(r){let e=this||{},t=r.call?r(e.p):r;return EM(t.unshift?t.raw?TM(t,[].slice.call(arguments,1),e.p):t.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):t,jM(e.target),e.g,e.o,e.k)}let ju,Ba,qa;Ys.bind({g:1});let _t=Ys.bind({k:1});function kM(r,e,t,n){Ot.p=e,ju=r,Ba=t,qa=n}function Ft(r,e){let t=this||{};return function(){let n=arguments;function s(a,i){let l=Object.assign({},a),c=l.className||s.className;t.p=Object.assign({theme:Ba&&Ba()},l),t.o=/ *go\d+/.test(c),l.className=Ys.apply(t,n)+(c?" "+c:"");let d=r;return r[0]&&(d=l.as||r,delete l.as),qa&&d[0]&&qa(l),ju(d,l)}return s}}var $M=r=>typeof r=="function",gs=(r,e)=>$M(r)?r(e):r,DM=(()=>{let r=0;return()=>(++r).toString()})(),Su=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),OM=20,Nu=(r,e)=>{switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,OM)};case 1:return{...r,toasts:r.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:t}=e;return Nu(r,{type:r.toasts.find(a=>a.id===t.id)?1:0,toast:t});case 3:let{toastId:n}=e;return{...r,toasts:r.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let s=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+s}))}}},Zn=[],Yt={toasts:[],pausedAt:void 0},or=r=>{Yt=Nu(Yt,r),Zn.forEach(e=>{e(Yt)})},MM={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CM=(r={})=>{let[e,t]=E.useState(Yt),n=E.useRef(Yt);E.useEffect(()=>(n.current!==Yt&&t(Yt),Zn.push(t),()=>{let a=Zn.indexOf(t);a>-1&&Zn.splice(a,1)}),[]);let s=e.toasts.map(a=>{var i,l,c;return{...r,...r[a.type],...a,removeDelay:a.removeDelay||((i=r[a.type])==null?void 0:i.removeDelay)||(r==null?void 0:r.removeDelay),duration:a.duration||((l=r[a.type])==null?void 0:l.duration)||(r==null?void 0:r.duration)||MM[a.type],style:{...r.style,...(c=r[a.type])==null?void 0:c.style,...a.style}}});return{...e,toasts:s}},PM=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||DM()}),On=r=>(e,t)=>{let n=PM(e,r,t);return or({type:2,toast:n}),n.id},Me=(r,e)=>On("blank")(r,e);Me.error=On("error");Me.success=On("success");Me.loading=On("loading");Me.custom=On("custom");Me.dismiss=r=>{or({type:3,toastId:r})};Me.remove=r=>or({type:4,toastId:r});Me.promise=(r,e,t)=>{let n=Me.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof r=="function"&&(r=r()),r.then(s=>{let a=e.success?gs(e.success,s):void 0;return a?Me.success(a,{id:n,...t,...t==null?void 0:t.success}):Me.dismiss(n),s}).catch(s=>{let a=e.error?gs(e.error,s):void 0;a?Me.error(a,{id:n,...t,...t==null?void 0:t.error}):Me.dismiss(n)}),r};var AM=(r,e)=>{or({type:1,toast:{id:r,height:e}})},RM=()=>{or({type:5,time:Date.now()})},Qr=new Map,IM=1e3,LM=(r,e=IM)=>{if(Qr.has(r))return;let t=setTimeout(()=>{Qr.delete(r),or({type:4,toastId:r})},e);Qr.set(r,t)},FM=r=>{let{toasts:e,pausedAt:t}=CM(r);E.useEffect(()=>{if(t)return;let a=Date.now(),i=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&Me.dismiss(l.id);return}return setTimeout(()=>Me.dismiss(l.id),c)});return()=>{i.forEach(l=>l&&clearTimeout(l))}},[e,t]);let n=E.useCallback(()=>{t&&or({type:6,time:Date.now()})},[t]),s=E.useCallback((a,i)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=i||{},u=e.filter(m=>(m.position||d)===(a.position||d)&&m.height),h=u.findIndex(m=>m.id===a.id),f=u.filter((m,v)=>v<h&&m.visible).length;return u.filter(m=>m.visible).slice(...l?[f+1]:[0,f]).reduce((m,v)=>m+(v.height||0)+c,0)},[e]);return E.useEffect(()=>{e.forEach(a=>{if(a.dismissed)LM(a.id,a.removeDelay);else{let i=Qr.get(a.id);i&&(clearTimeout(i),Qr.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:AM,startPause:RM,endPause:n,calculateOffset:s}}},UM=_t`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,HM=_t`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,WM=_t`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,BM=Ft("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${UM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${HM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${WM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,qM=_t`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zM=Ft("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${qM} 1s linear infinite;
`,GM=_t`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,YM=_t`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,VM=Ft("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${GM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${YM} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,KM=Ft("div")`
  position: absolute;
`,XM=Ft("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,JM=_t`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,QM=Ft("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${JM} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ZM=({toast:r})=>{let{icon:e,type:t,iconTheme:n}=r;return e!==void 0?typeof e=="string"?E.createElement(QM,null,e):e:t==="blank"?null:E.createElement(XM,null,E.createElement(zM,{...n}),t!=="loading"&&E.createElement(KM,null,t==="error"?E.createElement(BM,{...n}):E.createElement(VM,{...n})))},eC=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,tC=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,rC="0%{opacity:0;} 100%{opacity:1;}",nC="0%{opacity:1;} 100%{opacity:0;}",sC=Ft("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,aC=Ft("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,iC=(r,e)=>{let t=r.includes("top")?1:-1,[n,s]=Su()?[rC,nC]:[eC(t),tC(t)];return{animation:e?`${_t(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${_t(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},oC=E.memo(({toast:r,position:e,style:t,children:n})=>{let s=r.height?iC(r.position||e||"top-center",r.visible):{opacity:0},a=E.createElement(ZM,{toast:r}),i=E.createElement(aC,{...r.ariaProps},gs(r.message,r));return E.createElement(sC,{className:r.className,style:{...s,...t,...r.style}},typeof n=="function"?n({icon:a,message:i}):E.createElement(E.Fragment,null,a,i))});kM(E.createElement);var lC=({id:r,className:e,style:t,onHeightUpdate:n,children:s})=>{let a=E.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;n(r,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[r,n]);return E.createElement("div",{ref:a,className:e,style:t},s)},cC=(r,e)=>{let t=r.includes("top"),n=t?{top:0}:{bottom:0},s=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Su()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...n,...s}},dC=Ys`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,zn=16,uC=({reverseOrder:r,position:e="top-center",toastOptions:t,gutter:n,children:s,containerStyle:a,containerClassName:i})=>{let{toasts:l,handlers:c}=FM(t);return E.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:zn,left:zn,right:zn,bottom:zn,pointerEvents:"none",...a},className:i,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||e,h=c.calculateOffset(d,{reverseOrder:r,gutter:n,defaultPosition:e}),f=cC(u,h);return E.createElement(lC,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?dC:"",style:f},d.type==="custom"?gs(d.message,d):s?s(d):E.createElement(oC,{toast:d,position:u}))}))};function hC({sdrs:r,onUpdate:e}){const[t,n]=E.useState([]),[s,a]=E.useState(!0),[i,l]=E.useState(null),[c,d]=E.useState(null),[u,h]=E.useState("alphabetical"),[f,m]=E.useState("");E.useState(0);const[v,g]=E.useState(!1),[p,y]=E.useState(null),[b,x]=E.useState(null),[w,j]=E.useState(null),[T,_]=E.useState(0),[N,O]=E.useState(0),[P,C]=E.useState(0),[A,I]=E.useState(0),[Y,Z]=E.useState(!1),[X,te]=E.useState({}),[J,de]=E.useState({});E.useEffect(()=>{$()},[u]);async function $(){try{const{data:M,error:L}=await re.from("clients").select(`
          *,
          assignments (
            *,
            monthly_set_target,
            monthly_hold_target
          )
        `);if(L)throw L;let K=[...(M||[]).map(H=>({...H,assignments:H.assignments||[]}))];u==="alphabetical"?K.sort((H,F)=>H.name.localeCompare(F.name)):u==="target"?K.sort((H,F)=>{const B=H.assignments.reduce((le,oe)=>le+(oe.monthly_set_target||0),0),ne=F.assignments.reduce((le,oe)=>le+(oe.monthly_set_target||0),0),Q=H.monthly_set_target>0?B/H.monthly_set_target:0;return(F.monthly_set_target>0?ne/F.monthly_set_target:0)-Q}):u==="date"&&K.sort((H,F)=>new Date(F.created_at).getTime()-new Date(H.created_at).getTime()),n(K)}catch(M){l(M instanceof Error?M.message:"Failed to fetch clients")}finally{a(!1)}}async function S(M,L,z){if(!(L<0||z<0))try{l(null);const{error:K}=await re.from("clients").update({monthly_set_target:L,monthly_hold_target:z}).eq("id",M);if(K)throw K;n(H=>H.map(F=>F.id===M?{...F,monthly_set_target:L,monthly_hold_target:z}:F)),e()}catch(K){l(K instanceof Error?K.message:"Failed to update target")}}async function D(M,L,z,K){if(!(z<0||K<0))try{l(null);const H=new Date,F=new Date(H.getFullYear(),H.getMonth(),1).toISOString().split("T")[0],{data:B,error:ne}=await re.from("assignments").select("id").eq("sdr_id",M).eq("client_id",L).order("month",{ascending:!1}).limit(1).maybeSingle();if(ne)throw ne;if(B){const{error:Q}=await re.from("assignments").update({monthly_set_target:z,monthly_hold_target:K}).eq("id",B.id);if(Q)throw Q}n(Q=>Q.map(se=>{if(se.id===L){const le=se.assignments.map(oe=>oe.sdr_id===M?{...oe,monthly_set_target:z,monthly_hold_target:K}:oe);return{...se,assignments:le}}return se})),e()}catch(H){l(H instanceof Error?H.message:"Failed to update SDR target")}}async function R(M){M.preventDefault(),a(!0),l(null),d(null);try{const{error:L}=await re.from("clients").insert([{name:f,monthly_set_target:A,monthly_hold_target:P}]);if(L)throw L;d("Client added successfully"),m(""),I(0),C(0),g(!1),await $(),e()}catch(L){l(L instanceof Error?L.message:"Failed to add client")}finally{a(!1)}}async function G(M){if(M.preventDefault(),!(!b||!w))try{const L=new Date,z=new Date(L.getFullYear(),L.getMonth(),1).toISOString().split("T")[0],{data:K,error:H}=await re.from("assignments").select("*").eq("client_id",b).eq("sdr_id",w).order("month",{ascending:!1}).limit(1).maybeSingle();if(H)throw H;if(K){const{error:F}=await re.from("assignments").update({monthly_set_target:N,monthly_hold_target:T}).eq("id",K.id);if(F)throw F}else{const{error:F}=await re.from("assignments").insert([{client_id:b,sdr_id:w,monthly_set_target:N,monthly_hold_target:T,month:z}]);if(F)throw F}d("Client assigned successfully"),x(null),j(null),O(0),_(0),Z(!1),await $(),e()}catch(L){l(L instanceof Error?L.message:"Failed to assign client")}finally{a(!1)}}async function V(M){if(confirm("Are you sure you want to delete this client? This will remove all assignments and meetings associated with this client.")){a(!0),l(null);try{const{error:L}=await re.from("clients").delete().eq("id",M);if(L)throw L;d("Client deleted successfully"),await $(),e()}catch(L){l(L instanceof Error?L.message:"Failed to delete client")}finally{a(!1)}}}return s?o.jsx("div",{className:"flex justify-center items-center p-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Manage Clients"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{htmlFor:"sort",className:"text-sm font-medium text-gray-700",children:"Sort by:"}),o.jsxs("select",{id:"sort",value:u,onChange:M=>{h(M.target.value)},className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"alphabetical",children:"Alphabetical"}),o.jsx("option",{value:"target",children:"% Target Assigned"}),o.jsx("option",{value:"date",children:"Date Added"})]})]}),o.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[o.jsx(Ga,{className:"w-4 h-4"}),"Add Client"]})]})]})}),i&&o.jsx("div",{className:"m-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[o.jsx(et,{className:"w-5 h-5"}),o.jsx("p",{children:i})]})}),c&&o.jsx("div",{className:"m-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:o.jsx("p",{className:"text-green-700",children:c})}),o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"space-y-4",children:t.map(M=>{const L=M.assignments.reduce((F,B)=>F+(B.monthly_set_target||0),0),z=M.assignments.reduce((F,B)=>F+(B.monthly_hold_target||0),0),K=M.monthly_set_target>0?L/M.monthly_set_target*100:0,H=M.monthly_hold_target>0?z/M.monthly_hold_target*100:0;return o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:M.name}),o.jsx("div",{className:"mt-2 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Monthly Targets:"}),p===M.id?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Set"}),o.jsx("input",{type:"number",min:"0",value:X[`${M.id}-set`]??M.monthly_set_target,onChange:F=>{const B=parseInt(F.target.value);isNaN(B)||te(ne=>({...ne,[`${M.id}-set`]:B}))},className:"w-20 px-2 py-1 border border-indigo-500 rounded-md"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Hold"}),o.jsx("input",{type:"number",min:"0",value:X[`${M.id}-hold`]??M.monthly_hold_target,onChange:F=>{const B=parseInt(F.target.value);isNaN(B)||te(ne=>({...ne,[`${M.id}-hold`]:B}))},className:"w-20 px-2 py-1 border border-indigo-500 rounded-md"})]})]}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:"text-sm",children:["Set: ",M.monthly_set_target]}),o.jsxs("span",{className:"text-sm",children:["Hold: ",M.monthly_hold_target]})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4 text-gray-400"}),o.jsxs("span",{className:"text-sm text-gray-600",children:[M.assignments.length," SDR",M.assignments.length!==1?"s":""," assigned"]}),o.jsxs("span",{className:"text-sm font-medium",children:["(Set: ",K.toFixed(1),"% assigned, Hold: ",H.toFixed(1),"% assigned)"]})]})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>{x(M.id),Z(!0)},disabled:p===M.id,className:`inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${p===M.id?"bg-gray-200 text-gray-400 cursor-not-allowed":"text-indigo-700 bg-indigo-50 hover:bg-indigo-100 focus:ring-indigo-500"}`,children:[o.jsx(Yn,{className:"w-4 h-4"}),"Assign SDR"]}),o.jsxs("button",{onClick:()=>{y(M.id),te(B=>({...B,[M.id]:M.monthly_target}));const F={};M.assignments.forEach(B=>{F[`${M.id}-${B.sdr_id}-set`]=B.monthly_set_target,F[`${M.id}-${B.sdr_id}-hold`]=B.monthly_hold_target}),de(B=>({...B,...F}))},disabled:p===M.id,className:`inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${p===M.id?"bg-gray-200 text-gray-400 cursor-not-allowed":"text-indigo-700 bg-indigo-50 hover:bg-indigo-100 focus:ring-indigo-500"}`,children:[o.jsx(Ql,{className:"w-4 h-4"}),"Edit"]})]}),p===M.id&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>{const F=X[`${M.id}-set`]??M.monthly_set_target,B=X[`${M.id}-hold`]??M.monthly_hold_target;S(M.id,F,B),M.assignments.forEach(ne=>{const Q=`${M.id}-${ne.sdr_id}-set`,se=`${M.id}-${ne.sdr_id}-hold`,le=J[Q]??ne.monthly_set_target,oe=J[se]??ne.monthly_hold_target;D(ne.sdr_id,M.id,le,oe)}),y(null)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-white bg-green-600 rounded hover:bg-green-700",children:"Save"}),o.jsx("button",{onClick:()=>{y(null),te(F=>{const B={...F};return delete B[M.id],B}),de(F=>{const B={...F};return M.assignments.forEach(ne=>delete B[`${M.id}-${ne.sdr_id}`]),B})},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-gray-600 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"})]}),o.jsx("button",{onClick:()=>V(M.id),className:"p-1 text-red-600 hover:text-red-700 focus:outline-none",children:o.jsx(Zr,{className:"w-4 h-4"})})]})]}),M.assignments.length>0&&o.jsx("div",{className:"mt-4 space-y-2",children:M.assignments.map(F=>{const B=r.find(se=>se.id===F.sdr_id),ne=M.monthly_set_target>0?F.monthly_set_target/M.monthly_set_target*100:0,Q=M.monthly_hold_target>0?F.monthly_hold_target/M.monthly_hold_target*100:0;return o.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-md",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:B==null?void 0:B.full_name})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"w-4 h-4 text-gray-400"}),p===M.id?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",min:"0",value:J[`${M.id}-${F.sdr_id}-set`]??F.monthly_set_target,onChange:se=>{const le=parseInt(se.target.value)||0;de(oe=>({...oe,[`${M.id}-${F.sdr_id}-set`]:le}))},className:"w-16 px-1 py-1 text-center border border-indigo-500 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500"}),o.jsx("input",{type:"number",min:"0",value:J[`${M.id}-${F.sdr_id}-hold`]??F.monthly_hold_target,onChange:se=>{const le=parseInt(se.target.value)||0;de(oe=>({...oe,[`${M.id}-${F.sdr_id}-hold`]:le}))},className:"w-16 px-1 py-1 text-center border border-indigo-500 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}):o.jsxs("div",{className:"flex flex-col w-32 text-center",children:[o.jsxs("span",{className:"font-medium text-gray-800",children:["Set: ",F.monthly_set_target]}),o.jsxs("span",{className:"text-sm text-gray-500",children:["Held: ",F.monthly_hold_target]})]}),o.jsxs("span",{className:"text-sm text-gray-500",children:["(Set: ",ne.toFixed(1),"%, Hold: ",Q.toFixed(1),"%)"]}),p===M.id&&o.jsx("button",{onClick:async()=>{if(!confirm("Are you sure you want to delete this SDR assignment?"))return;const se=new Date;new Date(se.getFullYear(),se.getMonth(),1).toISOString().split("T")[0];const{data:le,error:oe}=await re.from("assignments").select("id").eq("sdr_id",F.sdr_id).eq("client_id",M.id).order("month",{ascending:!1}).limit(1).maybeSingle();if(oe){Me.error("Failed to find assignment to delete");return}if(le){const{error:Le}=await re.from("assignments").delete().eq("id",le.id);if(Le){Me.error("Failed to delete assignment");return}n(Pe=>Pe.map(pe=>pe.id===M.id?{...pe,assignments:pe.assignments.filter(ht=>ht.sdr_id!==F.sdr_id)}:pe)),Me.success("SDR assignment deleted")}},className:"p-1 text-red-500 hover:text-red-700 focus:outline-none",children:o.jsx(Zr,{className:"w-4 h-4"})})]})})]},`${M.id}-${F.sdr_id}`)})})]},M.id)})})}),v&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Client"}),o.jsxs("form",{onSubmit:R,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:"Client Name"}),o.jsx("input",{type:"text",id:"clientName",value:f,onChange:M=>m(M.target.value),required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"clientSetTarget",className:"block text-sm font-medium text-gray-700",children:"Monthly Set Target"}),o.jsx("input",{type:"number",id:"clientSetTarget",min:"0",value:A,onChange:M=>I(parseInt(M.target.value)||0),required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"clientHoldTarget",className:"block text-sm font-medium text-gray-700",children:"Monthly Held Target"}),o.jsx("input",{type:"number",id:"clientHoldTarget",min:"0",value:P,onChange:M=>C(parseInt(M.target.value)||0),required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Add Client"})]})]})]})}),Y&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Assign Client to SDR"}),o.jsxs("form",{onSubmit:G,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"sdr",className:"block text-sm font-medium text-gray-700",children:"Select SDR"}),o.jsxs("select",{id:"sdr",value:w||"",onChange:M=>j(M.target.value),required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[o.jsx("option",{value:"",children:"Select an SDR"}),r.map(M=>o.jsx("option",{value:M.id,children:M.full_name},M.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"holdTarget",className:"block text-sm font-medium text-gray-700",children:"Monthly Meeting Held Target"}),o.jsx("input",{type:"number",id:"holdTarget",min:"0",value:T===0?"":T,onChange:M=>{const L=parseInt(M.target.value);_(isNaN(L)?0:L)},required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"setTarget",className:"block text-sm font-medium text-gray-700",children:"Monthly Meeting Set Target"}),o.jsx("input",{type:"number",id:"setTarget",min:"0",value:N===0?"":N,onChange:M=>{const L=parseInt(M.target.value);O(isNaN(L)?0:L)},required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>{Z(!1),x(null),j(null),setMonthlyTarget(0)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Assign Client"})]})]})]})})]})}function fC(){const[r,e]=E.useState(""),[t,n]=E.useState(""),[s,a]=E.useState(""),[i,l]=E.useState(!1),[c,d]=E.useState(null),[u,h]=E.useState(null),[f,m]=E.useState(null),[v,g]=E.useState(""),[p,y]=E.useState(()=>{const w=localStorage.getItem("managers");return w?JSON.parse(w):[]});async function b(w){w.preventDefault(),l(!0),d(null),h(null);try{if(!r||!t||!s)throw new Error("All fields are required");if(s.length<6)throw new Error("Password must be at least 6 characters long");if(p.some(_=>_.email===r))throw new Error("A manager with this email already exists");const j={email:r,fullName:t,password:s},T=[...p,j];localStorage.setItem("managers",JSON.stringify(T)),y(T),h("Manager added successfully"),e(""),n(""),a("")}catch(j){console.error("Add manager error:",j),d(j instanceof Error?j.message:"Failed to add manager")}finally{l(!1)}}function x(w){if(!v){d("New password is required");return}if(v.length<6){d("Password must be at least 6 characters long");return}try{const j=p.map(T=>T.email===w?{...T,password:v}:T);localStorage.setItem("managers",JSON.stringify(j)),y(j),m(null),g(""),h("Password updated successfully"),d(null)}catch(j){console.error("Update password error:",j),d(j instanceof Error?j.message:"Failed to update password")}}return o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Manage Users"})}),o.jsxs("form",{onSubmit:b,className:"p-6 border-b border-gray-200",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Add New Manager"}),c&&o.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-center gap-2 text-red-700",children:[o.jsx(et,{className:"w-4 h-4"}),o.jsx("p",{className:"text-sm",children:c})]}),u&&o.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:o.jsx("p",{className:"text-sm text-green-700",children:u})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),o.jsx("input",{id:"fullName",type:"text",required:!0,value:t,onChange:w=>n(w.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsx("input",{id:"email",type:"email",required:!0,value:r,onChange:w=>e(w.target.value),pattern:"[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsx("input",{id:"password",type:"password",required:!0,minLength:6,value:s,onChange:w=>a(w.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center items-center gap-2 rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(Zu,{className:"w-4 h-4"}),"Add Manager"]})})]})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Current Managers"}),o.jsxs("div",{className:"space-y-3",children:[p.map(w=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:w.fullName}),o.jsx("p",{className:"text-xs text-gray-500",children:w.email})]}),o.jsx("div",{className:"flex items-center gap-2",children:f===w.email?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"password",value:v,onChange:j=>g(j.target.value),placeholder:"New password",className:"px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500"}),o.jsx("button",{onClick:()=>x(w.email),className:"p-1 text-green-600 hover:text-green-700 focus:outline-none",title:"Save new password",children:o.jsx(Yl,{className:"w-4 h-4"})})]}):o.jsxs("button",{onClick:()=>{m(w.email),g(""),d(null)},className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-medium text-indigo-700 bg-indigo-50 rounded-md hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[o.jsx(Gu,{className:"w-4 h-4"}),"Edit Password"]})})]},w.email)),p.length===0&&o.jsx("p",{className:"text-sm text-gray-500",children:"No managers have been added yet"})]})]})]})})}function Gn({title:r,icon:e,meetings:t,onEdit:n,editingMeetingId:s,onDelete:a,onUpdateHeldDate:i,onUpdateConfirmedDate:l,editable:c=!1,onSave:d,onCancel:u,showActions:h=!1,showDateControls:f=!1}){const[m,v]=E.useState(""),g=t.filter(p=>{var b;return`${((b=p.clients)==null?void 0:b.name)||""} ${p.contact_full_name||""} ${p.contact_email||""} ${p.contact_phone||""}`.toLowerCase().includes(m.toLowerCase())});return o.jsxs("div",{className:"bg-white rounded-lg shadow-md h-[calc(100vh-24rem)] flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),e]}),o.jsxs("span",{className:"text-sm text-gray-500",children:[g.length," meetings"]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Search meetings...",value:m,onChange:p=>v(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"}),o.jsx(Ya,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.jsx("div",{className:"space-y-4",children:g.length>0?g.map(p=>o.jsx(yn,{meeting:p,onDelete:a,onUpdateHeldDate:i,onUpdateConfirmedDate:l,editable:!!c,showActions:!!h,showDateControls:!!f,showDetails:!0,onEdit:n,isEditing:s===p.id,onSave:d,onCancel:u},p.id)):o.jsx("p",{className:"text-gray-500 text-sm text-center",children:m?"No meetings found matching your search":"No meetings to display"})})})]})}function mC({meetings:r,fetchSDRs:e}){const[t,n]=E.useState(!0);E.useEffect(()=>{const _=setTimeout(()=>n(!1),1e4);return()=>clearTimeout(_)},[]);const{sdrs:s,loading:a}=xu(),[i,l]=E.useState("all"),[c,d]=E.useState([]),[u,h]=E.useState(null),[f,m]=E.useState({}),{meetings:v}=Ss(i==="all"?null:i);E.useEffect(()=>{async function _(){if(i==="all"){const N=await Promise.all(s.map(async O=>{const{data:P}=await re.from("meetings").select("*, clients(name)").eq("sdr_id",O.id);return(P||[]).map(C=>({...C,sdr_name:O.full_name}))}));d(N.flat())}else d(v.map(N=>{var O;return{...N,sdr_name:(O=s.find(P=>P.id===i))==null?void 0:O.full_name}}))}_()},[i,s,v]);const g=async _=>{const{error:N}=await re.from("meetings").delete().eq("id",_);N?console.error("Error deleting meeting:",N):(d(c.filter(O=>O.id!==_)),e())},p=async _=>{const{error:N}=await re.from("meetings").update({scheduled_date:_.scheduled_date,status:_.status,no_show:_.no_show}).eq("id",_.id);N?console.error("Error updating meeting:",N):(d(c.map(O=>O.id===_.id?_:O)),e(),h(null),m({}))},y=_=>{h(_.id),m({..._,scheduled_date:_.scheduled_date,status:_.status,no_show:_.no_show})},b=new Date().toISOString().split("T")[0],x=c.filter(_=>_.scheduled_date.split("T")[0]===b).sort((_,N)=>new Date(_.scheduled_date).getTime()-new Date(N.scheduled_date).getTime()),w=c.filter(_=>_.status==="pending"&&!_.no_show).sort((_,N)=>{const O=new Date(_.scheduled_date),P=new Date(N.scheduled_date),C=new Date,A=Math.abs(O.getTime()-C.getTime()),I=Math.abs(P.getTime()-C.getTime());return A-I}),j=c.filter(_=>_.status==="confirmed").sort((_,N)=>new Date(_.scheduled_date).getTime()-new Date(N.scheduled_date).getTime()),T=c.filter(_=>_.no_show).sort((_,N)=>new Date(N.scheduled_date).getTime()-new Date(_.scheduled_date).getTime());return a?o.jsx("div",{className:"flex justify-center items-center p-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Team's Meetings"}),o.jsxs("select",{value:i,onChange:_=>l(_.target.value),className:"rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[o.jsx("option",{value:"all",children:"All SDRs"}),s.map(_=>o.jsx("option",{value:_.id,children:_.full_name},_.id))]})]})}),o.jsx("div",{className:"mb-8",children:o.jsx(wu,{meetings:c})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx(Gn,{title:"Today's Meetings",icon:o.jsx(Mt,{className:"w-5 h-5 text-indigo-600"}),meetings:x,showDateControls:!0,editable:!0,onSave:p,onDelete:g,onCancel:()=>{h(null),e()},onEdit:y,editingMeetingId:u}),o.jsx("div",{className:`${t?"animate-glow-orange ring-2 ring-orange-400":""}`,children:o.jsx(Gn,{title:"Pending Meetings",icon:o.jsx(es,{className:"w-5 h-5 text-yellow-600"}),meetings:w,showDateControls:!0,editable:!0,onSave:p,onDelete:g,onCancel:()=>{h(null),e()},onEdit:y,editingMeetingId:u})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx(Gn,{title:"Confirmed Meetings",icon:o.jsx(yt,{className:"w-5 h-5 text-green-600"}),meetings:j,showDateControls:!0,editable:!0,onSave:p,onDelete:g,onCancel:()=>{h(null),e()},onEdit:y,editingMeetingId:u}),o.jsx(Gn,{title:"No Shows",icon:o.jsx(ma,{className:"w-5 h-5 text-red-600"}),meetings:T,showDateControls:!0,editable:!0,onSave:p,onDelete:g,onCancel:()=>{h(null),e()},onEdit:y,editingMeetingId:u})]})]})}function gC(){const{profile:r}=Gl(),{sdrs:e,loading:t,error:n,fetchSDRs:s}=xu();console.log("[DEBUG] useMeetings called with SDR ID:",null);const{meetings:a,loading:i}=Ss(null),[l,c]=E.useState(null),[d,u]=E.useState("overview"),[h,f]=E.useState({}),[m,v]=E.useState(null);E.useEffect(()=>{console.log("[DEBUG] meetingsLoading:",i),console.log("[DEBUG] meetings count:",a.length),a.forEach(D=>{console.log(`[DEBUG] meeting id=${D.id} scheduled_date=${D.scheduled_date} no_show=${D.no_show}`)})},[a,i]);const g=a.filter(D=>new Date(D.created_at).toDateString()===new Date().toDateString()),p=a.filter(D=>D.status==="confirmed"&&D.confirmed_at&&new Date(D.confirmed_at).toDateString()===new Date().toDateString());async function y(){localStorage.removeItem("currentUser"),await re.auth.signOut(),window.location.href="/"}function b(D){f(R=>({...R,[D]:!R[D]}))}function x(D){const R={id:D,timestamp:Date.now(),type:"sdr_access"};return btoa(JSON.stringify(R))}function w(D){const R=x(D);return`${window.location.origin}/dashboard/sdr/${R}`}async function j(D){const R=w(D);try{await navigator.clipboard.writeText(R),v(D),setTimeout(()=>v(null),2e3)}catch(G){console.error("Failed to copy URL:",G)}}if(t||i)return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});console.log("All meetings:",a),console.log("Held meeting candidates:",a.filter(D=>D.status==="confirmed"&&D.scheduled_date&&new Date(D.scheduled_date)<new Date&&!D.no_show));const T=new Date,_=new Date(T.getFullYear(),T.getMonth()+1,0).getDate(),O=T.getDate()/_*100,P=e.reduce((D,R)=>D+R.totalConfirmedMeetings,0),C=e.reduce((D,R)=>D+R.totalPendingMeetings,0),A=P+C;console.log("Held meeting candidates:",a.map(D=>({id:D.id,status:D.status,scheduled_date:D.scheduled_date,no_show:D.no_show,in_past:D.scheduled_date?new Date(D.scheduled_date)<new Date:!1}))),console.log("[DEBUG] About to calculate totalHeldMeetings filter criteria");const I=a.filter(D=>D.scheduled_date&&new Date(D.scheduled_date)<new Date&&!D.no_show).length;console.log("[DEBUG] totalHeldMeetings:",I),e.reduce((D,R)=>D+R.totalNoShows,0);const Y=e.reduce((D,R)=>D+R.clients.reduce((G,V)=>G+V.monthlyTarget,0),0),Z=T.getMonth(),X=T.getFullYear(),te=e.reduce((D,R)=>D+R.clients.reduce((G,V)=>G+(V.monthlyTarget||0),0),0),J=a.filter(D=>new Date(D.created_at).getMonth()===Z&&new Date(D.created_at).getFullYear()===X).length,de=a.filter(D=>{if(!D.scheduled_date||D.no_show)return!1;const R=new Date(D.scheduled_date);return R<new Date&&R.getMonth()===Z&&R.getFullYear()===X}).length,$=A,S=I;return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("header",{className:"bg-white shadow",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",(r==null?void 0:r.full_name)||"Manager"]}),o.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Month Progress: ",O.toFixed(1),"%"]})]}),o.jsxs("button",{onClick:y,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[o.jsx(Ku,{className:"w-4 h-4"}),"Logout"]})]})})}),o.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[n&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[o.jsx(et,{className:"w-5 h-5"}),o.jsx("p",{children:n})]})}),o.jsx("div",{className:"mb-6 border-b border-gray-200",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsx("button",{onClick:()=>u("overview"),className:`${d==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm`,children:"Overview"}),o.jsxs("button",{onClick:()=>u("meetings"),className:`${d==="meetings"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2`,children:[o.jsx(Yu,{className:"w-4 h-4"}),"Team's Meetings"]}),o.jsx("button",{onClick:()=>u("sdrs"),className:`${d==="sdrs"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm`,children:"SDR Management"}),o.jsx("button",{onClick:()=>u("clients"),className:`${d==="clients"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm`,children:"Client Management"}),(r==null?void 0:r.super_admin)&&o.jsx("button",{onClick:()=>u("users"),className:`${d==="users"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm`,children:"User Management"})]})}),d==="overview"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Total SDRs"}),o.jsx(Yn,{className:"w-6 h-6 text-indigo-600"})]}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.length})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Target"}),o.jsx(Ct,{className:"w-6 h-6 text-indigo-600"})]}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:te}),o.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[O.toFixed(1),"% of month completed"]}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cumulative: ",Y]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Meetings Set"}),o.jsx(Mt,{className:"w-6 h-6 text-indigo-600"})]}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:J}),o.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[(J/te*100).toFixed(1),"% of target"]}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cumulative: ",$]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Meetings Held"}),o.jsx(yt,{className:"w-6 h-6 text-green-600"})]}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:de}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Completed this month"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cumulative: ",S]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-8",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"SDR Performance"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SDR Name"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Set Target"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Held Target"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Meetings Set"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Held"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(D=>{const R=D.clients.reduce((H,F)=>H+F.monthlyTarget,0),G=D.totalConfirmedMeetings+D.totalPendingMeetings,V=G/R*100,M=V>=O,L=h[D.id],z=a.filter(H=>H.sdr_id===D.id&&H.scheduled_date&&new Date(H.scheduled_date)<new Date&&!H.no_show).length,K=z/R*100;return console.log(`[DEBUG] SDR ${D.id} heldMeetings:`,z),o.jsxs(k.Fragment,{children:[o.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${l===D.id?"bg-indigo-50":""}`,onClick:()=>b(D.id),children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[L?o.jsx(Vl,{className:"w-4 h-4 text-gray-400"}):o.jsx(Kl,{className:"w-4 h-4 text-gray-400"}),o.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.full_name})]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:R})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:R})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:G})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(yt,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{className:"text-sm text-gray-900",children:z})]})}),o.jsx("td",{className:"px-8 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsxs("div",{className:"flex items-center w-full",children:[o.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden mr-2",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${M?"bg-green-600":"bg-yellow-600"}`,style:{width:`${V}%`}})}),o.jsxs("span",{className:`text-sm font-medium ${M?"text-green-600":"text-yellow-600"}`,children:[isNaN(V)?"0.0":V.toFixed(1),"%"]}),o.jsx("div",{className:"ml-2 text-sm text-gray-500",children:"Set"})]}),o.jsxs("div",{className:"flex items-center w-full mt-1",children:[o.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden mr-2",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${K>=O?"bg-green-400":"bg-yellow-400"}`,style:{width:`${K}%`}})}),o.jsxs("span",{className:`text-sm font-medium ${K>=O?"text-green-600":"text-yellow-600"}`,children:[isNaN(K)?"0.0":K.toFixed(1),"%"]}),o.jsx("div",{className:"ml-2 text-sm text-gray-500",children:"Held"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:H=>{H.stopPropagation(),j(D.id)},className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-medium text-indigo-700 bg-indigo-50 rounded-md hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:m===D.id?o.jsxs(o.Fragment,{children:[o.jsx(fa,{className:"w-4 h-4"}),"Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(fa,{className:"w-4 h-4"}),"Copy URL"]})})})]}),L&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-6 py-4 bg-gray-50",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Client Assignments"}),D.clients.map(H=>{const F=H.confirmedMeetings+H.pendingMeetings,B=F/H.monthlyTarget*100,ne=B>=O,Q=a.filter(se=>se.sdr_id===D.id&&se.client_id===H.id&&se.scheduled_date&&new Date(se.scheduled_date)<new Date&&!se.no_show).length;return console.log(`[DEBUG] SDR ${D.id} client ${H.id} heldMeetings:`,Q),o.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-md shadow-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:H.name}),o.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[o.jsxs("span",{className:"text-sm text-gray-500",children:["Target: ",H.monthlyTarget]}),o.jsxs("span",{className:"text-sm text-gray-500",children:["Set: ",F]}),o.jsxs("span",{className:"text-sm text-gray-500",children:["Held: ",Q]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${ne?"bg-green-600":"bg-yellow-600"}`,style:{width:`${B}%`}})}),o.jsxs("span",{className:`text-sm font-medium ${ne?"text-green-600":"text-yellow-600"}`,children:[isNaN(B)?"0.0":B.toFixed(1),"%"]})]})]},H.id)}),D.clients.length===0&&o.jsx("p",{className:"text-sm text-gray-500",children:"No clients assigned"})]})})})]},D.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Meetings Booked Today (",g.length,")"]}),o.jsxs("div",{className:"space-y-3",children:[g.map(D=>{var R;return o.jsxs("div",{className:`flex items-center justify-between p-3 bg-gray-50 rounded-lg ${D.status==="pending"?"animate-glow-orange ring-2 ring-orange-400":""}`,children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:(R=D.clients)==null?void 0:R.name}),o.jsx("p",{className:"text-xs text-gray-500",children:new Date(D.scheduled_date).toLocaleDateString()})]}),o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.status==="confirmed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:D.status})]},D.id)}),g.length===0&&o.jsx("p",{className:"text-sm text-gray-500",children:"No meetings booked today"})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Meetings Confirmed Today (",p.length,")"]}),o.jsxs("div",{className:"space-y-3",children:[p.map(D=>{var R;return o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:(R=D.clients)==null?void 0:R.name}),o.jsx("p",{className:"text-xs text-gray-500",children:new Date(D.scheduled_date).toLocaleDateString()})]}),o.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:"confirmed"})]},D.id)}),p.length===0&&o.jsx("p",{className:"text-sm text-gray-500",children:"No meetings confirmed today"})]})]})]})]}),d==="meetings"&&o.jsx(o.Fragment,{children:o.jsx(mC,{})}),d==="sdrs"&&o.jsx(xM,{sdrs:e,onInviteSent:s}),d==="clients"&&o.jsx(hC,{sdrs:e,onUpdate:s}),d==="users"&&(r==null?void 0:r.super_admin)&&o.jsx(fC,{})]})]})}function pC(){const{user:r,profile:e,loading:t,error:n}=Gl();return t&&!window.location.pathname.startsWith("/dashboard/sdr/")?o.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading application..."})]})}):n&&!window.location.pathname.startsWith("/dashboard/sdr/")?o.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full",children:[o.jsx("p",{className:"text-red-600 mb-4",children:n}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Retry"})]})}):o.jsx(Cu,{children:o.jsxs(Wl,{children:[o.jsx(vt,{path:"/dashboard/sdr/:token/*",element:o.jsx(Fl,{})}),r&&e?o.jsxs(o.Fragment,{children:[o.jsx(vt,{path:"/",element:e.role==="manager"?o.jsx(Pn,{to:"/dashboard/manager",replace:!0}):o.jsx(Pn,{to:"/dashboard/sdr",replace:!0})}),o.jsx(vt,{path:"/dashboard/manager",element:e.role==="manager"?o.jsx(gC,{}):o.jsx(Pn,{to:"/",replace:!0})}),o.jsx(vt,{path:"/dashboard/sdr",element:e.role==="sdr"?o.jsx(Fl,{}):o.jsx(Pn,{to:"/",replace:!0})})]}):o.jsx(vt,{path:"*",element:o.jsx(eh,{})})]})})}zl(document.getElementById("root")).render(o.jsxs(E.StrictMode,{children:[o.jsx(uC,{position:"top-center"}),o.jsx(Pu,{children:o.jsx(pC,{})})]}))});export default vC();
